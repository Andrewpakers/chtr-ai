(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{4444:function(e,t,r){"use strict";r.d(t,{BH:function(){return v},L:function(){return u},LL:function(){return N},P0:function(){return m},Pz:function(){return b},Sg:function(){return w},ZR:function(){return S},aH:function(){return y},b$:function(){return T},eu:function(){return C},hl:function(){return _},m9:function(){return U},ne:function(){return M},pd:function(){return P},q4:function(){return p},ru:function(){return E},tV:function(){return c},uI:function(){return k},vZ:function(){return function e(t,r){if(t===r)return!0;let n=Object.keys(t),i=Object.keys(r);for(let s of n){if(!i.includes(s))return!1;let n=t[s],o=r[s];if(D(n)&&D(o)){if(!e(n,o))return!1}else if(n!==o)return!1}for(let e of i)if(!n.includes(e))return!1;return!0}},w1:function(){return I},xO:function(){return O},xb:function(){return R},z$:function(){return x},zd:function(){return L}});var n=r(3454);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let i=function(e){let t=[],r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);i<128?t[r++]=i:i<2048?(t[r++]=i>>6|192,t[r++]=63&i|128):(64512&i)==55296&&n+1<e.length&&(64512&e.charCodeAt(n+1))==56320?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n)),t[r++]=i>>18|240,t[r++]=i>>12&63|128,t[r++]=i>>6&63|128,t[r++]=63&i|128):(t[r++]=i>>12|224,t[r++]=i>>6&63|128,t[r++]=63&i|128)}return t},s=function(e){let t=[],r=0,n=0;for(;r<e.length;){let i=e[r++];if(i<128)t[n++]=String.fromCharCode(i);else if(i>191&&i<224){let s=e[r++];t[n++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){let s=e[r++],o=e[r++],a=e[r++],l=((7&i)<<18|(63&s)<<12|(63&o)<<6|63&a)-65536;t[n++]=String.fromCharCode(55296+(l>>10)),t[n++]=String.fromCharCode(56320+(1023&l))}else{let s=e[r++],o=e[r++];t[n++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let t=0;t<e.length;t+=3){let i=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,l=a?e[t+2]:0,u=i>>2,c=(3&i)<<4|o>>4,h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),n.push(r[u],r[c],r[h],r[d])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):s(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let t=0;t<e.length;){let i=r[e.charAt(t++)],s=t<e.length,o=s?r[e.charAt(t)]:0;++t;let l=t<e.length,u=l?r[e.charAt(t)]:64;++t;let c=t<e.length,h=c?r[e.charAt(t)]:64;if(++t,null==i||null==o||null==u||null==h)throw new a;let d=i<<2|o>>4;if(n.push(d),64!==u){let e=o<<4&240|u>>2;if(n.push(e),64!==h){let e=u<<6&192|h;n.push(e)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class a extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let l=function(e){let t=i(e);return o.encodeByteArray(t,!0)},u=function(e){return l(e).replace(/\./g,"")},c=function(e){try{return o.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},h=()=>/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw Error("Unable to locate global object.")})().__FIREBASE_DEFAULTS__,d=()=>{if(void 0===n||void 0===n.env)return;let e=n.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},f=()=>{let e;if("undefined"==typeof document)return;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}let t=e&&c(e[1]);return t&&JSON.parse(t)},g=()=>{try{return h()||d()||f()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},p=e=>{var t,r;return null===(r=null===(t=g())||void 0===t?void 0:t.emulatorHosts)||void 0===r?void 0:r[e]},m=e=>{let t=p(e);if(!t)return;let r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let n=parseInt(t.substring(r+1),10);return"["===t[0]?[t.substring(1,r-1),n]:[t.substring(0,r),n]},y=()=>{var e;return null===(e=g())||void 0===e?void 0:e.config},b=e=>{var t;return null===(t=g())||void 0===t?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w(e,t){if(e.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let r=t||"demo-project",n=e.iat||0,i=e.sub||e.user_id;if(!i)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:n,exp:n+3600,auth_time:n,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[u(JSON.stringify({alg:"none",type:"JWT"})),u(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function k(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(x())}function E(){let e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function T(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function I(){let e=x();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function _(){try{return"object"==typeof indexedDB}catch(e){return!1}}function C(){return new Promise((e,t)=>{try{let r=!0,n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})}class S extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,S.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,N.prototype.create)}}class N{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},n=`${this.service}/${e}`,i=this.errors[e],s=i?i.replace(A,(e,t)=>{let n=r[t];return null!=n?String(n):`<${t}?>`}):"Error",o=`${this.serviceName}: ${s} (${n}).`,a=new S(n,o,r);return a}}let A=/\{\$([^}]+)}/g;function R(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function D(e){return null!==e&&"object"==typeof e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O(e){let t=[];for(let[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(e=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function L(e){let t={},r=e.replace(/^\?/,"").split("&");return r.forEach(e=>{if(e){let[r,n]=e.split("=");t[decodeURIComponent(r)]=decodeURIComponent(n)}}),t}function P(e){let t=e.indexOf("?");if(!t)return"";let r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function M(e,t){let r=new j(e,t);return r.subscribe.bind(r)}class j{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let n;if(void 0===e&&void 0===t&&void 0===r)throw Error("Missing Observer.");void 0===(n=!function(e,t){if("object"!=typeof e||null===e)return!1;for(let r of t)if(r in e&&"function"==typeof e[r])return!0;return!1}(e,["next","error","complete"])?{next:e,error:t,complete:r}:e).next&&(n.next=F),void 0===n.error&&(n.error=F),void 0===n.complete&&(n.complete=F);let i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch(e){}}),this.observers.push(n),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function F(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U(e){return e&&e._delegate?e._delegate:e}},4184:function(e,t){var r;/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var s=typeof r;if("string"===s||"number"===s)e.push(r);else if(Array.isArray(r)){if(r.length){var o=i.apply(null,r);o&&e.push(o)}}else if("object"===s){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var a in r)n.call(r,a)&&r[a]&&e.push(a)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0!==(r=(function(){return i}).apply(t,[]))&&(e.exports=r)}()},7008:function(e,t,r){"use strict";let n;r.d(t,{zx:function(){return q},lr:function(){return ee},$_:function(){return tB},wp:function(){return t5}});var i=r(5893),s=r(4184),o=r.n(s),a=r(7294),l=r.t(a,2),u={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},c=a.createContext&&a.createContext(u),h=function(){return(h=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},d=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};function f(e){return function(t){return a.createElement(g,h({attr:h({},e.attr)},t),function e(t){return t&&t.map(function(t,r){return a.createElement(t.tag,h({key:r},t.attr),e(t.child))})}(e.child))}}function g(e){var t=function(t){var r,n=e.attr,i=e.size,s=e.title,o=d(e,["attr","size","title"]),l=i||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),a.createElement("svg",h({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,o,{className:r,style:h(h({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&a.createElement("title",null,s),e.children)};return void 0!==c?a.createElement(c.Consumer,null,function(e){return t(e)}):t(u)}function p(e){return f({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"}}]})(e)}function m(e){return f({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"}}]})(e)}function y(e){return f({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"}}]})(e)}function b(e){return f({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"}}]})(e)}function v(e){return f({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"}}]})(e)}function w(e){return f({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"}}]})(e)}function x(e){return f({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"}}]})(e)}function k(e){return f({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"}}]})(e)}function E(e){return f({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}}]})(e)}function T(e){return null!==e&&"object"==typeof e&&e.constructor===Object}function I(e){if(!T(e))return e;let t={...e};return Object.keys(e).forEach(r=>{t[r]=I(e[r])}),t}function _(e,t){if(T(t)&&0===Object.keys(t).length)return I({...e,...t});let r={...e,...t};return T(t)&&T(e)&&Object.keys(t).forEach(n=>{T(t[n])&&n in e&&T(e[n])?r[n]=_(e[n],t[n]):r[n]=T(t[n])?I(t[n]):t[n]}),r}let C=(0,a.createContext)({theme:{accordion:{root:{base:"divide-y divide-gray-200 border-gray-200 dark:divide-gray-700 dark:border-gray-700",flush:{off:"rounded-lg border",on:"border-b"}},content:{base:"py-5 px-5 last:rounded-b-lg dark:bg-gray-900 first:rounded-t-lg"},title:{arrow:{base:"h-6 w-6 shrink-0",open:{off:"",on:"rotate-180"}},base:"flex w-full items-center justify-between first:rounded-t-lg last:rounded-b-lg py-5 px-5 text-left font-medium text-gray-500 dark:text-gray-400",flush:{off:"hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 dark:hover:bg-gray-800 dark:focus:ring-gray-800",on:"!bg-transparent dark:!bg-transparent"},heading:"",open:{off:"",on:"text-gray-900 bg-gray-100 dark:bg-gray-800 dark:text-white"}}},alert:{base:"flex flex-col gap-2 p-4 text-sm",borderAccent:"border-t-4",closeButton:{base:"-mx-1.5 -my-1.5 ml-auto inline-flex h-8 w-8 rounded-lg p-1.5 focus:ring-2",icon:"w-5 h-5",color:{info:"bg-blue-100 text-blue-500 hover:bg-blue-200 focus:ring-blue-400 dark:bg-blue-200 dark:text-blue-600 dark:hover:bg-blue-300",gray:"bg-gray-100 text-gray-500 hover:bg-gray-200 focus:ring-gray-400 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-800 dark:hover:text-white",failure:"bg-red-100 text-red-500 hover:bg-red-200 focus:ring-red-400 dark:bg-red-200 dark:text-red-600 dark:hover:bg-red-300",success:"bg-green-100 text-green-500 hover:bg-green-200 focus:ring-green-400 dark:bg-green-200 dark:text-green-600 dark:hover:bg-green-300",warning:"bg-yellow-100 text-yellow-500 hover:bg-yellow-200 focus:ring-yellow-400 dark:bg-yellow-200 dark:text-yellow-600 dark:hover:bg-yellow-300",red:"bg-red-100 text-red-500 hover:bg-red-200 focus:ring-red-400 dark:bg-red-200 dark:text-red-600 dark:hover:bg-red-300",green:"bg-green-100 text-green-500 hover:bg-green-200 focus:ring-green-400 dark:bg-green-200 dark:text-green-600 dark:hover:bg-green-300",yellow:"bg-yellow-100 text-yellow-500 hover:bg-yellow-200 focus:ring-yellow-400 dark:bg-yellow-200 dark:text-yellow-600 dark:hover:bg-yellow-300",blue:"bg-blue-100 text-blue-500 hover:bg-blue-200 focus:ring-blue-400 dark:bg-blue-200 dark:text-blue-600 dark:hover:bg-blue-300",cyan:"bg-cyan-100 text-cyan-500 hover:bg-cyan-200 focus:ring-cyan-400 dark:bg-cyan-200 dark:text-cyan-600 dark:hover:bg-cyan-300",pink:"bg-pink-100 text-pink-500 hover:bg-pink-200 focus:ring-pink-400 dark:bg-pink-200 dark:text-pink-600 dark:hover:bg-pink-300",lime:"bg-lime-100 text-lime-500 hover:bg-lime-200 focus:ring-lime-400 dark:bg-lime-200 dark:text-lime-600 dark:hover:bg-lime-300",dark:"bg-gray-100 text-gray-500 hover:bg-gray-200 focus:ring-gray-400 dark:bg-gray-200 dark:text-gray-600 dark:hover:bg-gray-300",indigo:"bg-indigo-100 text-indigo-500 hover:bg-indigo-200 focus:ring-indigo-400 dark:bg-indigo-200 dark:text-indigo-600 dark:hover:bg-indigo-300",purple:"bg-purple-100 text-purple-500 hover:bg-purple-200 focus:ring-purple-400 dark:bg-purple-200 dark:text-purple-600 dark:hover:bg-purple-300",teal:"bg-teal-100 text-teal-500 hover:bg-teal-200 focus:ring-teal-400 dark:bg-teal-200 dark:text-teal-600 dark:hover:bg-teal-300",light:"bg-gray-50 text-gray-500 hover:bg-gray-100 focus:ring-gray-200 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-700 dark:hover:text-white"}},color:{info:"text-blue-700 bg-blue-100 border-blue-500 dark:bg-blue-200 dark:text-blue-800",gray:"text-gray-700 bg-gray-100 border-gray-500 dark:bg-gray-700 dark:text-gray-300",failure:"text-red-700 bg-red-100 border-red-500 dark:bg-red-200 dark:text-red-800",success:"text-green-700 bg-green-100 border-green-500 dark:bg-green-200 dark:text-green-800",warning:"text-yellow-700 bg-yellow-100 border-yellow-500 dark:bg-yellow-200 dark:text-yellow-800",red:"text-red-700 bg-red-100 border-red-500 dark:bg-red-200 dark:text-red-800",green:"text-green-700 bg-green-100 border-green-500 dark:bg-green-200 dark:text-green-800",yellow:"text-yellow-700 bg-yellow-100 border-yellow-500 dark:bg-yellow-200 dark:text-yellow-800",blue:"text-blue-700 bg-blue-100 border-blue-500 dark:bg-blue-200 dark:text-blue-800",cyan:"text-cyan-700 bg-cyan-100 border-cyan-500 dark:bg-cyan-200 dark:text-cyan-800",pink:"text-pink-700 bg-pink-100 border-pink-500 dark:bg-pink-200 dark:text-pink-800",lime:"text-lime-700 bg-lime-100 border-lime-500 dark:bg-lime-200 dark:text-lime-800",dark:"text-gray-200 bg-gray-800 border-gray-600 dark:bg-gray-900 dark:text-gray-300",indigo:"text-indigo-700 bg-indigo-100 border-indigo-500 dark:bg-indigo-200 dark:text-indigo-800",purple:"text-purple-700 bg-purple-100 border-purple-500 dark:bg-purple-200 dark:text-purple-800",teal:"text-teal-700 bg-teal-100 border-teal-500 dark:bg-teal-200 dark:text-teal-800",light:"text-gray-600 bg-gray-50 border-gray-400 dark:bg-gray-500 dark:text-gray-200"},icon:"mr-3 inline h-5 w-5 flex-shrink-0",rounded:"rounded-lg",wrapper:"flex items-center"},avatar:{root:{base:"flex justify-center items-center space-x-4",bordered:"p-1 ring-2",rounded:"!rounded-full",color:{dark:"ring-gray-800 dark:ring-gray-800",failure:"ring-red-500 dark:ring-red-700",gray:"ring-gray-500 dark:ring-gray-400",info:"ring-blue-400 dark:ring-blue-800",light:"ring-gray-300 dark:ring-gray-500",purple:"ring-purple-500 dark:ring-purple-600",success:"ring-green-500 dark:ring-green-500",warning:"ring-yellow-300 dark:ring-yellow-500",pink:"ring-pink-500 dark:ring-pink-500"},img:{off:"rounded relative overflow-hidden bg-gray-100 dark:bg-gray-600",on:"rounded",placeholder:"absolute w-auto h-auto text-gray-400 -bottom-1"},size:{xs:"w-6 h-6",sm:"w-8 h-8",md:"w-10 h-10",lg:"w-20 h-20",xl:"w-36 h-36"},stacked:"ring-2 ring-gray-300 dark:ring-gray-500",statusPosition:{"bottom-left":"-bottom-1 -left-1","bottom-center":"-botton-1 center","bottom-right":"-bottom-1 -right-1","top-left":"-top-1 -left-1","top-center":"-top-1 center","top-right":"-top-1 -right-1","center-right":"center -right-1",center:"center center","center-left":"center -left-1"},status:{away:"bg-yellow-400",base:"absolute h-3.5 w-3.5 rounded-full border-2 border-white dark:border-gray-800",busy:"bg-red-400",offline:"bg-gray-400",online:"bg-green-400"},initials:{text:"font-medium text-gray-600 dark:text-gray-300",base:"inline-flex overflow-hidden relative justify-center items-center bg-gray-100 dark:bg-gray-600"}},group:{base:"flex -space-x-4"},groupCounter:{base:"relative flex items-center justify-center w-10 h-10 text-xs font-medium text-white bg-gray-700 rounded-full ring-2 ring-gray-300 hover:bg-gray-600 dark:ring-gray-500"}},badge:{root:{base:"flex h-fit items-center gap-1 font-semibold",color:{info:"bg-blue-100 text-blue-800 dark:bg-blue-200 dark:text-blue-800 group-hover:bg-blue-200 dark:group-hover:bg-blue-300",gray:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300 group-hover:bg-gray-200 dark:group-hover:bg-gray-600",failure:"bg-red-100 text-red-800 dark:bg-red-200 dark:text-red-900 group-hover:bg-red-200 dark:group-hover:bg-red-300",success:"bg-green-100 text-green-800 dark:bg-green-200 dark:text-green-900 group-hover:bg-green-200 dark:group-hover:bg-green-300",warning:"bg-yellow-100 text-yellow-800 dark:bg-yellow-200 dark:text-yellow-900 group-hover:bg-yellow-200 dark:group-hover:bg-yellow-300",indigo:"bg-indigo-100 text-indigo-800 dark:bg-indigo-200 dark:text-indigo-900 group-hover:bg-indigo-200 dark:group-hover:bg-indigo-300",purple:"bg-purple-100 text-purple-800 dark:bg-purple-200 dark:text-purple-900 group-hover:bg-purple-200 dark:group-hover:bg-purple-300",pink:"bg-pink-100 text-pink-800 dark:bg-pink-200 dark:text-pink-900 group-hover:bg-pink-200 dark:group-hover:bg-pink-300",blue:"bg-blue-100 text-blue-800 dark:bg-blue-200 dark:text-blue-900 group-hover:bg-blue-200 dark:group-hover:bg-blue-300",cyan:"bg-cyan-100 text-cyan-800 dark:bg-cyan-200 dark:text-cyan-900 group-hover:bg-cyan-200 dark:group-hover:bg-cyan-300",dark:"bg-gray-600 text-gray-100 dark:bg-gray-900 dark:text-gray-200 group-hover:bg-gray-500 dark:group-hover:bg-gray-700",light:"bg-gray-200 text-gray-800 dark:bg-gray-400 dark:text-gray-900 group-hover:bg-gray-300 dark:group-hover:bg-gray-500",green:"bg-green-100 text-green-800 dark:bg-green-200 dark:text-green-900 group-hover:bg-green-200 dark:group-hover:bg-green-300",lime:"bg-lime-100 text-lime-800 dark:bg-lime-200 dark:text-lime-900 group-hover:bg-lime-200 dark:group-hover:bg-lime-300",red:"bg-red-100 text-red-800 dark:bg-red-200 dark:text-red-900 group-hover:bg-red-200 dark:group-hover:bg-red-300",teal:"bg-teal-100 text-teal-800 dark:bg-teal-200 dark:text-teal-900 group-hover:bg-teal-200 dark:group-hover:bg-teal-300",yellow:"bg-yellow-100 text-yellow-800 dark:bg-yellow-200 dark:text-yellow-900 group-hover:bg-yellow-200 dark:group-hover:bg-yellow-300"},href:"group",size:{xs:"p-1 text-xs",sm:"p-1.5 text-sm"}},icon:{off:"rounded px-2 py-0.5",on:"rounded-full p-1.5",size:{xs:"w-3 h-3",sm:"w-3.5 h-3.5"}}},breadcrumb:{root:{base:"",list:"flex items-center"},item:{base:"group flex items-center",chevron:"mx-1 h-6 w-6 text-gray-400 group-first:hidden md:mx-2",href:{off:"flex items-center text-sm font-medium text-gray-500 dark:text-gray-400",on:"flex items-center text-sm font-medium text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white"},icon:"mr-2 h-4 w-4"}},button:{base:"group flex h-min items-center justify-center p-0.5 text-center font-medium focus:z-10",fullSized:"w-full",color:{dark:"text-white bg-gray-800 border border-transparent hover:bg-gray-900 focus:ring-4 focus:ring-gray-300 disabled:hover:bg-gray-800 dark:bg-gray-800 dark:hover:bg-gray-700 dark:focus:ring-gray-800 dark:border-gray-700 dark:disabled:hover:bg-gray-800",failure:"text-white bg-red-700 border border-transparent hover:bg-red-800 focus:ring-4 focus:ring-red-300 disabled:hover:bg-red-800 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900 dark:disabled:hover:bg-red-600",gray:"text-gray-900 bg-white border border-gray-200 hover:bg-gray-100 hover:text-blue-700 disabled:hover:bg-white focus:ring-blue-700 focus:text-blue-700 dark:bg-transparent dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700 focus:ring-2 dark:disabled:hover:bg-gray-800",info:"text-white bg-blue-700 border border-transparent hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 disabled:hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 dark:disabled:hover:bg-blue-600",light:"text-gray-900 bg-white border border-gray-300 hover:bg-gray-100 focus:ring-4 focus:ring-blue-300 disabled:hover:bg-white dark:bg-gray-600 dark:text-white dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-700 dark:focus:ring-gray-700",purple:"text-white bg-purple-700 border border-transparent hover:bg-purple-800 focus:ring-4 focus:ring-purple-300 disabled:hover:bg-purple-700 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-900 dark:disabled:hover:bg-purple-600",success:"text-white bg-green-700 border border-transparent hover:bg-green-800 focus:ring-4 focus:ring-green-300 disabled:hover:bg-green-700 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800 dark:disabled:hover:bg-green-600",warning:"text-white bg-yellow-400 border border-transparent hover:bg-yellow-500 focus:ring-4 focus:ring-yellow-300 disabled:hover:bg-yellow-400 dark:focus:ring-yellow-900 dark:disabled:hover:bg-yellow-400",blue:"text-blue-900 bg-white border border-blue-300 hover:bg-blue-100 focus:ring-4 focus:ring-blue-300 disabled:hover:bg-white dark:bg-blue-600 dark:text-white dark:border-blue-600 dark:hover:bg-blue-700 dark:hover:border-blue-700 dark:focus:ring-blue-700",cyan:"text-cyan-900 bg-white border border-cyan-300 hover:bg-cyan-100 focus:ring-4 focus:ring-cyan-300 disabled:hover:bg-white dark:bg-cyan-600 dark:text-white dark:border-cyan-600 dark:hover:bg-cyan-700 dark:hover:border-cyan-700 dark:focus:ring-cyan-700",green:"text-green-900 bg-white border border-green-300 hover:bg-green-100 focus:ring-4 focus:ring-green-300 disabled:hover:bg-white dark:bg-green-600 dark:text-white dark:border-green-600 dark:hover:bg-green-700 dark:hover:border-green-700 dark:focus:ring-green-700",indigo:"text-indigo-900 bg-white border border-indigo-300 hover:bg-indigo-100 focus:ring-4 focus:ring-indigo-300 disabled:hover:bg-white dark:bg-indigo-600 dark:text-white dark:border-indigo-600 dark:hover:bg-indigo-700 dark:hover:border-indigo-700 dark:focus:ring-indigo-700",lime:"text-lime-900 bg-white border border-lime-300 hover:bg-lime-100 focus:ring-4 focus:ring-lime-300 disabled:hover:bg-white dark:bg-lime-600 dark:text-white dark:border-lime-600 dark:hover:bg-lime-700 dark:hover:border-lime-700 dark:focus:ring-lime-700",pink:"text-pink-900 bg-white border border-pink-300 hover:bg-pink-100 focus:ring-4 focus:ring-pink-300 disabled:hover:bg-white dark:bg-pink-600 dark:text-white dark:border-pink-600 dark:hover:bg-pink-700 dark:hover:border-pink-700 dark:focus:ring-pink-700",red:"text-red-900 bg-white border border-red-300 hover:bg-red-100 focus:ring-4 focus:ring-red-300 disabled:hover:bg-white dark:bg-red-600 dark:text-white dark:border-red-600 dark:hover:bg-red-700 dark:hover:border-red-700 dark:focus:ring-red-700",teal:"text-teal-900 bg-white border border-teal-300 hover:bg-teal-100 focus:ring-4 focus:ring-teal-300 disabled:hover:bg-white dark:bg-teal-600 dark:text-white dark:border-teal-600 dark:hover:bg-teal-700 dark:hover:border-teal-700 dark:focus:ring-teal-700",yellow:"text-yellow-900 bg-white border border-yellow-300 hover:bg-yellow-100 focus:ring-4 focus:ring-yellow-300 disabled:hover:bg-white dark:bg-yellow-600 dark:text-white dark:border-yellow-600 dark:hover:bg-yellow-700 dark:hover:border-yellow-700 dark:focus:ring-yellow-700"},disabled:"cursor-not-allowed opacity-50",isProcessing:"!cursor-wait",spinnerSlot:"mr-3",gradient:{cyan:"text-white bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 hover:bg-gradient-to-br focus:ring-4 focus:ring-cyan-300 dark:focus:ring-cyan-800",failure:"text-white bg-gradient-to-r from-red-400 via-red-500 to-red-600 hover:bg-gradient-to-br focus:ring-4 focus:ring-red-300 dark:focus:ring-red-800",info:"text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-800 ",lime:"text-gray-900 bg-gradient-to-r from-lime-200 via-lime-400 to-lime-500 hover:bg-gradient-to-br focus:ring-4 focus:ring-lime-300 dark:focus:ring-lime-800",pink:"text-white bg-gradient-to-r from-pink-400 via-pink-500 to-pink-600 hover:bg-gradient-to-br focus:ring-4 focus:ring-pink-300 dark:focus:ring-pink-800",purple:"text-white bg-gradient-to-r from-purple-500 via-purple-600 to-purple-700 hover:bg-gradient-to-br focus:ring-4 focus:ring-purple-300 dark:focus:ring-purple-800",success:"text-white bg-gradient-to-r from-green-400 via-green-500 to-green-600 hover:bg-gradient-to-br focus:ring-4 focus:ring-green-300 dark:focus:ring-green-800",teal:"text-white bg-gradient-to-r from-teal-400 via-teal-500 to-teal-600 hover:bg-gradient-to-br focus:ring-4 focus:ring-teal-300 dark:focus:ring-teal-800"},gradientDuoTone:{cyanToBlue:"text-white bg-gradient-to-r from-cyan-500 to-blue-500 hover:bg-gradient-to-bl focus:ring-4 focus:ring-cyan-300 dark:focus:ring-cyan-800",greenToBlue:"text-white bg-gradient-to-br from-green-400 to-blue-600 hover:bg-gradient-to-bl focus:ring-4 focus:ring-green-200 dark:focus:ring-green-800",pinkToOrange:"text-white bg-gradient-to-br from-pink-500 to-orange-400 hover:bg-gradient-to-bl focus:ring-4 focus:ring-pink-200 dark:focus:ring-pink-800",purpleToBlue:"text-white bg-gradient-to-br from-purple-600 to-blue-500 hover:bg-gradient-to-bl focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-800",purpleToPink:"text-white bg-gradient-to-r from-purple-500 to-pink-500 hover:bg-gradient-to-l focus:ring-4 focus:ring-purple-200 dark:focus:ring-purple-800",redToYellow:"text-gray-900 bg-gradient-to-r from-red-200 via-red-300 to-yellow-200 hover:bg-gradient-to-bl focus:ring-4 focus:ring-red-100 dark:focus:ring-red-400",tealToLime:"text-gray-900 bg-gradient-to-r from-teal-200 to-lime-200 hover:bg-gradient-to-l hover:from-teal-200 hover:to-lime-200 hover:!text-gray-900 focus:ring-4 focus:ring-lime-200 dark:focus:ring-teal-700"},inner:{base:"flex items-center",position:{none:"",start:"rounded-r-none",middle:"!rounded-none",end:"rounded-l-none"},outline:"border border-transparent"},label:"ml-2 inline-flex h-4 w-4 items-center justify-center rounded-full bg-blue-200 text-xs font-semibold text-blue-800",outline:{color:{gray:"border border-gray-900 dark:border-white",default:"border-0",light:""},off:"",on:"flex justify-center bg-white text-gray-900 transition-all duration-75 ease-in group-hover:bg-opacity-0 group-hover:text-inherit dark:bg-gray-900 dark:text-white w-full",pill:{off:"rounded-md",on:"rounded-full"}},pill:{off:"rounded-lg",on:"rounded-full"},size:{xs:"text-xs px-2 py-1",sm:"text-sm px-3 py-1.5",md:"text-sm px-4 py-2",lg:"text-base px-5 py-2.5",xl:"text-base px-6 py-3"}},buttonGroup:{base:"inline-flex",position:{none:"focus:!ring-2",start:"rounded-r-none",middle:"!rounded-none border-l-0 pl-0",end:"rounded-l-none border-l-0 pl-0"}},card:{root:{base:"flex rounded-lg border border-gray-200 bg-white shadow-md dark:border-gray-700 dark:bg-gray-800",children:"flex h-full flex-col justify-center gap-4 p-6",horizontal:{off:"flex-col",on:"flex-col md:max-w-xl md:flex-row"},href:"hover:bg-gray-100 dark:hover:bg-gray-700"},img:{base:"",horizontal:{off:"rounded-t-lg",on:"h-96 w-full rounded-t-lg object-cover md:h-auto md:w-48 md:rounded-none md:rounded-l-lg"}}},carousel:{root:{base:"relative h-full w-full",leftControl:"absolute top-0 left-0 flex h-full items-center justify-center px-4 focus:outline-none",rightControl:"absolute top-0 right-0 flex h-full items-center justify-center px-4 focus:outline-none"},indicators:{active:{off:"bg-white/50 hover:bg-white dark:bg-gray-800/50 dark:hover:bg-gray-800",on:"bg-white dark:bg-gray-800"},base:"h-3 w-3 rounded-full",wrapper:"absolute bottom-5 left-1/2 flex -translate-x-1/2 space-x-3"},item:{base:"absolute top-1/2 left-1/2 block w-full -translate-x-1/2 -translate-y-1/2",wrapper:"w-full flex-shrink-0 transform cursor-grab snap-center"},control:{base:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-white/30 group-hover:bg-white/50 group-focus:outline-none group-focus:ring-4 group-focus:ring-white dark:bg-gray-800/30 dark:group-hover:bg-gray-800/60 dark:group-focus:ring-gray-800/70 sm:h-10 sm:w-10",icon:"h-5 w-5 text-white dark:text-gray-800 sm:h-6 sm:w-6"},scrollContainer:{base:"flex h-full snap-mandatory overflow-y-hidden overflow-x-scroll scroll-smooth rounded-lg",snap:"snap-x"}},checkbox:{root:{base:"h-4 w-4 rounded border border-gray-300 bg-gray-100 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:ring-offset-gray-800 dark:focus:ring-blue-600"}},darkThemeToggle:{root:{base:"rounded-lg p-2.5 text-sm text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-700",icon:"h-5 w-5"}},dropdown:{arrowIcon:"ml-2 h-4 w-4",content:"py-1",floating:{animation:"transition-opacity",arrow:{base:"absolute z-10 h-2 w-2 rotate-45",style:{dark:"bg-gray-900 dark:bg-gray-700",light:"bg-white",auto:"bg-white dark:bg-gray-700"},placement:"-4px"},base:"z-10 w-fit rounded divide-y divide-gray-100 shadow",content:"py-1 text-sm text-gray-700 dark:text-gray-200",divider:"my-1 h-px bg-gray-100 dark:bg-gray-600",header:"block py-2 px-4 text-sm text-gray-700 dark:text-gray-200",hidden:"invisible opacity-0",item:{base:"flex items-center justify-start py-2 px-4 text-sm text-gray-700 cursor-pointer hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-600 dark:hover:text-white",icon:"mr-2 h-4 w-4"},style:{dark:"bg-gray-900 text-white dark:bg-gray-700",light:"border border-gray-200 bg-white text-gray-900",auto:"border border-gray-200 bg-white text-gray-900 dark:border-none dark:bg-gray-700 dark:text-white"},target:"w-fit"},inlineWrapper:"flex items-center"},fileInput:{root:{base:"flex"},field:{base:"relative w-full",input:{base:"rounded-lg overflow-hidden block w-full border disabled:cursor-not-allowed disabled:opacity-50",sizes:{sm:"sm:text-xs",md:"text-sm",lg:"sm:text-md"},colors:{gray:"bg-gray-50 border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",info:"border-blue-500 bg-blue-50 text-blue-900 placeholder-blue-700 focus:border-blue-500 focus:ring-blue-500 dark:border-blue-400 dark:bg-blue-100 dark:focus:border-blue-500 dark:focus:ring-blue-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"}}}},footer:{root:{base:"w-full rounded-lg bg-white shadow dark:bg-gray-800 md:flex md:items-center md:justify-between",container:"w-full p-6",bgDark:"bg-gray-800"},groupLink:{base:"flex flex-wrap text-sm text-gray-500 dark:text-white",link:{base:"last:mr-0 md:mr-6",href:"hover:underline"},col:"flex-col space-y-4"},icon:{base:"text-gray-500 dark:hover:text-white",size:"h-5 w-5"},title:{base:"mb-6 text-sm font-semibold uppercase text-gray-500 dark:text-white"},divider:{base:"w-full my-6 border-gray-200 sm:mx-auto dark:border-gray-700 lg:my-8"},copyright:{base:"text-sm text-gray-500 dark:text-gray-400 sm:text-center",href:"ml-1 hover:underline",span:"ml-1"},brand:{base:"mb-4 flex items-center sm:mb-0",img:"mr-3 h-8",span:"self-center whitespace-nowrap text-2xl font-semibold text-gray-800 dark:text-white"}},helperText:{root:{base:"mt-2 text-sm",colors:{gray:"text-gray-500 dark:text-gray-400",info:"text-blue-700 dark:text-blue-800",success:"text-green-600 dark:text-green-500",failure:"text-red-600 dark:text-red-500",warning:"text-yellow-500 dark:text-yellow-600"}}},label:{root:{base:"text-sm font-medium",disabled:"opacity-50",colors:{default:"text-gray-900 dark:text-gray-300",info:"text-blue-500 dark:text-blue-600",failure:"text-red-700 dark:text-red-500",warning:"text-yellow-500 dark:text-yellow-600",success:"text-green-700 dark:text-green-500"}}},listGroup:{root:{base:"list-none rounded-lg border border-gray-200 bg-white text-sm font-medium text-gray-900 dark:border-gray-600 dark:bg-gray-700 dark:text-white text-left"},item:{base:"[&>*]:first:rounded-t-lg [&>*]:last:rounded-b-lg [&>*]:last:border-b-0",link:{base:"flex w-full border-b border-gray-200 py-2 px-4 dark:border-gray-600",active:{off:"hover:bg-gray-100 hover:text-blue-700 focus:text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-700 dark:border-gray-600 dark:hover:bg-gray-600 dark:hover:text-white dark:focus:text-white dark:focus:ring-gray-500",on:"bg-blue-700 text-white dark:bg-gray-800"},href:{off:"",on:""},icon:"mr-2 h-4 w-4 fill-current"}}},modal:{root:{base:"fixed top-0 right-0 left-0 z-50 h-modal overflow-y-auto overflow-x-hidden md:inset-0 md:h-full",show:{on:"flex bg-gray-900 bg-opacity-50 dark:bg-opacity-80",off:"hidden"},sizes:{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl","5xl":"max-w-5xl","6xl":"max-w-6xl","7xl":"max-w-7xl"},positions:{"top-left":"items-start justify-start","top-center":"items-start justify-center","top-right":"items-start justify-end","center-left":"items-center justify-start",center:"items-center justify-center","center-right":"items-center justify-end","bottom-right":"items-end justify-end","bottom-center":"items-end justify-center","bottom-left":"items-end justify-start"}},content:{base:"relative h-full w-full m-auto p-4 md:h-auto",inner:"relative rounded-lg bg-white shadow dark:bg-gray-700"},body:{base:"p-6",popup:"pt-0"},header:{base:"flex items-start justify-between rounded-t dark:border-gray-600 border-b p-5",popup:"!p-2 !border-b-0",title:"text-xl font-medium text-gray-900 dark:text-white",close:{base:"ml-auto inline-flex items-center rounded-lg bg-transparent p-1.5 text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900 dark:hover:bg-gray-600 dark:hover:text-white",icon:"h-5 w-5"}},footer:{base:"flex items-center space-x-2 rounded-b border-gray-200 p-6 dark:border-gray-600",popup:"border-t"}},navbar:{root:{base:"border-gray-200 bg-white px-2 py-2.5 dark:border-gray-700 dark:bg-gray-800 sm:px-4",rounded:{on:"rounded",off:""},bordered:{on:"border",off:""},inner:{base:"mx-auto flex flex-wrap items-center justify-between",fluid:{on:"",off:"container"}}},brand:{base:"flex items-center"},collapse:{base:"w-full md:block md:w-auto",list:"mt-4 flex flex-col md:mt-0 md:flex-row md:space-x-8 md:text-sm md:font-medium",hidden:{on:"hidden",off:""}},link:{base:"block py-2 pr-4 pl-3 md:p-0",active:{on:"bg-blue-700 text-white dark:text-white md:bg-transparent md:text-blue-700",off:"border-b border-gray-100  text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white md:border-0 md:hover:bg-transparent md:hover:text-blue-700 md:dark:hover:bg-transparent md:dark:hover:text-white"},disabled:{on:"text-gray-400 hover:cursor-not-allowed dark:text-gray-600",off:""}},toggle:{base:"inline-flex items-center rounded-lg p-2 text-sm text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600 md:hidden",icon:"h-6 w-6 shrink-0"}},pagination:{base:"",layout:{table:{base:"text-sm text-gray-700 dark:text-gray-400",span:"font-semibold text-gray-900 dark:text-white"}},pages:{base:"xs:mt-0 mt-2 inline-flex items-center -space-x-px",showIcon:"inline-flex",previous:{base:"ml-0 rounded-l-lg border border-gray-300 bg-white py-2 px-3 leading-tight text-gray-500 hover:bg-gray-100 hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",icon:"h-5 w-5"},next:{base:"rounded-r-lg border border-gray-300 bg-white py-2 px-3 leading-tight text-gray-500 hover:bg-gray-100 hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",icon:"h-5 w-5"},selector:{base:"w-12 border border-gray-300 bg-white py-2 leading-tight text-gray-500 hover:bg-gray-100 hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",active:"bg-blue-50 text-blue-600 hover:bg-blue-100 hover:text-blue-700 dark:border-gray-700 dark:bg-gray-700 dark:text-white"}}},progress:{base:"w-full overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700",label:"mb-1 flex justify-between font-medium dark:text-white",bar:"rounded-full text-center font-medium leading-none text-blue-300 dark:text-blue-100 space-x-2",color:{dark:"bg-gray-600 dark:bg-gray-300",blue:"bg-blue-600",red:"bg-red-600 dark:bg-red-500",green:"bg-green-600 dark:bg-green-500",yellow:"bg-yellow-400",indigo:"bg-indigo-600 dark:bg-indigo-500",purple:"bg-purple-600 dark:bg-purple-500"},size:{sm:"h-1.5",md:"h-2.5",lg:"h-4",xl:"h-6"}},radio:{root:{base:"h-4 w-4 border border-gray-300 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:focus:bg-blue-600 dark:focus:ring-blue-600"}},rangeSlider:{root:{base:"flex"},field:{base:"relative w-full",input:{base:"w-full bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700",sizes:{sm:"h-1 range-sm",md:"h-2",lg:"h-3 range-lg"}}}},rating:{root:{base:"flex items-center"},advanced:{base:"flex items-center",label:"text-sm font-medium text-blue-600 dark:text-blue-500",progress:{base:"mx-4 h-5 w-2/4 rounded bg-gray-200 dark:bg-gray-700",fill:"h-5 rounded bg-yellow-400",label:"text-sm font-medium text-blue-600 dark:text-blue-500"}},star:{empty:"text-gray-300 dark:text-gray-500",filled:"text-yellow-400",sizes:{sm:"w-5 h-5",md:"w-7 h-7",lg:"w-10 h-10"}}},select:{base:"flex",addon:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-200 px-3 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400",field:{base:"relative w-full",icon:{base:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},select:{base:"block w-full border disabled:cursor-not-allowed disabled:opacity-50",withIcon:{on:"pl-10",off:""},withAddon:{on:"rounded-r-lg",off:"rounded-lg"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""},sizes:{sm:"p-2 sm:text-xs",md:"p-2.5 text-sm",lg:"sm:text-md p-4"},colors:{gray:"bg-gray-50 border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",info:"border-blue-500 bg-blue-50 text-blue-900 placeholder-blue-700 focus:border-blue-500 focus:ring-blue-500 dark:border-blue-400 dark:bg-blue-100 dark:focus:border-blue-500 dark:focus:ring-blue-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"}}}},textInput:{base:"flex",addon:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-200 px-3 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400",field:{base:"relative w-full",icon:{base:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},rightIcon:{base:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},input:{base:"block w-full border disabled:cursor-not-allowed disabled:opacity-50",sizes:{sm:"p-2 sm:text-xs",md:"p-2.5 text-sm",lg:"sm:text-md p-4"},colors:{gray:"bg-gray-50 border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",info:"border-blue-500 bg-blue-50 text-blue-900 placeholder-blue-700 focus:border-blue-500 focus:ring-blue-500 dark:border-blue-400 dark:bg-blue-100 dark:focus:border-blue-500 dark:focus:ring-blue-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"},withRightIcon:{on:"pr-10",off:""},withIcon:{on:"pl-10",off:""},withAddon:{on:"rounded-r-lg",off:"rounded-lg"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""}}}},textarea:{base:"block w-full rounded-lg border disabled:cursor-not-allowed disabled:opacity-50",colors:{gray:"bg-gray-50 border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",info:"border-blue-500 bg-blue-50 text-blue-900 placeholder-blue-700 focus:border-blue-500 focus:ring-blue-500 dark:border-blue-400 dark:bg-blue-100 dark:focus:border-blue-500 dark:focus:ring-blue-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""}},toggleSwitch:{root:{base:"group relative flex items-center rounded-lg focus:outline-none",active:{on:"cursor-pointer",off:"cursor-not-allowed opacity-50"},label:"ml-3 text-sm font-medium text-gray-900 dark:text-gray-300"},toggle:{base:"toggle-bg h-6 w-11 rounded-full border group-focus:ring-4 group-focus:ring-blue-500/25",checked:{on:"after:translate-x-full after:border-white",off:"border-gray-200 bg-gray-200 dark:border-gray-600 dark:bg-gray-700",color:{blue:" bg-blue-700 border-blue-700",dark:"bg-dark-700 border-dark-900",failure:"bg-red-700 border-red-900",gray:"bg-gray-500 border-gray-600",green:"bg-green-600 border-green-700",light:"bg-light-700 border-light-900",red:"bg-red-700 border-red-900",purple:"bg-purple-700 border-purple-900",success:"bg-green-500 border-green-500",yellow:"bg-yellow-400 border-yellow-400",warning:"bg-yellow-600 border-yellow-600",cyan:"bg-cyan-500 border-cyan-500",lime:"bg-lime-400 border-lime-400",indigo:"bg-indigo-400 border-indigo-400",teal:"bg-gradient-to-r from-teal-400 via-teal-500 to-teal-600 hover:bg-gradient-to-br focus:ring-4",info:"bg-blue-600 border-blue-600",pink:"bg-pink-600 border-pink-600"}}}},sidebar:{root:{base:"h-full",collapsed:{on:"w-16",off:"w-64"},inner:"h-full overflow-y-auto overflow-x-hidden rounded bg-white py-4 px-3 dark:bg-gray-800"},collapse:{button:"group flex w-full items-center rounded-lg p-2 text-base font-normal text-gray-900 transition duration-75 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700",icon:{base:"h-6 w-6 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white",open:{off:"",on:"text-gray-900"}},label:{base:"ml-3 flex-1 whitespace-nowrap text-left",icon:"h-6 w-6"},list:"space-y-2 py-2"},cta:{base:"mt-6 rounded-lg p-4",color:{blue:"bg-blue-50 dark:bg-blue-900",dark:"bg-dark-50 dark:bg-dark-900",failure:"bg-red-50 dark:bg-red-900",gray:"bg-alternative-50 dark:bg-alternative-900",green:"bg-green-50 dark:bg-green-900",light:"bg-light-50 dark:bg-light-900",red:"bg-red-50 dark:bg-red-900",purple:"bg-purple-50 dark:bg-purple-900",success:"bg-green-50 dark:bg-green-900",yellow:"bg-yellow-50 dark:bg-yellow-900",warning:"bg-yellow-50 dark:bg-yellow-900"}},item:{base:"flex items-center justify-center rounded-lg p-2 text-base font-normal text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700",active:"bg-gray-100 dark:bg-gray-700",collapsed:{insideCollapse:"group w-full pl-8 transition duration-75",noIcon:"font-bold"},content:{base:"px-3 flex-1 whitespace-nowrap"},icon:{base:"h-6 w-6 flex-shrink-0 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white",active:"text-gray-700 dark:text-gray-100"},label:""},items:"",itemGroup:"mt-4 space-y-2 border-t border-gray-200 pt-4 first:mt-0 first:border-t-0 first:pt-0 dark:border-gray-700",logo:{base:"mb-5 flex items-center pl-2.5",collapsed:{on:"hidden",off:"self-center whitespace-nowrap text-xl font-semibold dark:text-white"},img:"mr-3 h-6 sm:h-7"}},spinner:{base:"inline animate-spin text-gray-200",color:{failure:"fill-red-600",gray:"fill-gray-600",info:"fill-blue-600",pink:"fill-pink-600",purple:"fill-purple-600",success:"fill-green-500",warning:"fill-yellow-400"},light:{off:{base:"dark:text-gray-600",color:{failure:"",gray:"dark:fill-gray-300",info:"",pink:"",purple:"",success:"",warning:""}},on:{base:"",color:{failure:"",gray:"",info:"",pink:"",purple:"",success:"",warning:""}}},size:{xs:"w-3 h-3",sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-10 h-10"}},tab:{base:"flex flex-col gap-2",tablist:{base:"flex text-center",styles:{default:"flex-wrap border-b border-gray-200 dark:border-gray-700",underline:"flex-wrap -mb-px border-b border-gray-200 dark:border-gray-700",pills:"flex-wrap font-medium text-sm text-gray-500 dark:text-gray-400",fullWidth:"hidden text-sm font-medium rounded-lg divide-x divide-gray-200 shadow sm:flex dark:divide-gray-700 dark:text-gray-400"},tabitem:{base:"flex items-center justify-center p-4 text-sm font-medium first:ml-0 disabled:cursor-not-allowed disabled:text-gray-400 disabled:dark:text-gray-500",styles:{default:{base:"rounded-t-lg",active:{on:"bg-gray-100 text-blue-600 dark:bg-gray-800 dark:text-blue-500",off:"text-gray-500 hover:bg-gray-50 hover:text-gray-600 dark:text-gray-400 dark:hover:bg-gray-800  dark:hover:text-gray-300"}},underline:{base:"rounded-t-lg",active:{on:"text-blue-600 rounded-t-lg border-b-2 border-blue-600 active dark:text-blue-500 dark:border-blue-500",off:"border-b-2 border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300"}},pills:{base:"",active:{on:"rounded-lg bg-blue-600 text-white",off:"rounded-lg hover:text-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 dark:hover:text-white"}},fullWidth:{base:"ml-2 first:ml-0 w-full first:rounded-l-lg last:rounded-r-lg",active:{on:"inline-block p-4 w-full text-gray-900 bg-gray-100 focus:ring-4 focus:ring-blue-300 active focus:outline-none dark:bg-gray-700 dark:text-white",off:"bg-white hover:text-gray-700 hover:bg-gray-50 focus:ring-4 focus:ring-blue-300 focus:outline-none dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700"}}},icon:"mr-2 h-5 w-5"}},tabpanel:"p-4"},table:{root:{base:"w-full text-left text-sm text-gray-500 dark:text-gray-400",shadow:"absolute bg-white dark:bg-black w-full h-full top-0 left-0 rounded-lg drop-shadow-md -z-10",wrapper:"relative"},body:{base:"group/body",cell:{base:"group-first/body:group-first/row:first:rounded-tl-lg group-first/body:group-first/row:last:rounded-tr-lg group-last/body:group-last/row:first:rounded-bl-lg group-last/body:group-last/row:last:rounded-br-lg px-6 py-4"}},head:{base:"group/head text-xs uppercase text-gray-700 dark:text-gray-400",cell:{base:"group-first/head:first:rounded-tl-lg group-first/head:last:rounded-tr-lg bg-gray-50 dark:bg-gray-700 px-6 py-3"}},row:{base:"group/row",hovered:"hover:bg-gray-50 dark:hover:bg-gray-600",striped:"odd:bg-white even:bg-gray-50 odd:dark:bg-gray-800 even:dark:bg-gray-700"}},timeline:{root:{direction:{horizontal:"items-base sm:flex",vertical:"relative border-l border-gray-200 dark:border-gray-700"}},item:{root:{horizontal:"relative mb-6 sm:mb-0",vertical:"mb-10 ml-6"},content:{root:{base:"mt-3 sm:pr-8"},body:"mb-4 text-base font-normal text-gray-500 dark:text-gray-400",time:"mb-1 text-sm font-normal leading-none text-gray-400 dark:text-gray-500",title:"text-lg font-semibold text-gray-900 dark:text-white"},point:{horizontal:"flex items-center",line:"hidden h-0.5 w-full bg-gray-200 dark:bg-gray-700 sm:flex",marker:{base:{horizontal:"absolute -left-1.5 h-3 w-3 rounded-full border border-white bg-gray-200 dark:border-gray-900 dark:bg-gray-700",vertical:"absolute -left-1.5 mt-1.5 h-3 w-3 rounded-full border border-white bg-gray-200 dark:border-gray-900 dark:bg-gray-700"},icon:{base:"h-3 w-3 text-blue-600 dark:text-blue-300",wrapper:"absolute -left-3 flex h-6 w-6 items-center justify-center rounded-full bg-blue-200 ring-8 ring-white dark:bg-blue-900 dark:ring-gray-900"}},vertical:""}}},toast:{root:{base:"flex w-full max-w-xs items-center rounded-lg bg-white p-4 text-gray-500 shadow dark:bg-gray-800 dark:text-gray-400",closed:"opacity-0 ease-out",removed:"hidden"},toggle:{base:"-mx-1.5 -my-1.5 ml-auto inline-flex h-8 w-8 rounded-lg bg-white p-1.5 text-gray-400 hover:bg-gray-100 hover:text-gray-900 focus:ring-2 focus:ring-gray-300 dark:bg-gray-800 dark:text-gray-500 dark:hover:bg-gray-700 dark:hover:text-white",icon:"h-5 w-5 shrink-0"}},tooltip:{target:"w-fit",animation:"transition-opacity",arrow:{base:"absolute z-10 h-2 w-2 rotate-45",style:{dark:"bg-gray-900 dark:bg-gray-700",light:"bg-white",auto:"bg-white dark:bg-gray-700"},placement:"-4px"},base:"absolute inline-block z-10 rounded-lg py-2 px-3 text-sm font-medium shadow-sm",hidden:"invisible opacity-0",style:{dark:"bg-gray-900 text-white dark:bg-gray-700",light:"border border-gray-200 bg-white text-gray-900",auto:"border border-gray-200 bg-white text-gray-900 dark:border-none dark:bg-gray-700 dark:text-white"},content:"relative z-20"}}});function S(){return(0,a.useContext)(C)}let N=(0,a.createContext)(void 0);function A(){let e=(0,a.useContext)(N);if(!e)throw Error("useAccordionContext should be used within the AccordionPanelContext provider!");return e}let R=({children:e,className:t,theme:r={},...n})=>{let{isOpen:s}=A(),a=_(S().theme.accordion.content,r);return(0,i.jsx)("div",{className:o()(a.base,t),"data-testid":"flowbite-accordion-content",hidden:!s,...n,children:e})},D=({children:e,...t})=>{let{alwaysOpen:r}=t,[n,s]=(0,a.useState)(t.isOpen),o=r?{...t,isOpen:n,setOpen:()=>s(!n)}:t;return(0,i.jsx)(N.Provider,{value:o,children:e})},O=({as:e="h2",children:t,className:r,theme:n={},...s})=>{let{arrowIcon:a,flush:l,isOpen:u,setOpen:c}=A(),h=()=>void 0!==c&&c(),d=_(S().theme.accordion.title,n);return(0,i.jsxs)("button",{className:o()(d.base,d.flush[l?"on":"off"],d.open[u?"on":"off"],r),onClick:h,type:"button",...s,children:[(0,i.jsx)(e,{className:d.heading,"data-testid":"flowbite-accordion-heading",children:t}),a&&(0,i.jsx)(a,{"aria-hidden":!0,className:o()(d.arrow.base,d.arrow.open[u?"on":"off"]),"data-testid":"flowbite-accordion-arrow"})]})},L=({alwaysOpen:e=!1,arrowIcon:t=p,children:r,flush:n=!1,collapseAll:s=!1,className:l,theme:u={},...c})=>{let[h,d]=(0,a.useState)(s?-1:0),f=(0,a.useMemo)(()=>a.Children.map(r,(r,i)=>(0,a.cloneElement)(r,{alwaysOpen:e,arrowIcon:t,flush:n,isOpen:h===i,setOpen:()=>d(h===i?-1:i)})),[e,t,r,n,h]),g=_(S().theme.accordion.root,u);return(0,i.jsx)("div",{className:o()(g.base,g.flush[n?"on":"off"],l),"data-testid":"flowbite-accordion",...c,children:f})};L.displayName="Accordion",D.displayName="Accordion.Panel",O.displayName="Accordion.Title",R.displayName="Accordion.Content",Object.assign(L,{Panel:D,Title:O,Content:R});let P=({children:e,className:t,theme:r={},...n})=>{let s=_(S().theme.avatar.group,r);return(0,i.jsx)("div",{"data-testid":"avatar-group-element",className:o()(s.base,t),...n,children:e})};P.displayName="Avatar.Group";let M=({className:e,href:t,theme:r={},total:n,...s})=>{let a=_(S().theme.avatar.groupCounter,r);return(0,i.jsxs)("a",{href:t,className:o()(a.base,e),...s,children:["+",n]})};M.displayName="Avatar.GroupCounter";let j=({alt:e="",bordered:t=!1,children:r,className:n,color:s="light",img:a,placeholderInitials:l="",rounded:u=!1,size:c="md",stacked:h=!1,status:d,statusPosition:f="top-left",theme:g={},...p})=>{let m=_(S().theme.avatar,g),y=o()(t&&m.root.bordered,t&&m.root.color[s],u&&m.root.rounded,h&&m.root.stacked,m.root.img.on,m.root.size[c]),b={alt:e,className:o()(y,m.root.img.on),"data-testid":"flowbite-avatar-img"};return(0,i.jsxs)("div",{className:o()(m.root.base,n),"data-testid":"flowbite-avatar",...p,children:[(0,i.jsxs)("div",{className:"relative",children:[a?"string"==typeof a?(0,i.jsx)("img",{...b,src:a}):a(b):l?(0,i.jsx)("div",{className:o()(m.root.img.off,m.root.initials.base,u&&m.root.rounded,h&&m.root.stacked,t&&m.root.bordered,t&&m.root.color[s],m.root.size[c]),"data-testid":"flowbite-avatar-initials-placeholder",children:(0,i.jsx)("span",{className:o()(m.root.initials.text),"data-testid":"flowbite-avatar-initials-placeholder-text",children:l})}):(0,i.jsx)("div",{className:o()(y,m.root.img.off),"data-testid":"flowbite-avatar-img",children:(0,i.jsx)("svg",{className:m.root.img.placeholder,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),d&&(0,i.jsx)("span",{"data-testid":"flowbite-avatar-status",className:o()(m.root.status.base,m.root.status[d],m.root.statusPosition[f])})]}),r&&(0,i.jsx)("div",{children:r})]})};j.displayName="Avatar",Object.assign(j,{Group:P,Counter:M});let F=({children:e,color:t="info",href:r,icon:n,size:s="xs",className:a,theme:l={},...u})=>{let c=_(S().theme.badge,l),h=()=>(0,i.jsxs)("span",{className:o()(c.root.base,c.root.color[t],c.icon[n?"on":"off"],c.root.size[s],a),"data-testid":"flowbite-badge",...u,children:[n&&(0,i.jsx)(n,{"aria-hidden":!0,className:c.icon.size[s],"data-testid":"flowbite-badge-icon"}),e&&(0,i.jsx)("span",{children:e})]});return r?(0,i.jsx)("a",{className:c.root.href,href:r,children:(0,i.jsx)(h,{})}):(0,i.jsx)(h,{})},U=(0,a.forwardRef)(({children:e,className:t,href:r,icon:n,theme:s={},...a},l)=>{let u=void 0!==r,c=_(S().theme.breadcrumb.item,s);return(0,i.jsxs)("li",{className:o()(c.base,t),...a,children:[(0,i.jsx)(k,{"aria-hidden":!0,className:c.chevron,"data-testid":"flowbite-breadcrumb-separator"}),(0,i.jsxs)(u?"a":"span",{ref:l,className:c.href[u?"on":"off"],"data-testid":"flowbite-breadcrumb-item",href:r,children:[n&&(0,i.jsx)(n,{"aria-hidden":!0,className:c.icon}),e]})]})});U.displayName="Breadcrumb.Item";let V=({children:e,className:t,theme:r={},...n})=>{let s=_(S().theme.breadcrumb.root,r);return(0,i.jsx)("nav",{"aria-label":"Breadcrumb",className:o()(s.base,t),...n,children:(0,i.jsx)("ol",{className:s.list,children:e})})};V.displayName="Breadcrumb",Object.assign(V,{Item:U});let B=({className:e,color:t="info",light:r,size:n="md",theme:s={},...a})=>{let l=_(S().theme.spinner,s);return(0,i.jsx)("span",{role:"status",...a,children:(0,i.jsxs)("svg",{fill:"none",viewBox:"0 0 100 101",className:o()(l.base,l.color[t],l.light[r?"on":"off"].base,l.light[r?"on":"off"].color[t],l.size[n],e),children:[(0,i.jsx)("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),(0,i.jsx)("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]})})},z=({children:e,className:t,outline:r,pill:n,theme:s={},...l})=>{let u=(0,a.useMemo)(()=>a.Children.map(e,(t,i)=>(0,a.cloneElement)(t,{outline:r,pill:n,positionInGroup:0===i?"start":i===e.length-1?"end":"middle"})),[e,r,n]),c=_(S().theme.buttonGroup,s);return(0,i.jsx)("div",{className:o()(c.base,t),role:"group",...l,children:u})};z.displayName="Button.Group";let $=(0,a.forwardRef)(({children:e,className:t,color:r="info",disabled:n=!1,fullSized:s,isProcessing:a=!1,processingLabel:l="Loading...",processingSpinner:u=(0,i.jsx)(B,{}),gradientDuoTone:c,gradientMonochrome:h,href:d,label:f,outline:g=!1,pill:p=!1,positionInGroup:m="none",size:y="md",theme:b={},...v},w)=>{let{buttonGroup:x,button:k}=_(S().theme,b),E=void 0!==d;return(0,i.jsx)(E?"a":"button",{disabled:n,href:d,type:E?void 0:"button",ref:w,className:o()(n&&k.disabled,!c&&!h&&k.color[r],c&&!h&&k.gradientDuoTone[c],!c&&h&&k.gradient[h],x.position[m],g&&(k.outline.color[r]??k.outline.color.default),k.base,k.pill[p?"on":"off"],s&&k.fullSized,t),...v,children:(0,i.jsx)("span",{className:o()(k.inner.base,k.inner.position[m],k.outline[g?"on":"off"],k.outline.pill[g&&p?"on":"off"],k.size[y],g&&!k.outline.color[r]&&k.inner.outline,a&&k.isProcessing),children:(0,i.jsxs)(i.Fragment,{children:[a&&(0,i.jsx)("span",{className:k.spinnerSlot,children:u}),void 0!==e?e:(0,i.jsx)("span",{"data-testid":"flowbite-button-label",className:k.label,children:a?l:f})]})})})});$.displayName="Button";let q=Object.assign($,{Group:z});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var H,K,G=function(e,t){return(G=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},W=(H=K={path:void 0,exports:{},require:function(e,t){return function(){throw Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&K.path)}},K.exports,function(){var e={}.hasOwnProperty;function t(){for(var r=[],n=0;n<arguments.length;n++){var i=arguments[n];if(i){var s=typeof i;if("string"===s||"number"===s)r.push(i);else if(Array.isArray(i)&&i.length){var o=t.apply(null,i);o&&r.push(o)}else if("object"===s)for(var a in i)e.call(i,a)&&i[a]&&r.push(a)}}return r.join(" ")}H.exports?(t.default=t,H.exports=t):window.classNames=t}(),K.exports);function Q(e,t,r){function n(){var u=Date.now()-a;u<t&&u>=0?i=setTimeout(n,t-u):(i=null,r||(l=e.apply(o,s),o=s=null))}null==t&&(t=100);var i,s,o,a,l,u=function(){o=this,s=arguments,a=Date.now();var u=r&&!i;return i||(i=setTimeout(n,t)),u&&(l=e.apply(o,s),o=s=null),l};return u.clear=function(){i&&(clearTimeout(i),i=null)},u.flush=function(){i&&(l=e.apply(o,s),o=s=null,clearTimeout(i),i=null)},u}Q.debounce=Q,function(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===r&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".indiana-scroll-container {\n  overflow: auto; }\n  .indiana-scroll-container--dragging {\n    scroll-behavior: auto !important; }\n    .indiana-scroll-container--dragging > * {\n      pointer-events: none;\n      cursor: -webkit-grab;\n      cursor: grab; }\n  .indiana-scroll-container--hide-scrollbars {\n    overflow: hidden;\n    overflow: -moz-scrollbars-none;\n    -ms-overflow-style: none;\n    scrollbar-width: none; }\n    .indiana-scroll-container--hide-scrollbars::-webkit-scrollbar {\n      display: none !important;\n      height: 0 !important;\n      width: 0 !important;\n      background: transparent !important;\n      -webkit-appearance: none !important; }\n  .indiana-scroll-container--native-scroll {\n    overflow: auto; }\n\n.indiana-dragging {\n  cursor: -webkit-grab;\n  cursor: grab; }\n");var X,J=(X="indiana-scroll-container",function(e,t){if(!e)return X;"string"==typeof e?r=e:t=e;var r,n=X;return r&&(n+="__"+r),n+(t?Object.keys(t).reduce(function(e,r){var i=t[r];return i&&(e+=" "+("boolean"==typeof i?n+"--"+r:n+"--"+r+"_"+i)),e},""):"")}),Y=function(e){function t(t){var r=e.call(this,t)||this;return r.onEndScroll=function(){r.scrolling=!1,!r.pressed&&r.started&&r.processEnd()},r.onScroll=function(e){var t=r.container.current;t.scrollLeft===r.scrollLeft&&t.scrollTop===r.scrollTop||(r.scrolling=!0,r.processScroll(e),r.onEndScroll())},r.onTouchStart=function(e){var t=r.props.nativeMobileScroll;if(r.isDraggable(e.target)){if(r.internal=!0,t&&r.scrolling)r.pressed=!0;else{var n=e.touches[0];r.processClick(e,n.clientX,n.clientY),!t&&r.props.stopPropagation&&e.stopPropagation()}}},r.onTouchEnd=function(e){var t=r.props.nativeMobileScroll;r.pressed&&(!r.started||r.scrolling&&t?r.pressed=!1:r.processEnd(),r.forceUpdate())},r.onTouchMove=function(e){var t=r.props.nativeMobileScroll;if(r.pressed&&(!t||!r.isMobile)){var n=e.touches[0];n&&r.processMove(e,n.clientX,n.clientY),e.preventDefault(),r.props.stopPropagation&&e.stopPropagation()}},r.onMouseDown=function(e){r.isDraggable(e.target)&&r.isScrollable()&&(r.internal=!0,-1!==r.props.buttons.indexOf(e.button)&&(r.processClick(e,e.clientX,e.clientY),e.preventDefault(),r.props.stopPropagation&&e.stopPropagation()))},r.onMouseMove=function(e){r.pressed&&(r.processMove(e,e.clientX,e.clientY),e.preventDefault(),r.props.stopPropagation&&e.stopPropagation())},r.onMouseUp=function(e){r.pressed&&(r.started?r.processEnd():(r.internal=!1,r.pressed=!1,r.forceUpdate(),r.props.onClick&&r.props.onClick(e)),e.preventDefault(),r.props.stopPropagation&&e.stopPropagation())},r.container=a.createRef(),r.onEndScroll=Q(r.onEndScroll,300),r.scrolling=!1,r.started=!1,r.pressed=!1,r.internal=!1,r.getRef=r.getRef.bind(r),r}return function(e,t){function r(){this.constructor=e}G(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(t,e),t.prototype.componentDidMount=function(){var e=this.props.nativeMobileScroll,t=this.container.current;window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd),t.addEventListener("touchstart",this.onTouchStart,{passive:!1}),t.addEventListener("mousedown",this.onMouseDown,{passive:!1}),e&&(this.isMobile=this.isMobileDevice(),this.isMobile&&this.forceUpdate())},t.prototype.componentWillUnmount=function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},t.prototype.getElement=function(){return this.container.current},t.prototype.isMobileDevice=function(){return void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")},t.prototype.isDraggable=function(e){var t=this.props.ignoreElements;if(t){var r=e.closest(t);return null===r||r.contains(this.getElement())}return!0},t.prototype.isScrollable=function(){var e=this.container.current;return e&&(e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight)},t.prototype.processClick=function(e,t,r){var n=this.container.current;this.scrollLeft=n.scrollLeft,this.scrollTop=n.scrollTop,this.clientX=t,this.clientY=r,this.pressed=!0},t.prototype.processStart=function(e){void 0===e&&(e=!0);var t=this.props.onStartScroll;this.started=!0,e&&document.body.classList.add("indiana-dragging"),t&&t({external:!this.internal}),this.forceUpdate()},t.prototype.processScroll=function(e){if(this.started){var t=this.props.onScroll;t&&t({external:!this.internal})}else this.processStart(!1)},t.prototype.processMove=function(e,t,r){var n=this.props,i=n.horizontal,s=n.vertical,o=n.activationDistance,a=n.onScroll,l=this.container.current;this.started?(i&&(l.scrollLeft-=t-this.clientX),s&&(l.scrollTop-=r-this.clientY),a&&a({external:!this.internal}),this.clientX=t,this.clientY=r,this.scrollLeft=l.scrollLeft,this.scrollTop=l.scrollTop):(i&&Math.abs(t-this.clientX)>o||s&&Math.abs(r-this.clientY)>o)&&(this.clientX=t,this.clientY=r,this.processStart())},t.prototype.processEnd=function(){var e=this.props.onEndScroll;this.container.current&&e&&e({external:!this.internal}),this.pressed=!1,this.started=!1,this.scrolling=!1,this.internal=!1,document.body.classList.remove("indiana-dragging"),this.forceUpdate()},t.prototype.getRef=function(e){[this.container,this.props.innerRef].forEach(function(t){t&&("function"==typeof t?t(e):t.current=e)})},t.prototype.render=function(){var e=this.props,t=e.children,r=e.draggingClassName,n=e.className,i=e.style,s=e.hideScrollbars,o=e.component;return a.createElement(o,{className:W(n,this.pressed&&r,J({dragging:this.pressed,"hide-scrollbars":s,"native-scroll":this.isMobile})),style:i,ref:this.getRef,onScroll:this.onScroll},t)},t.defaultProps={nativeMobileScroll:!0,hideScrollbars:!0,activationDistance:10,vertical:!0,horizontal:!0,stopPropagation:!1,style:{},component:"div",buttons:[0]},t}(a.PureComponent),Z=()=>"undefined"!=typeof window;let ee=({children:e,indicators:t=!0,leftControl:r,rightControl:n,slide:s=!0,slideInterval:l,className:u,theme:c={},...h})=>{let d=_(S().theme.carousel,c),f=Z()&&-1!==navigator.userAgent.indexOf("IEMobile"),g=(0,a.useRef)(null),[p,m]=(0,a.useState)(0),[y,b]=(0,a.useState)(!1),v=(0,a.useMemo)(()=>a.Children.map(e,e=>(0,a.cloneElement)(e,{className:o()(d.item.base,e.props.className)})),[e,d.item.base]),w=(0,a.useCallback)(e=>()=>{v&&(e=(e+v.length)%v.length,g.current&&(g.current.scrollLeft=g.current.clientWidth*e),m(e))},[v]);(0,a.useEffect)(()=>{g.current&&!y&&0!==g.current.scrollLeft&&m(Math.round(g.current.scrollLeft/g.current.clientWidth))},[y]),(0,a.useEffect)(()=>{if(s){let e=setInterval(()=>!y&&w(p+1)(),l??3e3);return()=>clearInterval(e)}},[p,y,w,s,l]);let x=e=>()=>b(e);return(0,i.jsxs)("div",{className:o()(d.root.base,u),"data-testid":"carousel",...h,children:[(0,i.jsx)(Y,{className:o()(d.scrollContainer.base,(f||!y)&&d.scrollContainer.snap),draggingClassName:"cursor-grab",innerRef:g,onEndScroll:x(!1),onStartScroll:x(!0),vertical:!1,children:v?.map((e,t)=>(0,i.jsx)("div",{className:d.item.wrapper,"data-active":p===t,"data-testid":"carousel-item",children:e},t))}),t&&(0,i.jsx)("div",{className:d.indicators.wrapper,children:v?.map((e,t)=>(0,i.jsx)("button",{className:o()(d.indicators.base,d.indicators.active[t===p?"on":"off"]),onClick:w(t),"data-testid":"carousel-indicator","aria-label":`Slide ${t+1}`},t))}),v&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:d.root.leftControl,children:(0,i.jsx)("button",{className:"group","data-testid":"carousel-left-control",onClick:w(p-1),type:"button","aria-label":"Previous slide",children:r||(0,i.jsx)(et,{})})}),(0,i.jsx)("div",{className:d.root.rightControl,children:(0,i.jsx)("button",{className:"group","data-testid":"carousel-right-control",onClick:w(p+1),type:"button","aria-label":"Next slide",children:n||(0,i.jsx)(er,{})})})]})]})},et=()=>{let e=S().theme.carousel;return(0,i.jsx)("span",{className:e.control.base,children:(0,i.jsx)(x,{className:e.control.icon})})},er=()=>{let e=S().theme.carousel;return(0,i.jsx)("span",{className:e.control.base,children:(0,i.jsx)(k,{className:e.control.icon})})},en=(0,a.forwardRef)(({className:e,theme:t={},...r},n)=>{let s=_(S().theme.checkbox,t);return(0,i.jsx)("input",{ref:n,type:"checkbox",className:o()(s.root.base,e),...r})});function ei(e){return e.split("-")[1]}function es(e){return"y"===e?"height":"width"}function eo(e){return e.split("-")[0]}function ea(e){return["top","bottom"].includes(eo(e))?"x":"y"}function el(e,t,r){let n,{reference:i,floating:s}=e,o=i.x+i.width/2-s.width/2,a=i.y+i.height/2-s.height/2,l=ea(t),u=es(l),c=i[u]/2-s[u]/2,h="x"===l;switch(eo(t)){case"top":n={x:o,y:i.y-s.height};break;case"bottom":n={x:o,y:i.y+i.height};break;case"right":n={x:i.x+i.width,y:a};break;case"left":n={x:i.x-s.width,y:a};break;default:n={x:i.x,y:i.y}}switch(ei(t)){case"start":n[l]-=c*(r&&h?-1:1);break;case"end":n[l]+=c*(r&&h?-1:1)}return n}en.displayName="Checkbox";let eu=async(e,t,r)=>{let{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:o}=r,a=s.filter(Boolean),l=await (null==o.isRTL?void 0:o.isRTL(t)),u=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:h}=el(u,n,l),d=n,f={},g=0;for(let r=0;r<a.length;r++){let{name:s,fn:p}=a[r],{x:m,y:y,data:b,reset:v}=await p({x:c,y:h,initialPlacement:n,placement:d,strategy:i,middlewareData:f,rects:u,platform:o,elements:{reference:e,floating:t}});c=null!=m?m:c,h=null!=y?y:h,f={...f,[s]:{...f[s],...b}},v&&g<=50&&(g++,"object"==typeof v&&(v.placement&&(d=v.placement),v.rects&&(u=!0===v.rects?await o.getElementRects({reference:e,floating:t,strategy:i}):v.rects),{x:c,y:h}=el(u,d,l)),r=-1)}return{x:c,y:h,placement:d,strategy:i,middlewareData:f}};function ec(e){return"number"!=typeof e?{top:0,right:0,bottom:0,left:0,...e}:{top:e,right:e,bottom:e,left:e}}function eh(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function ed(e,t){var r;void 0===t&&(t={});let{x:n,y:i,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:h="floating",altBoundary:d=!1,padding:f=0}=t,g=ec(f),p=a[d?"floating"===h?"reference":"floating":h],m=eh(await s.getClippingRect({element:null==(r=await (null==s.isElement?void 0:s.isElement(p)))||r?p:p.contextElement||await (null==s.getDocumentElement?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),y="floating"===h?{...o.floating,x:n,y:i}:o.reference,b=await (null==s.getOffsetParent?void 0:s.getOffsetParent(a.floating)),v=await (null==s.isElement?void 0:s.isElement(b))&&await (null==s.getScale?void 0:s.getScale(b))||{x:1,y:1},w=eh(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:y,offsetParent:b,strategy:l}):y);return{top:(m.top-w.top+g.top)/v.y,bottom:(w.bottom-m.bottom+g.bottom)/v.y,left:(m.left-w.left+g.left)/v.x,right:(w.right-m.right+g.right)/v.x}}let ef=Math.min,eg=Math.max,ep=e=>({name:"arrow",options:e,async fn(t){let{element:r,padding:n=0}=e||{},{x:i,y:s,placement:o,rects:a,platform:l,elements:u}=t;if(null==r)return{};let c=ec(n),h={x:i,y:s},d=ea(o),f=es(d),g=await l.getDimensions(r),p="y"===d,m=p?"top":"left",y=p?"bottom":"right",b=p?"clientHeight":"clientWidth",v=a.reference[f]+a.reference[d]-h[d]-a.floating[f],w=h[d]-a.reference[d],x=await (null==l.getOffsetParent?void 0:l.getOffsetParent(r)),k=x?x[b]:0;k&&await (null==l.isElement?void 0:l.isElement(x))||(k=u.floating[b]||a.floating[f]);let E=c[m],T=k-g[f]-c[y],I=k/2-g[f]/2+(v/2-w/2),_=eg(E,ef(I,T)),C=null!=ei(o)&&I!=_&&a.reference[f]/2-(I<E?c[m]:c[y])-g[f]/2<0;return{[d]:h[d]-(C?I<E?E-I:T-I:0),data:{[d]:_,centerOffset:I-_}}}}),em=["top","right","bottom","left"].reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]),ey={left:"right",right:"left",bottom:"top",top:"bottom"};function eb(e){return e.replace(/left|right|bottom|top/g,e=>ey[e])}function ev(e,t,r){void 0===r&&(r=!1);let n=ei(e),i=ea(e),s=es(i),o="x"===i?n===(r?"end":"start")?"right":"left":"start"===n?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=eb(o)),{main:o,cross:eb(o)}}let ew={start:"end",end:"start"};function ex(e){return e.replace(/start|end/g,e=>ew[e])}function ek(e){var t;return(null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function eE(e){return ek(e).getComputedStyle(e)}function eT(e){return e instanceof ek(e).Node}function eI(e){return eT(e)?(e.nodeName||"").toLowerCase():""}function e_(){if(n)return n;let e=navigator.userAgentData;return e&&Array.isArray(e.brands)?n=e.brands.map(e=>e.brand+"/"+e.version).join(" "):navigator.userAgent}function eC(e){return e instanceof ek(e).HTMLElement}function eS(e){return e instanceof ek(e).Element}function eN(e){return"undefined"!=typeof ShadowRoot&&(e instanceof ek(e).ShadowRoot||e instanceof ShadowRoot)}function eA(e){let{overflow:t,overflowX:r,overflowY:n,display:i}=eE(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(i)}function eR(e){let t=/firefox/i.test(e_()),r=eE(e),n=r.backdropFilter||r.WebkitBackdropFilter;return"none"!==r.transform||"none"!==r.perspective||!!n&&"none"!==n||t&&"filter"===r.willChange||t&&!!r.filter&&"none"!==r.filter||["transform","perspective"].some(e=>r.willChange.includes(e))||["paint","layout","strict","content"].some(e=>{let t=r.contain;return null!=t&&t.includes(e)})}function eD(){return/^((?!chrome|android).)*safari/i.test(e_())}function eO(e){return["html","body","#document"].includes(eI(e))}let eL=Math.min,eP=Math.max,eM=Math.round;function ej(e){let t=eE(e),r=parseFloat(t.width),n=parseFloat(t.height),i=eC(e),s=i?e.offsetWidth:r,o=i?e.offsetHeight:n,a=eM(r)!==s||eM(n)!==o;return a&&(r=s,n=o),{width:r,height:n,fallback:a}}function eF(e){return eS(e)?e:e.contextElement}let eU={x:1,y:1};function eV(e){let t=eF(e);if(!eC(t))return eU;let r=t.getBoundingClientRect(),{width:n,height:i,fallback:s}=ej(t),o=(s?eM(r.width):r.width)/n,a=(s?eM(r.height):r.height)/i;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}function eB(e,t,r,n){var i,s;void 0===t&&(t=!1),void 0===r&&(r=!1);let o=e.getBoundingClientRect(),a=eF(e),l=eU;t&&(n?eS(n)&&(l=eV(n)):l=eV(e));let u=a?ek(a):window,c=eD()&&r,h=(o.left+(c&&(null==(i=u.visualViewport)?void 0:i.offsetLeft)||0))/l.x,d=(o.top+(c&&(null==(s=u.visualViewport)?void 0:s.offsetTop)||0))/l.y,f=o.width/l.x,g=o.height/l.y;if(a){let e=ek(a),t=n&&eS(n)?ek(n):n,r=e.frameElement;for(;r&&n&&t!==e;){let e=eV(r),t=r.getBoundingClientRect(),n=getComputedStyle(r);t.x+=(r.clientLeft+parseFloat(n.paddingLeft))*e.x,t.y+=(r.clientTop+parseFloat(n.paddingTop))*e.y,h*=e.x,d*=e.y,f*=e.x,g*=e.y,h+=t.x,d+=t.y,r=ek(r).frameElement}}return eh({width:f,height:g,x:h,y:d})}function ez(e){return((eT(e)?e.ownerDocument:e.document)||window.document).documentElement}function e$(e){return eS(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function eq(e){return eB(ez(e)).left+e$(e).scrollLeft}function eH(e){if("html"===eI(e))return e;let t=e.assignedSlot||e.parentNode||eN(e)&&e.host||ez(e);return eN(t)?t.host:t}function eK(e,t){var r;void 0===t&&(t=[]);let n=function e(t){let r=eH(t);return eO(r)?r.ownerDocument.body:eC(r)&&eA(r)?r:e(r)}(e),i=n===(null==(r=e.ownerDocument)?void 0:r.body),s=ek(n);return i?t.concat(s,s.visualViewport||[],eA(n)?n:[]):t.concat(n,eK(n))}function eG(e,t,r){let n;if("viewport"===t)n=function(e,t){let r=ek(e),n=ez(e),i=r.visualViewport,s=n.clientWidth,o=n.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;let e=eD();(!e||e&&"fixed"===t)&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}(e,r);else if("document"===t)n=function(e){let t=ez(e),r=e$(e),n=e.ownerDocument.body,i=eP(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),s=eP(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight),o=-r.scrollLeft+eq(e),a=-r.scrollTop;return"rtl"===eE(n).direction&&(o+=eP(t.clientWidth,n.clientWidth)-i),{width:i,height:s,x:o,y:a}}(ez(e));else if(eS(t))n=function(e,t){let r=eB(e,!0,"fixed"===t),n=r.top+e.clientTop,i=r.left+e.clientLeft,s=eC(e)?eV(e):{x:1,y:1};return{width:e.clientWidth*s.x,height:e.clientHeight*s.y,x:i*s.x,y:n*s.y}}(t,r);else{let r={...t};if(eD()){var i,s;let t=ek(e);r.x-=(null==(i=t.visualViewport)?void 0:i.offsetLeft)||0,r.y-=(null==(s=t.visualViewport)?void 0:s.offsetTop)||0}n=r}return eh(n)}function eW(e,t){return eC(e)&&"fixed"!==eE(e).position?t?t(e):e.offsetParent:null}function eQ(e,t){let r=ek(e);if(!eC(e))return r;let n=eW(e,t);for(;n&&["table","td","th"].includes(eI(n))&&"static"===eE(n).position;)n=eW(n,t);return n&&("html"===eI(n)||"body"===eI(n)&&"static"===eE(n).position&&!eR(n))?r:n||function(e){let t=eH(e);for(;eC(t)&&!eO(t);){if(eR(t))return t;t=eH(t)}return null}(e)||r}let eX={getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e,s="clippingAncestors"===r?function(e,t){let r=t.get(e);if(r)return r;let n=eK(e).filter(e=>eS(e)&&"body"!==eI(e)),i=null,s="fixed"===eE(e).position,o=s?eH(e):e;for(;eS(o)&&!eO(o);){let t=eE(o),r=eR(o);r||"fixed"!==t.position||(i=null),(s?!r&&!i:!r&&"static"===t.position&&i&&["absolute","fixed"].includes(i.position)||eA(o)&&!r&&function e(t,r){let n=eH(t);return!(n===r||!eS(n)||eO(n))&&("fixed"===eE(n).position||e(n,r))}(e,o))?n=n.filter(e=>e!==o):i=t,o=eH(o)}return t.set(e,n),n}(t,this._c):[].concat(r),o=[...s,n],a=o[0],l=o.reduce((e,r)=>{let n=eG(t,r,i);return e.top=eP(n.top,e.top),e.right=eL(n.right,e.right),e.bottom=eL(n.bottom,e.bottom),e.left=eP(n.left,e.left),e},eG(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:r,strategy:n}=e,i=eC(r),s=ez(r);if(r===s)return t;let o={scrollLeft:0,scrollTop:0},a={x:1,y:1},l={x:0,y:0};if((i||!i&&"fixed"!==n)&&(("body"!==eI(r)||eA(s))&&(o=e$(r)),eC(r))){let e=eB(r);a=eV(r),l.x=e.x+r.clientLeft,l.y=e.y+r.clientTop}return{width:t.width*a.x,height:t.height*a.y,x:t.x*a.x-o.scrollLeft*a.x+l.x,y:t.y*a.y-o.scrollTop*a.y+l.y}},isElement:eS,getDimensions:function(e){return ej(e)},getOffsetParent:eQ,getDocumentElement:ez,getScale:eV,async getElementRects(e){let{reference:t,floating:r,strategy:n}=e,i=this.getOffsetParent||eQ,s=this.getDimensions;return{reference:function(e,t,r){let n=eC(t),i=ez(t),s=eB(e,!0,"fixed"===r,t),o={scrollLeft:0,scrollTop:0},a={x:0,y:0};if(n||!n&&"fixed"!==r){if(("body"!==eI(t)||eA(i))&&(o=e$(t)),eC(t)){let e=eB(t,!0);a.x=e.x+t.clientLeft,a.y=e.y+t.clientTop}else i&&(a.x=eq(i))}return{x:s.left+o.scrollLeft-a.x,y:s.top+o.scrollTop-a.y,width:s.width,height:s.height}}(t,await i(r),n),floating:{x:0,y:0,...await s(r)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>"rtl"===eE(e).direction},eJ=(e,t,r)=>{let n=new Map,i={platform:eX,...r},s={...i.platform,_c:n};return eu(e,t,{...i,platform:s})};var eY=r(3935);let eZ=e=>{let{element:t,padding:r}=e;return{name:"arrow",options:e,fn(e){if(Object.prototype.hasOwnProperty.call(t,"current")){if(null!=t.current)return ep({element:t.current,padding:r}).fn(e)}else if(t)return ep({element:t,padding:r}).fn(e);return{}}}};var e0="undefined"!=typeof document?a.useLayoutEffect:a.useEffect;function e1(e,t){let r,n,i;if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((r=e.length)!=t.length)return!1;for(n=r;0!=n--;)if(!e1(e[n],t[n]))return!1;return!0}if((r=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!Object.prototype.hasOwnProperty.call(t,i[n]))return!1;for(n=r;0!=n--;){let r=i[n];if(("_owner"!==r||!e.$$typeof)&&!e1(e[r],t[r]))return!1}return!0}return e!=e&&t!=t}function e2(e){let t=a.useRef(e);return e0(()=>{t.current=e}),t}var e4="undefined"!=typeof document?a.useLayoutEffect:a.useEffect;let e9=!1,e5=0,e6=()=>"floating-ui-"+e5++,e3=l["useId".toString()],e7=e3||function(){let[e,t]=a.useState(()=>e9?e6():void 0);return e4(()=>{null==e&&t(e6())},[]),a.useEffect(()=>{e9||(e9=!0)},[]),e},e8=a.createContext(null),te=a.createContext(null),tt=()=>{var e;return(null==(e=a.useContext(e8))?void 0:e.id)||null},tr=()=>a.useContext(te);function tn(e){return(null==e?void 0:e.ownerDocument)||document}function ti(e){return tn(e).defaultView||window}function ts(e){return!!e&&e instanceof ti(e).Element}function to(e){return!!e&&e instanceof ti(e).HTMLElement}function ta(e,t){let r=["mouse","pen"];return t||r.push("",void 0),r.includes(e)}function tl(e){let t=(0,a.useRef)(e);return e4(()=>{t.current=e}),t}let tu="data-floating-ui-safe-polygon";function tc(e,t,r){return r&&!ta(r)?0:"number"==typeof e?e:null==e?void 0:e[t]}let th=function(e,t){let{enabled:r=!0,delay:n=0,handleClose:i=null,mouseOnly:s=!1,restMs:o=0,move:l=!0}=void 0===t?{}:t,{open:u,onOpenChange:c,dataRef:h,events:d,elements:{domReference:f,floating:g},refs:p}=e,m=tr(),y=tt(),b=tl(i),v=tl(n),w=a.useRef(),x=a.useRef(),k=a.useRef(),E=a.useRef(),T=a.useRef(!0),I=a.useRef(!1),_=a.useRef(()=>{}),C=a.useCallback(()=>{var e;let t=null==(e=h.current.openEvent)?void 0:e.type;return(null==t?void 0:t.includes("mouse"))&&"mousedown"!==t},[h]);a.useEffect(()=>{if(r)return d.on("dismiss",e),()=>{d.off("dismiss",e)};function e(){clearTimeout(x.current),clearTimeout(E.current),T.current=!0}},[r,d]),a.useEffect(()=>{if(!r||!b.current||!u)return;function e(){C()&&c(!1)}let t=tn(g).documentElement;return t.addEventListener("mouseleave",e),()=>{t.removeEventListener("mouseleave",e)}},[g,u,c,r,b,h,C]);let S=a.useCallback(function(e){void 0===e&&(e=!0);let t=tc(v.current,"close",w.current);t&&!k.current?(clearTimeout(x.current),x.current=setTimeout(()=>c(!1),t)):e&&(clearTimeout(x.current),c(!1))},[v,c]),N=a.useCallback(()=>{_.current(),k.current=void 0},[]),A=a.useCallback(()=>{if(I.current){let e=tn(p.floating.current).body;e.style.pointerEvents="",e.removeAttribute(tu),I.current=!1}},[p]);return a.useEffect(()=>{if(r&&ts(f))return u&&f.addEventListener("mouseleave",a),null==g||g.addEventListener("mouseleave",a),l&&f.addEventListener("mousemove",n,{once:!0}),f.addEventListener("mouseenter",n),f.addEventListener("mouseleave",i),()=>{u&&f.removeEventListener("mouseleave",a),null==g||g.removeEventListener("mouseleave",a),l&&f.removeEventListener("mousemove",n),f.removeEventListener("mouseenter",n),f.removeEventListener("mouseleave",i)};function t(){return!!h.current.openEvent&&["click","mousedown"].includes(h.current.openEvent.type)}function n(e){if(clearTimeout(x.current),T.current=!1,s&&!ta(w.current)||o>0&&0===tc(v.current,"open"))return;h.current.openEvent=e;let t=tc(v.current,"open",w.current);t?x.current=setTimeout(()=>{c(!0)},t):c(!0)}function i(r){if(t())return;_.current();let n=tn(g);if(clearTimeout(E.current),b.current){u||clearTimeout(x.current),k.current=b.current({...e,tree:m,x:r.clientX,y:r.clientY,onClose(){A(),N(),S()}});let t=k.current;n.addEventListener("mousemove",t),_.current=()=>{n.removeEventListener("mousemove",t)};return}S()}function a(r){t()||null==b.current||b.current({...e,tree:m,x:r.clientX,y:r.clientY,onClose(){A(),N(),S()}})(r)}},[f,g,r,e,s,o,l,S,N,A,c,u,m,v,b,h]),e4(()=>{var e,t,n;if(r&&u&&null!=(e=b.current)&&e.__options.blockPointerEvents&&C()){let e=tn(g).body;if(e.setAttribute(tu,""),e.style.pointerEvents="none",I.current=!0,ts(f)&&g){let e=f,r=null==m?void 0:null==(t=m.nodesRef.current.find(e=>e.id===y))?void 0:null==(n=t.context)?void 0:n.elements.floating;return r&&(r.style.pointerEvents=""),e.style.pointerEvents="auto",g.style.pointerEvents="auto",()=>{e.style.pointerEvents="",g.style.pointerEvents=""}}}},[r,u,y,g,f,m,b,h,C]),e4(()=>{u||(w.current=void 0,N(),A())},[u,N,A]),a.useEffect(()=>()=>{N(),clearTimeout(x.current),clearTimeout(E.current),A()},[r,N,A]),a.useMemo(()=>{if(!r)return{};function e(e){w.current=e.pointerType}return{reference:{onPointerDown:e,onPointerEnter:e,onMouseMove(){u||0===o||(clearTimeout(E.current),E.current=setTimeout(()=>{T.current||c(!0)},o))}},floating:{onMouseEnter(){clearTimeout(x.current)},onMouseLeave(){d.emit("dismiss",{type:"mouseLeave",data:{returnFocus:!1}}),S(!1)}}}},[d,r,o,u,c,S])};function td(e,t){if(!e||!t)return!1;let r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&function(e){if("undefined"==typeof ShadowRoot)return!1;let t=ti(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}(r)){let r=t;do{if(r&&e===r)return!0;r=r.parentNode||r.host}while(r)}return!1}let tf=l["useInsertionEffect".toString()],tg=tf||(e=>e());function tp(e){return to(e.target)&&"BUTTON"===e.target.tagName}function tm(e){return to(e)&&e.matches("input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])")}let ty=function(e,t){let{open:r,onOpenChange:n,dataRef:i,elements:{domReference:s}}=e,{enabled:o=!0,event:l="click",toggle:u=!0,ignoreMouse:c=!1,keyboardHandlers:h=!0}=void 0===t?{}:t,d=a.useRef();return a.useMemo(()=>o?{reference:{onPointerDown(e){d.current=e.pointerType},onMouseDown(e){0!==e.button||ta(d.current,!0)&&c||"click"===l||(r?u&&(!i.current.openEvent||"mousedown"===i.current.openEvent.type)&&n(!1):(e.preventDefault(),n(!0)),i.current.openEvent=e.nativeEvent)},onClick(e){if(!i.current.__syncReturnFocus){if("mousedown"===l&&d.current){d.current=void 0;return}ta(d.current,!0)&&c||(r?u&&(!i.current.openEvent||"click"===i.current.openEvent.type)&&n(!1):n(!0),i.current.openEvent=e.nativeEvent)}},onKeyDown(e){d.current=void 0,!(!h||tp(e))&&(" "!==e.key||tm(s)||e.preventDefault(),"Enter"===e.key&&(r?u&&n(!1):n(!0)))},onKeyUp(e){!(!h||tp(e)||tm(s))&&" "===e.key&&(r?u&&n(!1):n(!0))}}}:{},[o,i,l,c,h,s,u,r,n])},tb=function(e,t){let{open:r,onOpenChange:n,dataRef:i,events:s,refs:o,elements:{floating:l,domReference:u}}=e,{enabled:c=!0,keyboardOnly:h=!0}=void 0===t?{}:t,d=a.useRef(""),f=a.useRef(!1),g=a.useRef();return a.useEffect(()=>{if(!c)return;let e=tn(l),t=e.defaultView||window;function n(){!r&&to(u)&&u===function(e){let t=e.activeElement;for(;(null==(r=t)?void 0:null==(n=r.shadowRoot)?void 0:n.activeElement)!=null;){var r,n;t=t.shadowRoot.activeElement}return t}(tn(u))&&(f.current=!0)}return t.addEventListener("blur",n),()=>{t.removeEventListener("blur",n)}},[l,u,r,c]),a.useEffect(()=>{if(c)return s.on("dismiss",e),()=>{s.off("dismiss",e)};function e(e){("referencePress"===e.type||"escapeKey"===e.type)&&(f.current=!0)}},[s,c]),a.useEffect(()=>()=>{clearTimeout(g.current)},[]),a.useMemo(()=>c?{reference:{onPointerDown(e){let{pointerType:t}=e;d.current=t,f.current=!!(t&&h)},onMouseLeave(){f.current=!1},onFocus(e){var t,r;!f.current&&("focus"===e.type&&(null==(t=i.current.openEvent)?void 0:t.type)==="mousedown"&&i.current.openEvent&&(r=i.current.openEvent,null!=u&&("composedPath"in r?r.composedPath().includes(u):null!=r.target&&u.contains(r.target)))||(i.current.openEvent=e.nativeEvent,n(!0)))},onBlur(e){f.current=!1;let t=e.relatedTarget,r=ts(t)&&t.hasAttribute("data-floating-ui-focus-guard")&&"outside"===t.getAttribute("data-type");g.current=setTimeout(()=>{td(o.floating.current,t)||td(u,t)||r||n(!1)})}}}:{},[c,h,u,o,i,n])},tv=function(e,t){let{open:r}=e,{enabled:n=!0,role:i="dialog"}=void 0===t?{}:t,s=e7(),o=e7();return a.useMemo(()=>{let e={id:s,role:i};return n?"tooltip"===i?{reference:{"aria-describedby":r?s:void 0},floating:e}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":"alertdialog"===i?"dialog":i,"aria-controls":r?s:void 0,..."listbox"===i&&{role:"combobox"},..."menu"===i&&{id:o}},floating:{...e,..."menu"===i&&{"aria-labelledby":o}}}:{}},[n,i,r,s,o])};function tw(e,t,r){let n=new Map;return{..."floating"===r&&{tabIndex:-1},...e,...t.map(e=>e?e[r]:null).concat(e).reduce((e,t)=>(t&&Object.entries(t).forEach(t=>{let[r,i]=t;if(0===r.indexOf("on")){if(n.has(r)||n.set(r,[]),"function"==typeof i){var s;null==(s=n.get(r))||s.push(i),e[r]=function(){for(var e,t=arguments.length,i=Array(t),s=0;s<t;s++)i[s]=arguments[s];null==(e=n.get(r))||e.forEach(e=>e(...i))}}}else e[r]=i}),e),{})}}let tx=function(e){void 0===e&&(e=[]);let t=e,r=a.useCallback(t=>tw(t,e,"reference"),t),n=a.useCallback(t=>tw(t,e,"floating"),t),i=a.useCallback(t=>tw(t,e,"item"),e.map(e=>null==e?void 0:e.item));return a.useMemo(()=>({getReferenceProps:r,getFloatingProps:n,getItemProps:i}),[r,n,i])},tk=({arrowRef:e,placement:t})=>{var r,n,i;let s=[];return s.push({name:"offset",options:8,async fn(e){let{x:t,y:r}=e,n=await async function(e,t){let{placement:r,platform:n,elements:i}=e,s=await (null==n.isRTL?void 0:n.isRTL(i.floating)),o=eo(r),a=ei(r),l="x"===ea(r),u=["left","top"].includes(o)?-1:1,c=s&&l?-1:1,h="function"==typeof t?t(e):t,{mainAxis:d,crossAxis:f,alignmentAxis:g}="number"==typeof h?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return a&&"number"==typeof g&&(f="end"===a?-1*g:g),l?{x:f*c,y:d*u}:{x:d*u,y:f*c}}(e,8);return{x:t+n.x,y:r+n.y,data:n}}}),s.push("auto"===t?(void 0===r&&(r={}),{name:"autoPlacement",options:r,async fn(e){var t,n,i,s;let{rects:o,middlewareData:a,placement:l,platform:u,elements:c}=e,{crossAxis:h=!1,alignment:d,allowedPlacements:f=em,autoAlignment:g=!0,...p}=r,m=void 0!==d||f===em?((s=d||null)?[...f.filter(e=>ei(e)===s),...f.filter(e=>ei(e)!==s)]:f.filter(e=>eo(e)===e)).filter(e=>!s||ei(e)===s||!!g&&ex(e)!==e):f,y=await ed(e,p),b=(null==(t=a.autoPlacement)?void 0:t.index)||0,v=m[b];if(null==v)return{};let{main:w,cross:x}=ev(v,o,await (null==u.isRTL?void 0:u.isRTL(c.floating)));if(l!==v)return{reset:{placement:m[0]}};let k=[y[eo(v)],y[w],y[x]],E=[...(null==(n=a.autoPlacement)?void 0:n.overflows)||[],{placement:v,overflows:k}],T=m[b+1];if(T)return{data:{index:b+1,overflows:E},reset:{placement:T}};let I=E.map(e=>{let t=ei(e.placement);return[e.placement,t&&h?e.overflows.slice(0,2).reduce((e,t)=>e+t,0):e.overflows[0],e.overflows]}).sort((e,t)=>e[1]-t[1]),_=(null==(i=I.filter(e=>e[2].slice(0,ei(e[0])?2:3).every(e=>e<=0))[0])?void 0:i[0])||I[0][0];return _!==l?{data:{index:b+1,overflows:E},reset:{placement:_}}:{}}}):(void 0===n&&(n={}),{name:"flip",options:n,async fn(e){var t,r,i,s;let{placement:o,middlewareData:a,rects:l,initialPlacement:u,platform:c,elements:h}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:g,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:y=!0,...b}=n,v=eo(o),w=eo(u)===u,x=await (null==c.isRTL?void 0:c.isRTL(h.floating)),k=g||(w||!y?[eb(u)]:function(e){let t=eb(e);return[ex(e),t,ex(t)]}(u));g||"none"===m||k.push(...function(e,t,r,n){let i=ei(e),s=function(e,t,r){let n=["left","right"],i=["right","left"];switch(e){case"top":case"bottom":return r?t?i:n:t?n:i;case"left":case"right":return t?["top","bottom"]:["bottom","top"];default:return[]}}(eo(e),"start"===r,n);return i&&(s=s.map(e=>e+"-"+i),t&&(s=s.concat(s.map(ex)))),s}(u,y,m,x));let E=[u,...k],T=await ed(e,b),I=[],_=(null==(t=a.flip)?void 0:t.overflows)||[];if(d&&I.push(T[v]),f){let{main:e,cross:t}=ev(o,l,x);I.push(T[e],T[t])}if(_=[..._,{placement:o,overflows:I}],!I.every(e=>e<=0)){let e=((null==(r=a.flip)?void 0:r.index)||0)+1,t=E[e];if(t)return{data:{index:e,overflows:_},reset:{placement:t}};let n=null==(i=_.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:i.placement;if(!n)switch(p){case"bestFit":{let e=null==(s=_.map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:s[0];e&&(n=e);break}case"initialPlacement":n=u}if(o!==n)return{reset:{placement:n}}}return{}}})),s.push({name:"shift",options:i={padding:8},async fn(e){let{x:t,y:r,placement:n}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:e=>{let{x:t,y:r}=e;return{x:t,y:r}}},...l}=i,u={x:t,y:r},c=await ed(e,l),h=ea(eo(n)),d="x"===h?"y":"x",f=u[h],g=u[d];s&&(f=eg(f+c["y"===h?"top":"left"],ef(f,f-c["y"===h?"bottom":"right"]))),o&&(g=eg(g+c["y"===d?"top":"left"],ef(g,g-c["y"===d?"bottom":"right"])));let p=a.fn({...e,[h]:f,[d]:g});return{...p,data:{x:p.x-t,y:p.y-r}}}}),e.current&&s.push(eZ({element:e.current})),s},tE=({placement:e})=>"auto"===e?void 0:e,tT=({placement:e})=>({top:"bottom",right:"left",bottom:"top",left:"right"})[e.split("-")[0]],tI=({animation:e="duration-300",arrow:t=!0,children:r,className:n,closeRequestKey:s,content:l,placement:u="top",style:c="dark",theme:h,trigger:d="hover",...f})=>{let g=(0,a.useRef)(null),[p,m]=(0,a.useState)(!1),y=function(e){void 0===e&&(e={});let{open:t=!1,onOpenChange:r,nodeId:n}=e,i=function(e){void 0===e&&(e={});let{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:i,whileElementsMounted:s,open:o}=e,[l,u]=a.useState({x:null,y:null,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[c,h]=a.useState(n);e1(c,n)||h(n);let d=a.useRef(null),f=a.useRef(null),g=a.useRef(l),p=e2(s),m=e2(i),[y,b]=a.useState(null),[v,w]=a.useState(null),x=a.useCallback(e=>{d.current!==e&&(d.current=e,b(e))},[]),k=a.useCallback(e=>{f.current!==e&&(f.current=e,w(e))},[]),E=a.useCallback(()=>{if(!d.current||!f.current)return;let e={placement:t,strategy:r,middleware:c};m.current&&(e.platform=m.current),eJ(d.current,f.current,e).then(e=>{let t={...e,isPositioned:!0};T.current&&!e1(g.current,t)&&(g.current=t,eY.flushSync(()=>{u(t)}))})},[c,t,r,m]);e0(()=>{!1===o&&g.current.isPositioned&&(g.current.isPositioned=!1,u(e=>({...e,isPositioned:!1})))},[o]);let T=a.useRef(!1);e0(()=>(T.current=!0,()=>{T.current=!1}),[]),e0(()=>{if(y&&v){if(p.current)return p.current(y,v,E);E()}},[y,v,E,p]);let I=a.useMemo(()=>({reference:d,floating:f,setReference:x,setFloating:k}),[x,k]),_=a.useMemo(()=>({reference:y,floating:v}),[y,v]);return a.useMemo(()=>({...l,update:E,refs:I,elements:_,reference:x,floating:k}),[l,E,I,_,x,k])}(e),s=tr(),o=a.useRef(null),l=a.useRef({}),u=a.useState(()=>(function(){let e=new Map;return{emit(t,r){var n;null==(n=e.get(t))||n.forEach(e=>e(r))},on(t,r){e.set(t,[...e.get(t)||[],r])},off(t,r){e.set(t,(e.get(t)||[]).filter(e=>e!==r))}}})())[0],[c,h]=a.useState(null),d=a.useCallback(e=>{let t=ts(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;i.refs.setReference(t)},[i.refs]),f=a.useCallback(e=>{(ts(e)||null===e)&&(o.current=e,h(e)),(ts(i.refs.reference.current)||null===i.refs.reference.current||null!==e&&!ts(e))&&i.refs.setReference(e)},[i.refs]),g=a.useMemo(()=>({...i.refs,setReference:f,setPositionReference:d,domReference:o}),[i.refs,f,d]),p=a.useMemo(()=>({...i.elements,domReference:c}),[i.elements,c]),m=function(e){let t=a.useRef(()=>{});return tg(()=>{t.current=e}),a.useCallback(function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return null==t.current?void 0:t.current(...r)},[])}(r),y=a.useMemo(()=>({...i,refs:g,elements:p,dataRef:l,nodeId:n,events:u,open:t,onOpenChange:m}),[i,n,u,t,m,g,p]);return e4(()=>{let e=null==s?void 0:s.nodesRef.current.find(e=>e.id===n);e&&(e.context=y)}),a.useMemo(()=>({...i,context:y,refs:g,reference:f,positionReference:d}),[i,g,y,f,d])}({middleware:tk({arrowRef:g,placement:u}),onOpenChange:m,open:p,placement:tE({placement:u})}),{context:b,floating:v,middlewareData:{arrow:{x:w,y:x}={}},reference:k,refs:E,strategy:T,update:I,x:_,y:C}=y,{getFloatingProps:S,getReferenceProps:N}=tx([ty(b,{enabled:"click"===d}),tb(b),th(b,{enabled:"hover"===d,handleClose:function(e){let t,{restMs:r=0,buffer:n=.5,blockPointerEvents:i=!1}=void 0===e?{}:e,s=!1,o=!1,a=e=>{let{x:i,y:a,placement:l,elements:u,onClose:c,nodeId:h,tree:d}=e;return function(e){var f;function g(){clearTimeout(t),c()}if(clearTimeout(t),!u.domReference||!u.floating||null==l||null==i||null==a)return;let{clientX:p,clientY:m}=e,y="composedPath"in e?e.composedPath()[0]:e.target,b="mouseleave"===e.type,v=td(u.floating,y),w=td(u.domReference,y),x=u.domReference.getBoundingClientRect(),k=u.floating.getBoundingClientRect(),E=l.split("-")[0],T=i>k.right-k.width/2,I=a>k.bottom-k.height/2,_=(f=[p,m])[0]>=x.x&&f[0]<=x.x+x.width&&f[1]>=x.y&&f[1]<=x.y+x.height;if(v&&(o=!0,!b))return;if(w&&(o=!1),w&&!b){o=!0;return}if(b&&ts(e.relatedTarget)&&td(u.floating,e.relatedTarget)||d&&(function(e,t){let r=e.filter(e=>{var r;return e.parentId===t&&(null==(r=e.context)?void 0:r.open)})||[],n=r;for(;n.length;)n=e.filter(e=>{var t;return null==(t=n)?void 0:t.some(t=>{var r;return e.parentId===t.id&&(null==(r=e.context)?void 0:r.open)})})||[],r=r.concat(n);return r})(d.nodesRef.current,h).some(e=>{let{context:t}=e;return null==t?void 0:t.open}))return;if("top"===E&&a>=x.bottom-1||"bottom"===E&&a<=x.top+1||"left"===E&&i>=x.right-1||"right"===E&&i<=x.left+1)return g();let C=[];switch(E){case"top":C=[[k.left,x.top+1],[k.left,k.bottom-1],[k.right,k.bottom-1],[k.right,x.top+1]],s=p>=k.left&&p<=k.right&&m>=k.top&&m<=x.top+1;break;case"bottom":C=[[k.left,k.top+1],[k.left,x.bottom-1],[k.right,x.bottom-1],[k.right,k.top+1]],s=p>=k.left&&p<=k.right&&m>=x.bottom-1&&m<=k.bottom;break;case"left":C=[[k.right-1,k.bottom],[k.right-1,k.top],[x.left+1,k.top],[x.left+1,k.bottom]],s=p>=k.left&&p<=x.left+1&&m>=k.top&&m<=k.bottom;break;case"right":C=[[x.right-1,k.bottom],[x.right-1,k.top],[k.left+1,k.top],[k.left+1,k.bottom]],s=p>=x.right-1&&p<=k.right&&m>=k.top&&m<=k.bottom}let S=s?C:function(e){let[t,r]=e,i=k.width>x.width,s=k.height>x.height;switch(E){case"top":{let e=[[k.left,T?k.bottom-n:i?k.bottom-n:k.top],[k.right,T?i?k.bottom-n:k.top:k.bottom-n]];return[[i?t+n/2:T?t+4*n:t-4*n,r+n+1],[i?t-n/2:T?t+4*n:t-4*n,r+n+1],...e]}case"bottom":{let e=[[k.left,T?k.top+n:i?k.top+n:k.bottom],[k.right,T?i?k.top+n:k.bottom:k.top+n]];return[[i?t+n/2:T?t+4*n:t-4*n,r-n],[i?t-n/2:T?t+4*n:t-4*n,r-n],...e]}case"left":{let e=[[I?k.right-n:s?k.right-n:k.left,k.top],[I?s?k.right-n:k.left:k.right-n,k.bottom]];return[...e,[t+n+1,s?r+n/2:I?r+4*n:r-4*n],[t+n+1,s?r-n/2:I?r+4*n:r-4*n]]}case"right":{let e=[[I?k.left+n:s?k.left+n:k.right,k.top],[I?s?k.left+n:k.right:k.left+n,k.bottom]];return[[t-n,s?r+n/2:I?r+4*n:r-4*n],[t-n,s?r-n/2:I?r+4*n:r-4*n],...e]}}}([i,a]);if(!s){if(o&&!_)return g();!function(e,t){let[r,n]=e,i=!1,s=t.length;for(let e=0,o=s-1;e<s;o=e++){let[s,a]=t[e]||[0,0],[l,u]=t[o]||[0,0],c=a>=n!=u>=n&&r<=(l-s)*(n-a)/(u-a)+s;c&&(i=!i)}return i}([p,m],S)?g():r&&!o&&(t=setTimeout(g,r))}}};return a.__options={blockPointerEvents:i},a}()}),tv(b,{role:"tooltip"})]);return(0,a.useEffect)(()=>{if(E.reference.current&&E.floating.current&&p)return function(e,t,r,n){void 0===n&&(n={});let{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=!0,animationFrame:a=!1}=n,l=i||s?[...eS(e)?eK(e):e.contextElement?eK(e.contextElement):[],...eK(t)]:[];l.forEach(e=>{let t=!eS(e)&&e.toString().includes("V");i&&(!a||t)&&e.addEventListener("scroll",r,{passive:!0}),s&&e.addEventListener("resize",r)});let u,c=null;o&&(c=new ResizeObserver(()=>{r()}),eS(e)&&!a&&c.observe(e),eS(e)||!e.contextElement||a||c.observe(e.contextElement),c.observe(t));let h=a?eB(e):null;return a&&function t(){let n=eB(e);h&&(n.x!==h.x||n.y!==h.y||n.width!==h.width||n.height!==h.height)&&r(),h=n,u=requestAnimationFrame(t)}(),r(),()=>{var e;l.forEach(e=>{i&&e.removeEventListener("scroll",r),s&&e.removeEventListener("resize",r)}),null==(e=c)||e.disconnect(),c=null,a&&cancelAnimationFrame(u)}}(E.reference.current,E.floating.current,I)},[p,E.floating,E.reference,I]),(0,a.useEffect)(()=>{void 0!==s&&m(!1)},[s]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:h.target,...N({ref:k}),"data-testid":"flowbite-tooltip-target",children:r}),(0,i.jsxs)("div",{"data-testid":"flowbite-tooltip",...S({className:o()(h.base,e&&`${h.animation} ${e}`,!p&&h.hidden,h.style[c],n),ref:v,style:{position:T,top:C??" ",left:_??" "},...f}),children:[(0,i.jsx)("div",{className:h.content,children:l}),t&&(0,i.jsx)("div",{className:o()(h.arrow.base,{[h.arrow.style.dark]:"dark"===c,[h.arrow.style.light]:"light"===c,[h.arrow.style.auto]:"auto"===c}),"data-testid":"flowbite-tooltip-arrow",ref:g,style:{top:x??" ",left:w??" ",right:" ",bottom:" ",[tT({placement:y.placement})]:h.arrow.placement},children:"\xa0"})]})]})},t_=({className:e,...t})=>{let r=S().theme.dropdown.floating.divider;return(0,i.jsx)("div",{className:o()(r,e),...t})},tC=({children:e,className:t,...r})=>{let n=S().theme.dropdown.floating.header;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:o()(n,t),...r,children:e}),(0,i.jsx)(t_,{})]})},tS=({children:e,className:t,icon:r,onClick:n,theme:s={},...a})=>{let l=_(S().theme.dropdown.floating.item,s);return(0,i.jsxs)("li",{className:o()(l.base,t),onClick:n,...a,children:[r&&(0,i.jsx)(r,{className:l.icon}),e]})},tN={top:function(e){return f({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 15l7-7 7 7"}}]})(e)},right:k,bottom:w,left:x},tA=({children:e,className:t,dismissOnClick:r=!0,theme:n={},...s})=>{let o=_(S().theme.dropdown,n),{placement:l=s.inline?"bottom-start":"bottom",trigger:u="click",label:c,inline:h,floatingArrow:d=!1,arrowIcon:f=!0,...g}=s,p=(0,a.useMemo)(()=>{let[e]=l.split("-");return tN[e]??w},[l]),[m,y]=(0,a.useState)(void 0),b=(0,a.useCallback)(e=>a.isValidElement(e)?e.type===tS?a.cloneElement(e,{onClick:()=>{e.props.onClick?.(),r&&y("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}}):e.props.children&&"object"==typeof e.props.children?a.cloneElement(e,{children:a.Children.map(e.props.children,b)}):e:e,[r]),v=(0,a.useMemo)(()=>(0,i.jsx)("ul",{className:o.content,children:a.Children.map(e,b)}),[b,e,o.content]),x=({children:e})=>h?(0,i.jsx)("button",{className:o.inlineWrapper,children:e}):(0,i.jsx)(q,{...g,children:e});return(0,i.jsx)(tI,{content:v,style:"auto",animation:"duration-100",placement:l,arrow:d,trigger:u,theme:o.floating,closeRequestKey:m,className:t,children:(0,i.jsxs)(x,{children:[c,f&&(0,i.jsx)(p,{className:o.arrowIcon})]})})};tA.displayName="Dropdown",tS.displayName="Dropdown.Item",tC.displayName="Dropdown.Header",t_.displayName="Dropdown.Divider",Object.assign(tA,{Item:tS,Header:tC,Divider:t_});let tR=({children:e,className:t,color:r="default",theme:n={},value:s,...a})=>{let l=_(S().theme.helperText,n);return(0,i.jsx)("p",{className:o()(l.root.base,l.root.colors[r],t),...a,children:s??e??""})},tD=(0,a.forwardRef)(({className:e,color:t="gray",helperText:r,sizing:n="md",theme:s={},...a},l)=>{let u=_(S().theme.fileInput,s);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:o()(u.root.base,e),children:(0,i.jsx)("div",{className:u.field.base,children:(0,i.jsx)("input",{className:o()(u.field.input.base,u.field.input.colors[t],u.field.input.sizes[n]),...a,type:"file",ref:l})})}),r&&(0,i.jsx)(tR,{color:t,children:r})]})});tD.displayName="FileInput";let tO=({alt:e,className:t,children:r,href:n,name:s,src:a,theme:l={},...u})=>{let c=_(S().theme.footer.brand,l);return(0,i.jsx)("div",{children:n?(0,i.jsxs)("a",{"data-testid":"flowbite-footer-brand",href:n,className:o()(c.base,t),...u,children:[(0,i.jsx)("img",{alt:e,src:a,className:c.img}),(0,i.jsx)("span",{"data-testid":"flowbite-footer-brand-span",className:c.span,children:s}),r]}):(0,i.jsx)("img",{alt:e,"data-testid":"flowbite-footer-brand",src:a,className:o()(c.img,t),...u})})},tL=({by:e,className:t,href:r,theme:n={},year:s,...a})=>{let l=_(S().theme.footer.copyright,n);return(0,i.jsxs)("div",{"data-testid":"flowbite-footer-copyright",className:o()(l.base,t),...a,children:["\xa9 ",s,r?(0,i.jsx)("a",{href:r,className:l.href,children:e}):(0,i.jsx)("span",{"data-testid":"flowbite-footer-copyright-span",className:l.span,children:e})]})},tP=({className:e,theme:t={},...r})=>{let n=_(S().theme.footer.divider,t);return(0,i.jsx)("hr",{"data-testid":"footer-divider",className:o()(n.base,e),...r})},tM=({ariaLabel:e,className:t,href:r,icon:n,theme:s={},...a})=>{let l=_(S().theme.footer.icon,s);return(0,i.jsx)("div",{children:r?(0,i.jsx)("a",{"aria-label":e,"data-testid":"flowbite-footer-icon",href:r,className:o()(l.base,t),...a,children:(0,i.jsx)(n,{className:l.size})}):(0,i.jsx)(n,{"data-testid":"flowbite-footer-icon",className:l.size,...a})})},tj=({as:e="a",children:t,className:r,href:n,theme:s={},...a})=>{let l=_(S().theme.footer.groupLink.link,s);return(0,i.jsx)("li",{className:o()(l.base,r),children:(0,i.jsx)(e,{href:n,className:l.href,...a,children:t})})},tF=({children:e,className:t,col:r=!1,theme:n={},...s})=>{let a=_(S().theme.footer.groupLink,n);return(0,i.jsx)("ul",{"data-testid":"footer-groupLink",className:o()(a.base,r&&a.col,t),...s,children:e})},tU=({as:e="h2",className:t,theme:r={},title:n,...s})=>{let a=_(S().theme.footer.title,r);return(0,i.jsx)(e,{"data-testid":"flowbite-footer-title",className:o()(a.base,t),...s,children:n})},tV=({bgDark:e=!1,children:t,className:r,container:n=!1,theme:s={},...a})=>{let l=_(S().theme.footer,s);return(0,i.jsx)("footer",{"data-testid":"flowbite-footer",className:o()(l.root.base,e&&l.root.bgDark,n&&l.root.container,r),...a,children:t})};tV.displayName="Footer",tL.displayName="Footer.Copyright",tj.displayName="Footer.Link",tO.displayName="Footer.Brand",tF.displayName="Footer.LinkGroup",tM.displayName="Footer.Icon",tU.displayName="Footer.Title",tP.displayName="Footer.Divider";let tB=Object.assign(tV,{Copyright:tL,Link:tj,LinkGroup:tF,Brand:tO,Icon:tM,Title:tU,Divider:tP}),tz=({active:e,children:t,className:r,href:n,icon:s,onClick:a,theme:l={},...u})=>{let c=_(S().theme.listGroup.item,l),h=void 0!==n;return(0,i.jsx)("li",{className:o()(c.base,r),children:(0,i.jsxs)(h?"a":"button",{href:n,onClick:a,type:h?void 0:"button",className:o()(c.link.active[e?"on":"off"],c.link.base,c.link.href[h?"on":"off"]),...u,children:[s&&(0,i.jsx)(s,{"aria-hidden":!0,"data-testid":"flowbite-list-group-item-icon",className:c.link.icon}),t]})})},t$=({children:e,className:t,theme:r={},...n})=>{let s=_(S().theme.listGroup,r);return(0,i.jsx)("ul",{className:o()(s.root.base,t),...n,children:e})};t$.displayName="ListGroup",tz.displayName="ListGroup.Item",Object.assign(t$,{Item:tz});let tq=(e,t)=>{(0,a.useEffect)(()=>{let r=r=>{r.key===e&&t()};return document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)}},[e,t])},tH=(0,a.createContext)(void 0);function tK(){let e=(0,a.useContext)(tH);if(!e)throw Error("useModalContext should be used within the ModalContext provider!");return e}let tG=({children:e,className:t,theme:r={},...n})=>{let s=_(S().theme.modal.body,r),{popup:a}=tK();return(0,i.jsx)("div",{className:o()(s.base,{[s.popup]:a},t),...n,children:e})},tW=({children:e,className:t,theme:r={},...n})=>{let s=_(S().theme.modal.footer,r),{popup:a}=tK();return(0,i.jsx)("div",{className:o()(s.base,{[s.popup]:!a},t),...n,children:e})},tQ=({as:e="h3",children:t,className:r,theme:n={},...s})=>{let a=_(S().theme.modal.header,n),{popup:l,onClose:u}=tK();return(0,i.jsxs)("div",{className:o()(a.base,{[a.popup]:l},r),...s,children:[(0,i.jsx)(e,{className:a.title,children:t}),(0,i.jsx)("button",{"aria-label":"Close",className:a.close.base,type:"button",onClick:u,children:(0,i.jsx)(E,{"aria-hidden":!0,className:a.close.icon})})]})},tX=({children:e,className:t,dismissible:r=!1,onClose:n,popup:s,position:l="center",root:u,show:c,size:h="2xl",theme:d={},...f})=>{let g=_(S().theme.modal,d),[p,m]=(0,a.useState)(!1),y=(0,a.useRef)(null);if((0,a.useEffect)(()=>(m(!0),()=>{let e=y.current;e&&(e.parentNode?.removeChild(e),y.current=null)}),[]),tq("Escape",()=>{r&&n&&n()}),!p)return null;y.current||(y.current=document.createElement("div")),y.current.parentNode!==u&&Z()&&((u||=document.body).appendChild(y.current),u.style.overflow=c?"hidden":"auto");let b=e=>{r&&e.target===e.currentTarget&&n&&n()};return(0,eY.createPortal)((0,i.jsx)(tH.Provider,{value:{popup:s,onClose:n},children:(0,i.jsx)("div",{"aria-hidden":!c,"data-testid":"modal",onClick:b,role:"dialog",className:o()(g.root.base,g.root.positions[l],c?g.root.show.on:g.root.show.off,t),...f,children:(0,i.jsx)("div",{className:o()(g.content.base,g.root.sizes[h]),children:(0,i.jsx)("div",{className:g.content.inner,children:e})})})}),y.current)};tX.displayName="Modal",tQ.displayName="Modal.Header",tG.displayName="Modal.Body",tW.displayName="Modal.Footer",Object.assign(tX,{Header:tQ,Body:tG,Footer:tW});let tJ=({as:e="a",children:t,className:r,theme:n={},...s})=>{let a=_(S().theme.navbar.brand,n);return(0,i.jsx)(e,{className:o()(a.base,r),...s,children:t})},tY=(0,a.createContext)(void 0);function tZ(){let e=(0,a.useContext)(tY);if(!e)throw Error("useNavBarContext should be used within the NavbarContext provider!");return e}let t0=({children:e,className:t,theme:r={},...n})=>{let{isOpen:s}=tZ(),a=_(S().theme.navbar.collapse,r);return(0,i.jsx)("div",{"data-testid":"flowbite-navbar-collapse",className:o()(a.base,a.hidden[s?"off":"on"],t),...n,children:(0,i.jsx)("ul",{className:a.list,children:e})})},t1=({active:e,as:t="a",disabled:r,children:n,className:s,theme:a={},...l})=>{let u=_(S().theme.navbar.link,a);return(0,i.jsx)("li",{children:(0,i.jsx)(t,{className:o()(u.base,{[u.active.on]:e,[u.active.off]:!e&&!r},u.disabled[r?"on":"off"],s),...l,children:n})})};function t2(e){return f({tag:"svg",attr:{viewBox:"0 0 12 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M11.41 9H.59C0 9 0 8.59 0 8c0-.59 0-1 .59-1H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1h.01zm0-4H.59C0 5 0 4.59 0 4c0-.59 0-1 .59-1H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1h.01zM.59 11H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1H.59C0 13 0 12.59 0 12c0-.59 0-1 .59-1z"}}]})(e)}let t4=({barIcon:e=t2,className:t,theme:r={},...n})=>{let{isOpen:s,setIsOpen:a}=tZ(),l=_(S().theme.navbar.toggle,r),u=()=>{a(!s)};return(0,i.jsxs)("button",{"data-testid":"flowbite-navbar-toggle",onClick:u,className:o()(l.base,t),...n,children:[(0,i.jsx)("span",{className:"sr-only",children:"Open main menu"}),(0,i.jsx)(e,{"aria-hidden":!0,className:l.icon})]})},t9=({border:e,children:t,className:r,fluid:n=!1,menuOpen:s,rounded:l,theme:u={},...c})=>{let[h,d]=(0,a.useState)(s),f=_(S().theme.navbar.root,u);return(0,i.jsx)(tY.Provider,{value:{isOpen:h,setIsOpen:d},children:(0,i.jsx)("nav",{className:o()(f.base,f.bordered[e?"on":"off"],f.rounded[l?"on":"off"],r),...c,children:(0,i.jsx)("div",{className:o()(f.inner.base,f.inner.fluid[n?"on":"off"]),children:t})})})};t9.displayName="Navbar",tJ.displayName="Navbar.Brand",t0.displayName="Navbar.Collapse",t1.displayName="Navbar.Link",t4.displayName="Navbar.Toggle";let t5=Object.assign(t9,{Brand:tJ,Collapse:t0,Link:t1,Toggle:t4});var t6=(e,t)=>e>=t?[]:[...Array(t-e+1).keys()].map(t=>t+e);let t3=({active:e,children:t,className:r,onClick:n,theme:s={},...a})=>{let l=_(S().theme.pagination,s);return(0,i.jsx)("button",{className:o()({[l.pages.selector.active]:e},r),onClick:n,...a,children:t})};t3.displayName="Pagination.Button";var t7=t3;let t8=({className:e,currentPage:t,layout:r="pagination",nextLabel:n="Next",onPageChange:s,previousLabel:a="Previous",renderPaginationButton:l=e=>(0,i.jsx)(t7,{...e}),showIcons:u=!1,theme:c={},totalPages:h,...d})=>{let f=_(S().theme.pagination,c),g=Math.max(1,t-3),p=Math.min(t+3,h),b=()=>{s(Math.min(t+1,h))},v=()=>{s(Math.max(t-1,1))};return(0,i.jsxs)("nav",{className:o()(f.base,e),...d,children:["table"===r&&(0,i.jsxs)("div",{className:f.layout.table.base,children:["Showing ",(0,i.jsx)("span",{className:f.layout.table.span,children:g})," to\xa0",(0,i.jsx)("span",{className:f.layout.table.span,children:p})," of\xa0",(0,i.jsx)("span",{className:f.layout.table.span,children:h})," Entries"]}),(0,i.jsxs)("ul",{className:f.pages.base,children:[(0,i.jsx)("li",{children:l({className:o()(o()(f.pages.previous.base,u&&f.pages.showIcon)),onClick:v,children:(0,i.jsxs)(i.Fragment,{children:[u&&(0,i.jsx)(m,{"aria-hidden":!0,className:f.pages.previous.icon}),a]})})}),"pagination"===r&&t6(g,p).map(e=>(0,i.jsx)("li",{"aria-current":e===t?"page":void 0,children:l({className:o()(f.pages.selector.base,{[f.pages.selector.active]:t===e}),active:e===t,onClick:()=>s(e),children:e})},e)),(0,i.jsx)("li",{children:l({className:o()(f.pages.next.base,u&&f.pages.showIcon),onClick:b,children:(0,i.jsxs)(i.Fragment,{children:[n,u&&(0,i.jsx)(y,{"aria-hidden":!0,className:f.pages.next.icon})]})})})]})]})};t8.displayName="Pagination",Object.assign(t8,{Button:t7});let re=(0,a.forwardRef)(({className:e,theme:t={},...r},n)=>{let s=_(S().theme.radio,t);return(0,i.jsx)("input",{ref:n,type:"radio",className:o()(s.root.base,e),...r})});re.displayName="Radio";let rt=(0,a.forwardRef)(({className:e,sizing:t="md",theme:r={},...n},s)=>{let a=_(S().theme.rangeSlider,r);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{"data-testid":"flowbite-range-slider",className:o()(a.root.base,e),children:(0,i.jsx)("div",{className:a.field.base,children:(0,i.jsx)("input",{ref:s,type:"range",className:o()(a.field.input.base,a.field.input.sizes[t]),...n})})})})});rt.displayName="RangeSlider";let rr=({children:e,className:t,percentFilled:r=0,theme:n={},...s})=>{let a=_(S().theme.rating.advanced,n);return(0,i.jsxs)("div",{className:o()(a.base,t),...s,children:[(0,i.jsx)("span",{className:a.label,children:e}),(0,i.jsx)("div",{className:a.progress.base,children:(0,i.jsx)("div",{className:a.progress.fill,"data-testid":"flowbite-rating-fill",style:{width:`${r}%`}})}),(0,i.jsx)("span",{className:a.progress.label,children:`${r}%`})]})},rn=(0,a.createContext)(void 0),ri=({className:e,filled:t=!0,starIcon:r=b,theme:n={},...s})=>{let{size:l="sm"}=function(){let e=(0,a.useContext)(rn);if(!e)throw Error("useRatingContext should be used within the RatingContext provider!");return e}(),u=_(S().theme.rating.star,n);return(0,i.jsx)(r,{"data-testid":"flowbite-rating-star",className:o()(u.sizes[l],u[t?"filled":"empty"],e),...s})},rs=({children:e,className:t,size:r="sm",theme:n={},...s})=>{let a=_(S().theme.rating,n);return(0,i.jsx)(rn.Provider,{value:{size:r},children:(0,i.jsx)("div",{className:o()(a.root.base,t),...s,children:e})})};rs.displayName="Rating",ri.displayName="Rating.Star",rr.displayName="Rating.Advanced",Object.assign(rs,{Star:ri,Advanced:rr});let ro=(0,a.forwardRef)(({addon:e,children:t,className:r,color:n="gray",helperText:s,icon:a,shadow:l,sizing:u="md",theme:c={},...h},d)=>{let f=_(S().theme.select,c);return(0,i.jsxs)("div",{className:o()(f.base,r),children:[e&&(0,i.jsx)("span",{className:f.addon,children:e}),(0,i.jsxs)("div",{className:f.field.base,children:[a&&(0,i.jsx)("div",{className:f.field.icon.base,children:(0,i.jsx)(a,{className:f.field.icon.svg})}),(0,i.jsx)("select",{className:o()(f.field.select.base,f.field.select.colors[n],f.field.select.withIcon[a?"on":"off"],f.field.select.withAddon[e?"on":"off"],f.field.select.withShadow[l?"on":"off"],f.field.select.sizes[u]),...h,ref:d,children:t}),s&&(0,i.jsx)(tR,{color:n,children:s})]})]})});ro.displayName="Select";let ra=({animation:e="duration-300",arrow:t=!0,children:r,className:n,content:s,placement:o="top",style:a="dark",theme:l={},trigger:u="hover",...c})=>{let h=_(S().theme.tooltip,l);return(0,i.jsx)(tI,{animation:e,arrow:t,content:s,placement:o,style:a,theme:h,trigger:u,className:n,...c,children:r})},rl=(0,a.createContext)(void 0);function ru(){let e=(0,a.useContext)(rl);if(!e)throw Error("useSidebarContext should be used within the SidebarContext provider!");return e}let rc=(0,a.createContext)(void 0),rh=({children:e,className:t,icon:r,label:n,open:s=!1,theme:l={},...u})=>{let c=(0,a.useId)(),{isCollapsed:h}=ru(),[d,f]=(0,a.useState)(s),g=_(S().theme.sidebar.collapse,l);(0,a.useEffect)(()=>f(s),[s]);let m=({children:e})=>(0,i.jsx)("li",{children:h&&!d?(0,i.jsx)(ra,{content:n,placement:"right",children:e}):e});return(0,i.jsxs)(m,{children:[(0,i.jsxs)("button",{id:`flowbite-sidebar-collapse-${c}`,onClick:()=>f(!d),title:n,type:"button",className:o()(g.button,t),...u,children:[r&&(0,i.jsx)(r,{"aria-hidden":!0,"data-testid":"flowbite-sidebar-collapse-icon",className:o()(g.icon.base,g.icon.open[d?"on":"off"])}),h?(0,i.jsx)("span",{className:"sr-only",children:n}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{"data-testid":"flowbite-sidebar-collapse-label",className:g.label.base,children:n}),(0,i.jsx)(p,{"aria-hidden":!0,className:g.label.icon})]})]}),(0,i.jsx)("ul",{"aria-labelledby":`flowbite-sidebar-collapse-${c}`,hidden:!d,className:g.list,children:(0,i.jsx)(rc.Provider,{value:{isInsideCollapse:!0},children:e})})]})};rh.displayName="Sidebar.Collapse";let rd=({children:e,color:t="info",className:r,theme:n={},...s})=>{let{isCollapsed:a}=ru(),l=_(S().theme.sidebar.cta,n);return(0,i.jsx)("div",{"data-testid":"sidebar-cta",hidden:a,className:o()(l.base,l.color[t],r),...s,children:e})};rd.displayName="Sidebar.CTA";let rf=({id:e,isCollapsed:t,tooltipChildren:r,children:n})=>(0,i.jsx)("li",{children:t?(0,i.jsx)(ra,{content:(0,i.jsx)(rg,{id:e,children:r}),placement:"right",children:n}):n}),rg=({id:e,children:t})=>(0,i.jsx)(rp,{id:e,children:t}),rp=({id:e,children:t})=>{let r=S().theme.sidebar.item;return(0,i.jsx)("span",{"data-testid":"flowbite-sidebar-item-content",id:`flowbite-sidebar-item-${e}`,className:o()(r.content.base),children:t})},rm=(0,a.forwardRef)(({active:e,as:t="a",children:r,className:n,icon:s,label:l,labelColor:u="info",theme:c={},...h},d)=>{let f=(0,a.useId)(),{isCollapsed:g}=ru(),{isInsideCollapse:p}=function(){let e=(0,a.useContext)(rc);if(!e)throw Error("useSidebarItemContext should be used within the SidebarItemContext provider!");return e}(),m=_(S().theme.sidebar.item,c);return(0,i.jsx)(rf,{id:f,isCollapsed:g,tooltipChildren:r,children:(0,i.jsxs)(t,{"aria-labelledby":`flowbite-sidebar-item-${f}`,ref:d,className:o()(m.base,e&&m.active,!g&&p&&m.collapsed?.insideCollapse,n),...h,children:[s&&(0,i.jsx)(s,{"aria-hidden":!0,"data-testid":"flowbite-sidebar-item-icon",className:o()(m.icon?.base,e&&m.icon?.active)}),g&&!s&&(0,i.jsx)("span",{className:m.collapsed?.noIcon,children:r.charAt(0).toLocaleUpperCase()??"?"}),!g&&(0,i.jsx)(rp,{id:f,children:r}),!g&&l&&(0,i.jsx)(F,{color:u,"data-testid":"flowbite-sidebar-label",hidden:g,className:m.label,children:l})]})})});rm.displayName="Sidebar.Item";let ry=({children:e,className:t,...r})=>{let n=S().theme.sidebar.itemGroup;return(0,i.jsx)("ul",{"data-testid":"flowbite-sidebar-item-group",className:o()(n,t),...r,children:(0,i.jsx)(rc.Provider,{value:{isInsideCollapse:!1},children:e})})};ry.displayName="Sidebar.ItemGroup";let rb=({children:e,className:t,...r})=>{let n=S().theme.sidebar.items;return(0,i.jsx)("div",{className:o()(n,t),"data-testid":"flowbite-sidebar-items",...r,children:e})};rb.displayName="Sidebar.Items";let rv=({children:e,className:t,href:r,img:n,imgAlt:s="",theme:l={},...u})=>{let c=(0,a.useId)(),{isCollapsed:h}=ru(),d=_(S().theme.sidebar.logo,l);return(0,i.jsxs)("a",{"aria-labelledby":`flowbite-sidebar-logo-${c}`,href:r,className:o()(d.base,t),...u,children:[(0,i.jsx)("img",{alt:s,src:n,className:d.img}),(0,i.jsx)("span",{className:d.collapsed[h?"on":"off"],id:`flowbite-sidebar-logo-${c}`,children:e})]})};rv.displayName="Sidebar.Logo";let rw=({children:e,as:t="nav",collapseBehavior:r="collapse",collapsed:n=!1,theme:s={},className:a,...l})=>{let u=_(S().theme.sidebar,s);return(0,i.jsx)(rl.Provider,{value:{isCollapsed:n},children:(0,i.jsx)(t,{"aria-label":"Sidebar",hidden:n&&"hide"===r,className:o()(u.root.base,u.root.collapsed[n?"on":"off"],a),...l,children:(0,i.jsx)("div",{className:u.root.inner,children:e})})})};rw.displayName="Sidebar",Object.assign(rw,{Collapse:rh,CTA:rd,Item:rm,Items:rb,ItemGroup:ry,Logo:rv});let rx=({children:e,className:t})=>(0,i.jsx)("div",{className:t,children:e});rx.displayName="Tabs.Item";let rk=(0,a.forwardRef)(({children:e,className:t,onActiveTabChange:r,style:n="default",theme:s={},...l},u)=>{let c=_(S().theme.tab,s),h=(0,a.useId)(),d=(0,a.useMemo)(()=>a.Children.map(e,({props:e})=>e),[e]),f=(0,a.useRef)([]),[g,p]=(0,a.useState)(Math.max(0,d.findIndex(e=>e.active))),[m,y]=(0,a.useState)(-1),b=e=>{p(e),r&&r(e)},v=({target:e})=>{b(e),y(e)},w=({event:e,target:t})=>{"ArrowLeft"===e.key&&y(Math.max(0,m-1)),"ArrowRight"===e.key&&y(Math.min(d.length-1,m+1)),"Enter"===e.key&&(b(t),y(t))},x=c.tablist.tabitem.styles[n];return(0,a.useEffect)(()=>{f.current[m]?.focus()},[m]),(0,a.useImperativeHandle)(u,()=>({setActiveTab:b})),(0,i.jsxs)("div",{className:o()(c.base,t),children:[(0,i.jsx)("div",{"aria-label":"Tabs",role:"tablist",className:o()(c.tablist.base,c.tablist.styles[n],t),...l,children:d.map((e,t)=>(0,i.jsxs)("button",{type:"button","aria-controls":`${h}-tabpanel-${t}`,"aria-selected":t===g,className:o()(c.tablist.tabitem.base,{...x},{[x.active.on]:t===g,[x.active.off]:t!==g&&!e.disabled}),disabled:e.disabled,id:`${h}-tab-${t}`,onClick:()=>v({target:t}),onKeyDown:e=>w({event:e,target:t}),ref:e=>f.current[t]=e,role:"tab",tabIndex:t===m?0:-1,children:[e.icon&&(0,i.jsx)(e.icon,{className:c.tablist.tabitem.icon}),e.title]},t))}),(0,i.jsx)("div",{children:d.map((e,t)=>(0,i.jsx)("div",{"aria-labelledby":`${h}-tab-${t}`,className:c.tabpanel,hidden:t!==g,id:`${h}-tabpanel-${t}`,role:"tabpanel",tabIndex:0,children:e.children},t))})]})});rk.displayName="Tabs.Group";let rE=({children:e,className:t,theme:r={},...n})=>{let s=_(S().theme.table.body,r);return(0,i.jsx)("tbody",{className:o()(s.base,t),...n,children:e})},rT=({children:e,className:t,theme:r={},...n})=>{let s=_(S().theme.table.body.cell,r);return(0,i.jsx)("td",{className:o()(s.base,t),...n,children:e})},rI=(0,a.createContext)(void 0),r_=({children:e,className:t,theme:r={},...n})=>{let s=_(S().theme.table,r);return(0,i.jsx)("thead",{className:o()(s.head.base,t),...n,children:(0,i.jsx)("tr",{children:e})})},rC=({children:e,className:t,theme:r={},...n})=>{let s=_(S().theme.table.head.cell,r);return(0,i.jsx)("th",{className:o()(s.base,t),...n,children:e})},rS=({children:e,className:t,theme:r={},...n})=>{let{hoverable:s,striped:l}=function(){let e=(0,a.useContext)(rI);if(!e)throw Error("useTableContext should be used within the TableContext provider!");return e}(),u=_(S().theme.table.row,r);return(0,i.jsx)("tr",{"data-testid":"table-row-element",className:o()(u.base,l&&u.striped,s&&u.hovered,t),...n,children:e})},rN=({children:e,className:t,hoverable:r,striped:n,theme:s={},...a})=>{let l=_(S().theme.table,s);return(0,i.jsx)("div",{"data-testid":"table-element",className:o()(l.root.wrapper),children:(0,i.jsxs)(rI.Provider,{value:{striped:n,hoverable:r},children:[(0,i.jsx)("div",{className:o()(l.root.shadow,t)}),(0,i.jsx)("table",{className:o()(l.root.base,t),...a,children:e})]})})};rN.displayName="Table",r_.displayName="Table.Head",rE.displayName="Table.Body",rS.displayName="Table.Row",rT.displayName="Table.Cell",rC.displayName="Table.HeadCell",Object.assign(rN,{Head:r_,Body:rE,Row:rS,Cell:rT,HeadCell:rC});let rA=(0,a.forwardRef)(({className:e,color:t="gray",helperText:r,shadow:n,theme:s={},...a},l)=>{let u=_(S().theme.textarea,s);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("textarea",{ref:l,className:o()(u.base,u.colors[t],u.withShadow[n?"on":"off"],e),...a}),r&&(0,i.jsx)(tR,{color:t,children:r})]})});rA.displayName="Textarea";let rR=(0,a.forwardRef)(({addon:e,className:t,color:r="gray",helperText:n,icon:s,rightIcon:a,shadow:l,sizing:u="md",theme:c={},...h},d)=>{let f=_(S().theme.textInput,c);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:o()(f.base,t),children:[e&&(0,i.jsx)("span",{className:f.addon,children:e}),(0,i.jsxs)("div",{className:f.field.base,children:[s&&(0,i.jsx)("div",{className:f.field.icon.base,children:(0,i.jsx)(s,{className:f.field.icon.svg})}),a&&(0,i.jsx)("div",{"data-testid":"right-icon",className:f.field.rightIcon.base,children:(0,i.jsx)(a,{className:f.field.rightIcon.svg})}),(0,i.jsx)("input",{className:o()(f.field.input.base,f.field.input.colors[r],f.field.input.withIcon[s?"on":"off"],f.field.input.withAddon[e?"on":"off"],f.field.input.withShadow[l?"on":"off"],f.field.input.sizes[u]),...h,ref:d})]})]}),n&&(0,i.jsx)(tR,{color:r,children:n})]})});rR.displayName="TextInput";let rD=({children:e,className:t,theme:r={},...n})=>{let s=_(S().theme.timeline.item.content,r).body;return(0,i.jsx)("div",{className:o()(s,t),...n,children:e})},rO=(0,a.createContext)(void 0);function rL(){let e=(0,a.useContext)(rO);if(!e)throw Error("useTimelineContext should be used within the TimelineContext providor!");return e}let rP=({children:e,className:t,theme:r={},...n})=>{let s=_(S().theme.timeline.item.content,r),{horizontal:a}=rL();return(0,i.jsx)("div",{"data-testid":"timeline-content",className:o()(a&&s.root.base,t),...n,children:e})},rM=({children:e,className:t,theme:r={},...n})=>{let s=_(S().theme.timeline.item,r),{horizontal:a}=rL();return(0,i.jsx)("li",{"data-testid":"timeline-item",className:o()(a&&s.root.horizontal,!a&&s.root.vertical,t),...n,children:e})},rj=({children:e,className:t,icon:r,theme:n={},...s})=>{let a=_(S().theme.timeline.item.point,n),{horizontal:l}=rL();return(0,i.jsxs)("div",{"data-testid":"timeline-point",className:o()(l&&a.horizontal,!l&&a.vertical,t),...s,children:[e,r?(0,i.jsx)("span",{className:o()(a.marker.icon.wrapper),children:(0,i.jsx)(r,{"aria-hidden":!0,className:o()(a.marker.icon.base)})}):(0,i.jsx)("div",{className:o()(l&&a.marker.base.horizontal,!l&&a.marker.base.vertical)}),l&&(0,i.jsx)("div",{className:o()(a.line)})]})},rF=({children:e,className:t,theme:r={},...n})=>{let s=_(S().theme.timeline.item.content,r).time;return(0,i.jsx)("time",{className:o()(s,t),...n,children:e})},rU=({as:e="h3",children:t,className:r,theme:n={},...s})=>{let a=_(S().theme.timeline.item.content,n).title;return(0,i.jsx)(e,{className:o()(a,r),...s,children:t})},rV=({children:e,className:t,horizontal:r,theme:n={},...s})=>{let a=_(S().theme.timeline,n);return(0,i.jsx)(rO.Provider,{value:{horizontal:r},children:(0,i.jsx)("ol",{"data-testid":"timeline-component",className:o()(r&&a.root.direction.horizontal,!r&&a.root.direction.vertical,t),...s,children:e})})};rV.displayName="Timeline",rM.displayName="Timeline.Item",rj.displayName="Timeline.Point",rP.displayName="Timeline.Content",rF.displayName="Timeline.Time",rU.displayName="Timeline.Title",rD.displayName="Timeline.Body",Object.assign(rV,{Item:rM,Point:rj,Content:rP,Time:rF,Title:rU,Body:rD});let rB=(0,a.createContext)(void 0),rz=({className:e,onClick:t,theme:r={},xIcon:n=v,...s})=>{let l=_(S().theme.toast.toggle,r),{duration:u,isClosed:c,isRemoved:h,setIsClosed:d,setIsRemoved:f}=function(){let e=(0,a.useContext)(rB);if(!e)throw Error("useToastContext should be used within the ToastContext provider!");return e}(),g=e=>{t&&t(e),d(!c),setTimeout(()=>f(!h),u)};return(0,i.jsx)("button",{"aria-label":"Close",onClick:g,type:"button",className:o()(l.base,e),...s,children:(0,i.jsx)(n,{"aria-hidden":!0,className:l.icon})})},r$={75:"duration-75",100:"duration-100",150:"duration-150",200:"duration-200",300:"duration-300",500:"duration-500",700:"duration-700",1e3:"duration-1000"},rq=({children:e,className:t,duration:r=300,theme:n={},...s})=>{let[l,u]=(0,a.useState)(!1),[c,h]=(0,a.useState)(!1),d=_(S().theme.toast,n);return(0,i.jsx)(rB.Provider,{value:{duration:r,isClosed:l,isRemoved:c,setIsClosed:u,setIsRemoved:h},children:(0,i.jsx)("div",{"data-testid":"flowbite-toast",className:o()(d.root.base,r$[r],{[d.root.closed]:l},{[d.root.removed]:c},t),...s,children:e})})};rq.displayName="Toast",rz.displayName="Toast.Toggle",Object.assign(rq,{Toggle:rz})},3454:function(e,t,r){"use strict";var n,i;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(i=r.g.process)?void 0:i.env)?r.g.process:r(7663)},1118:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return r(1658)}])},3218:function(e,t,r){"use strict";r.d(t,{Z:function(){return m}});var n=r(5893),i=r(9008),s=r.n(i),o=r(7294),a=r(7008),l=r(5675),u=r.n(l),c=r(1664),h=r.n(c),d=r(841),f={src:"/_next/static/media/logo.1ad09579.png",height:719,width:1013,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAIAAABxZ0isAAAAoUlEQVR42gGWAGn/APz8/P7///z//v/g4/vj5/b9/f7///38/AD8/fzrw8uNqMLUlaXkaIDkcI7zwcf7//4A++TpulN+fXGflMDSvYuf5wBL5lBx/ePeAP/q5aiBk0+Or7TU4ciuu+MAVPdya/Tg3QD508pWXYNdncDp2d3f1NXjWH70NBb23tUA+fb30dTc1N3m6/D05+vw8s7V88bM/urle1NvmVuB/nIAAAAASUVORK5CYII=",blurWidth:8,blurHeight:6},g=r(7495),p=r(819);function m(e){let{children:t}=e,[r,i]=(0,o.useState)((0,p.hC)()),[l,c]=(0,o.useContext)(g.Fd),[m,y]=(0,o.useContext)(g.cL);return(0,d.Aj)((0,d.v0)(),e=>{e?i(!0):i(!1)}),(0,n.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,n.jsxs)(s(),{children:[(0,n.jsx)("title",{children:"Chtr.ai"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsx)("div",{className:"border-b-2 border-slate-500",children:(0,n.jsxs)(a.wp,{fluid:!0,rounded:!0,children:[(0,n.jsxs)(a.wp.Brand,{href:"/",children:[(0,n.jsx)(u(),{src:f,width:100,height:"auto",className:"mr-4",alt:"Chtr.ai Logo",priority:!0}),(0,n.jsx)("span",{className:"self-center whitespace-nowrap text-xl font-semibold dark:text-white",children:"Chtr.ai"})]}),(0,n.jsxs)("div",{className:"flex md:order-2",children:[(0,n.jsx)(p.cL,{isSignedIn:r,setIsSignedIn:i,children:"Sign In"}),(0,n.jsx)(a.wp.Toggle,{})]}),(0,n.jsxs)(a.wp.Collapse,{children:[(0,n.jsx)(h(),{href:"/",children:"Home"}),(0,n.jsx)(h(),{href:"/chat",children:"Chat"}),(0,n.jsx)(p.bh,{})]})]})}),(0,n.jsx)("div",{className:"",children:t}),(0,n.jsx)("div",{className:"border-t-2 border-slate-500",children:(0,n.jsxs)(a.$_,{container:!0,className:"flex",children:[(0,n.jsx)(a.$_.Copyright,{href:"#",by:"Chtr.ai",year:2022}),(0,n.jsxs)(a.$_.LinkGroup,{className:"ml-auto flex gap-4",children:[(0,n.jsx)(a.$_.Link,{href:"/site/about",children:"About"}),(0,n.jsx)(a.$_.Link,{href:"/site/licensing",children:"Licensing"}),(0,n.jsx)(a.$_.Link,{href:"/site/contact",children:"Contact"})]})]})})]})}},7495:function(e,t,r){"use strict";r.d(t,{Fd:function(){return s},V6:function(){return a},_y:function(){return l},cL:function(){return o}});var n=r(5893),i=r(7294);let s=(0,i.createContext)([]),o=(0,i.createContext)(null),a=(0,i.createContext)([]);function l(e){let{children:t}=e,[r,l]=(0,i.useState)(),[u,c]=(0,i.useState)([]),[h,d]=(0,i.useState)([]);return(0,n.jsx)(s.Provider,{value:[r,l],children:(0,n.jsx)(o.Provider,{value:[u,c],children:(0,n.jsx)(a.Provider,{value:[h,d],children:t})})})}},3991:function(e,t){"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{PrefetchKind:function(){return r},ACTION_REFRESH:function(){return i},ACTION_NAVIGATE:function(){return s},ACTION_RESTORE:function(){return o},ACTION_SERVER_PATCH:function(){return a},ACTION_PREFETCH:function(){return l},ACTION_FAST_REFRESH:function(){return u},ACTION_SERVER_ACTION:function(){return c}});let i="refresh",s="navigate",o="restore",a="server-patch",l="prefetch",u="fast-refresh",c="server-action";(n=r||(r={})).AUTO="auto",n.FULL="full",n.TEMPORARY="temporary",("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1516:function(e,t){"use strict";function r(e,t,r,n){return!1}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getDomainLocale",{enumerable:!0,get:function(){return r}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3740:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return b}});let n=r(8754),i=r(1757),s=i._(r(7294)),o=n._(r(2636)),a=r(7757),l=r(3735),u=r(3341);r(4210);let c=n._(r(7746)),h={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1};function d(e){return void 0!==e.default}function f(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function g(e,t,r,n,i,s,o){if(!e||e["data-loaded-src"]===t)return;e["data-loaded-src"]=t;let a="decode"in e?e.decode():Promise.resolve();a.catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("blur"===r&&s(!0),null==n?void 0:n.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let r=!1,i=!1;n.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>r,isPropagationStopped:()=>i,persist:()=>{},preventDefault:()=>{r=!0,t.preventDefault()},stopPropagation:()=>{i=!0,t.stopPropagation()}})}(null==i?void 0:i.current)&&i.current(e)}})}function p(e){let[t,r]=s.version.split("."),n=parseInt(t,10),i=parseInt(r,10);return n>18||18===n&&i>=3?{fetchPriority:e}:{fetchpriority:e}}let m=(0,s.forwardRef)((e,t)=>{let{imgAttributes:r,heightInt:n,widthInt:i,qualityInt:o,className:a,imgStyle:l,blurStyle:u,isLazy:c,fetchPriority:h,fill:d,placeholder:f,loading:m,srcString:y,config:b,unoptimized:v,loader:w,onLoadRef:x,onLoadingCompleteRef:k,setBlurComplete:E,setShowAltText:T,onLoad:I,onError:_,...C}=e;return m=c?"lazy":m,s.default.createElement("img",{...C,...p(h),loading:m,width:i,height:n,decoding:"async","data-nimg":d?"fill":"1",className:a,style:{...l,...u},...r,ref:(0,s.useCallback)(e=>{t&&("function"==typeof t?t(e):"object"==typeof t&&(t.current=e)),e&&(_&&(e.src=e.src),e.complete&&g(e,y,f,x,k,E,v))},[y,f,x,k,E,_,v,t]),onLoad:e=>{let t=e.currentTarget;g(t,y,f,x,k,E,v)},onError:e=>{T(!0),"blur"===f&&E(!0),_&&_(e)}})}),y=(0,s.forwardRef)((e,t)=>{var r;let n,i,{src:g,sizes:y,unoptimized:b=!1,priority:v=!1,loading:w,className:x,quality:k,width:E,height:T,fill:I,style:_,onLoad:C,onLoadingComplete:S,placeholder:N="empty",blurDataURL:A,fetchPriority:R,layout:D,objectFit:O,objectPosition:L,lazyBoundary:P,lazyRoot:M,...j}=e,F=(0,s.useContext)(u.ImageConfigContext),U=(0,s.useMemo)(()=>{let e=h||F||l.imageConfigDefault,t=[...e.deviceSizes,...e.imageSizes].sort((e,t)=>e-t),r=e.deviceSizes.sort((e,t)=>e-t);return{...e,allSizes:t,deviceSizes:r}},[F]),V=j.loader||c.default;delete j.loader;let B="__next_img_default"in V;if(B){if("custom"===U.loader)throw Error('Image with src "'+g+'" is missing "loader" prop.\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader')}else{let e=V;V=t=>{let{config:r,...n}=t;return e(n)}}if(D){"fill"===D&&(I=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[D];e&&(_={..._,...e});let t={responsive:"100vw",fill:"100vw"}[D];t&&!y&&(y=t)}let z="",$=f(E),q=f(T);if("object"==typeof(r=g)&&(d(r)||void 0!==r.src)){let e=d(g)?g.default:g;if(!e.src)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received "+JSON.stringify(e));if(!e.height||!e.width)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received "+JSON.stringify(e));if(n=e.blurWidth,i=e.blurHeight,A=A||e.blurDataURL,z=e.src,!I){if($||q){if($&&!q){let t=$/e.width;q=Math.round(e.height*t)}else if(!$&&q){let t=q/e.height;$=Math.round(e.width*t)}}else $=e.width,q=e.height}}let H=!v&&("lazy"===w||void 0===w);(!(g="string"==typeof g?g:z)||g.startsWith("data:")||g.startsWith("blob:"))&&(b=!0,H=!1),U.unoptimized&&(b=!0),B&&g.endsWith(".svg")&&!U.dangerouslyAllowSVG&&(b=!0),v&&(R="high");let[K,G]=(0,s.useState)(!1),[W,Q]=(0,s.useState)(!1),X=f(k),J=Object.assign(I?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:O,objectPosition:L}:{},W?{}:{color:"transparent"},_),Y="blur"===N&&A&&!K?{backgroundSize:J.objectFit||"cover",backgroundPosition:J.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:'url("data:image/svg+xml;charset=utf-8,'+(0,a.getImageBlurSvg)({widthInt:$,heightInt:q,blurWidth:n,blurHeight:i,blurDataURL:A,objectFit:J.objectFit})+'")'}:{},Z=function(e){let{config:t,src:r,unoptimized:n,width:i,quality:s,sizes:o,loader:a}=e;if(n)return{src:r,srcSet:void 0,sizes:void 0};let{widths:l,kind:u}=function(e,t,r){let{deviceSizes:n,allSizes:i}=e;if(r){let e=/(^|\s)(1?\d?\d)vw/g,t=[];for(let n;n=e.exec(r);n)t.push(parseInt(n[2]));if(t.length){let e=.01*Math.min(...t);return{widths:i.filter(t=>t>=n[0]*e),kind:"w"}}return{widths:i,kind:"w"}}if("number"!=typeof t)return{widths:n,kind:"w"};let s=[...new Set([t,2*t].map(e=>i.find(t=>t>=e)||i[i.length-1]))];return{widths:s,kind:"x"}}(t,i,o),c=l.length-1;return{sizes:o||"w"!==u?o:"100vw",srcSet:l.map((e,n)=>a({config:t,src:r,quality:s,width:e})+" "+("w"===u?e:n+1)+u).join(", "),src:a({config:t,src:r,quality:s,width:l[c]})}}({config:U,src:g,unoptimized:b,width:$,quality:X,sizes:y,loader:V}),ee=g,et=(0,s.useRef)(C);(0,s.useEffect)(()=>{et.current=C},[C]);let er=(0,s.useRef)(S);(0,s.useEffect)(()=>{er.current=S},[S]);let en={isLazy:H,imgAttributes:Z,heightInt:q,widthInt:$,qualityInt:X,className:x,imgStyle:J,blurStyle:Y,loading:w,config:U,fetchPriority:R,fill:I,unoptimized:b,placeholder:N,loader:V,srcString:ee,onLoadRef:et,onLoadingCompleteRef:er,setBlurComplete:G,setShowAltText:Q,...j};return s.default.createElement(s.default.Fragment,null,s.default.createElement(m,{...en,ref:t}),v?s.default.createElement(o.default,null,s.default.createElement("link",{key:"__nimg-"+Z.src+Z.srcSet+Z.sizes,rel:"preload",as:"image",href:Z.srcSet?void 0:Z.src,imageSrcSet:Z.srcSet,imageSizes:Z.sizes,crossOrigin:j.crossOrigin,...p(R)})):null)}),b=y;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5569:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return w}});let n=r(8754),i=n._(r(7294)),s=r(4532),o=r(3353),a=r(1410),l=r(9064),u=r(370),c=r(9955),h=r(4224),d=r(508),f=r(1516),g=r(4266),p=r(3991),m=new Set;function y(e,t,r,n,i,s){if(!s&&!(0,o.isLocalURL)(t))return;if(!n.bypassPrefetchedCheck){let i=void 0!==n.locale?n.locale:"locale"in e?e.locale:void 0,s=t+"%"+r+"%"+i;if(m.has(s))return;m.add(s)}let a=s?e.prefetch(t,i):e.prefetch(t,r,n);Promise.resolve(a).catch(e=>{})}function b(e){return"string"==typeof e?e:(0,a.formatUrl)(e)}let v=i.default.forwardRef(function(e,t){let r,n;let{href:a,as:m,children:v,prefetch:w=null,passHref:x,replace:k,shallow:E,scroll:T,locale:I,onClick:_,onMouseEnter:C,onTouchStart:S,legacyBehavior:N=!1,...A}=e;r=v,N&&("string"==typeof r||"number"==typeof r)&&(r=i.default.createElement("a",null,r));let R=!1!==w,D=null===w?p.PrefetchKind.AUTO:p.PrefetchKind.FULL,O=i.default.useContext(c.RouterContext),L=i.default.useContext(h.AppRouterContext),P=null!=O?O:L,M=!O,{href:j,as:F}=i.default.useMemo(()=>{if(!O){let e=b(a);return{href:e,as:m?b(m):e}}let[e,t]=(0,s.resolveHref)(O,a,!0);return{href:e,as:m?(0,s.resolveHref)(O,m):t||e}},[O,a,m]),U=i.default.useRef(j),V=i.default.useRef(F);N&&(n=i.default.Children.only(r));let B=N?n&&"object"==typeof n&&n.ref:t,[z,$,q]=(0,d.useIntersection)({rootMargin:"200px"}),H=i.default.useCallback(e=>{(V.current!==F||U.current!==j)&&(q(),V.current=F,U.current=j),z(e),B&&("function"==typeof B?B(e):"object"==typeof B&&(B.current=e))},[F,B,j,q,z]);i.default.useEffect(()=>{P&&$&&R&&y(P,j,F,{locale:I},{kind:D},M)},[F,j,$,I,R,null==O?void 0:O.locale,P,M,D]);let K={ref:H,onClick(e){N||"function"!=typeof _||_(e),N&&n.props&&"function"==typeof n.props.onClick&&n.props.onClick(e),P&&!e.defaultPrevented&&function(e,t,r,n,s,a,l,u,c,h){let{nodeName:d}=e.currentTarget,f="A"===d.toUpperCase();if(f&&(function(e){let t=e.currentTarget,r=t.getAttribute("target");return r&&"_self"!==r||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)||!c&&!(0,o.isLocalURL)(r)))return;e.preventDefault();let g=()=>{"beforePopState"in t?t[s?"replace":"push"](r,n,{shallow:a,locale:u,scroll:l}):t[s?"replace":"push"](n||r,{forceOptimisticNavigation:!h})};c?i.default.startTransition(g):g()}(e,P,j,F,k,E,T,I,M,R)},onMouseEnter(e){N||"function"!=typeof C||C(e),N&&n.props&&"function"==typeof n.props.onMouseEnter&&n.props.onMouseEnter(e),P&&(R||!M)&&y(P,j,F,{locale:I,priority:!0,bypassPrefetchedCheck:!0},{kind:D},M)},onTouchStart(e){N||"function"!=typeof S||S(e),N&&n.props&&"function"==typeof n.props.onTouchStart&&n.props.onTouchStart(e),P&&(R||!M)&&y(P,j,F,{locale:I,priority:!0,bypassPrefetchedCheck:!0},{kind:D},M)}};if((0,l.isAbsoluteUrl)(F))K.href=F;else if(!N||x||"a"===n.type&&!("href"in n.props)){let e=void 0!==I?I:null==O?void 0:O.locale,t=(null==O?void 0:O.isLocaleDomain)&&(0,f.getDomainLocale)(F,e,null==O?void 0:O.locales,null==O?void 0:O.domainLocales);K.href=t||(0,g.addBasePath)((0,u.addLocale)(F,e,null==O?void 0:O.defaultLocale))}return N?i.default.cloneElement(n,K):i.default.createElement("a",{...A,...K},r)}),w=v;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},508:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useIntersection",{enumerable:!0,get:function(){return l}});let n=r(7294),i=r(29),s="function"==typeof IntersectionObserver,o=new Map,a=[];function l(e){let{rootRef:t,rootMargin:r,disabled:l}=e,u=l||!s,[c,h]=(0,n.useState)(!1),d=(0,n.useRef)(null),f=(0,n.useCallback)(e=>{d.current=e},[]);(0,n.useEffect)(()=>{if(s){if(u||c)return;let e=d.current;if(e&&e.tagName){let n=function(e,t,r){let{id:n,observer:i,elements:s}=function(e){let t;let r={root:e.root||null,margin:e.rootMargin||""},n=a.find(e=>e.root===r.root&&e.margin===r.margin);if(n&&(t=o.get(n)))return t;let i=new Map,s=new IntersectionObserver(e=>{e.forEach(e=>{let t=i.get(e.target),r=e.isIntersecting||e.intersectionRatio>0;t&&r&&t(r)})},e);return t={id:r,observer:s,elements:i},a.push(r),o.set(r,t),t}(r);return s.set(e,t),i.observe(e),function(){if(s.delete(e),i.unobserve(e),0===s.size){i.disconnect(),o.delete(n);let e=a.findIndex(e=>e.root===n.root&&e.margin===n.margin);e>-1&&a.splice(e,1)}}}(e,e=>e&&h(e),{root:null==t?void 0:t.current,rootMargin:r});return n}}else if(!c){let e=(0,i.requestIdleCallback)(()=>h(!0));return()=>(0,i.cancelIdleCallback)(e)}},[u,r,t,c,d.current]);let g=(0,n.useCallback)(()=>{h(!1)},[]);return[f,c,g]}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7757:function(e,t){"use strict";function r(e){let{widthInt:t,heightInt:r,blurWidth:n,blurHeight:i,blurDataURL:s,objectFit:o}=e,a=n||t,l=i||r,u=s.startsWith("data:image/jpeg")?"%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'/%3E%3C/feComponentTransfer%3E%":"";return a&&l?"%3Csvg xmlns='http%3A//www.w3.org/2000/svg' viewBox='0 0 "+a+" "+l+"'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='"+(n&&i?"1":"20")+"'/%3E"+u+"%3C/filter%3E%3Cimage preserveAspectRatio='none' filter='url(%23b)' x='0' y='0' height='100%25' width='100%25' href='"+s+"'/%3E%3C/svg%3E":"%3Csvg xmlns='http%3A//www.w3.org/2000/svg'%3E%3Cimage style='filter:blur(20px)' preserveAspectRatio='"+("contain"===o?"xMidYMid":"cover"===o?"xMidYMid slice":"none")+"' x='0' y='0' height='100%25' width='100%25' href='"+s+"'/%3E%3C/svg%3E"}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImageBlurSvg",{enumerable:!0,get:function(){return r}})},7746:function(e,t){"use strict";function r(e){let{config:t,src:r,width:n,quality:i}=e;return t.path+"?url="+encodeURIComponent(r)+"&w="+n+"&q="+(i||75)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}}),r.__next_img_default=!0;let n=r},1658:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var n=r(5893);r(3814);var i=r(5816);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(0,i.KN)("firebase","9.21.0","app");var s=r(6100);r(9614);var o=r(993),a=r(3218),l=r(7495),u=r(7294),c=r(9359),h=r(819);function d(e){let{children:t}=e,[r,i]=(0,u.useContext)(l.Fd),[s,o]=(0,u.useContext)(l.cL),[a,d]=(0,u.useContext)(l.V6),[f,g]=(0,u.useState)(),p=(0,u.useRef)(),m=(0,u.useRef)();function y(e,t){let r=JSON.parse(JSON.stringify(m.current));for(let n=0;n<r.length;n++)t===r[n].chatroom&&r[n].messages.push(e);let n=JSON.parse(JSON.stringify(p.current));n.forEach(r=>{t===r.name&&(r.message=e.text)}),o(n),d(r)}function b(e){e!==f&&g(e)}return p.current=s,m.current=a,(0,u.useEffect)(()=>{(0,c.Uu)(d,s)},[f]),(0,u.useEffect)(()=>{(0,c.ef)(a,d,s,y,m)},[s]),(0,u.useEffect)(()=>{(0,c.zg)(i,o),(0,h.YY)(b)},[]),(0,n.jsx)("div",{children:t})}let f=(0,i.ZF)({apiKey:"AIzaSyAHS_X7Q1rULMSCbM4cfnEW2PAHHfbXxqo",authDomain:"chtr-ai.firebaseapp.com",projectId:"chtr-ai",storageBucket:"chtr-ai.appspot.com",messagingSenderId:"278233786948",appId:"1:278233786948:web:58e13b66dfba0783d9aa11",measurementId:"G-499B3ET4X6"});function g(e){let{Component:t,pageProps:r}=e;return(0,o.JR)(),(0,n.jsx)(l._y,{children:(0,n.jsx)(d,{children:(0,n.jsxs)(a.Z,{children:[(0,n.jsx)("link",{rel:"stylesheet",href:"https://rsms.me/inter/inter.css"}),(0,n.jsx)(t,{...r})]})})})}(0,s.ad)(f)},819:function(e,t,r){"use strict";r.d(t,{LE:function(){return c},VN:function(){return u},YY:function(){return o},bh:function(){return f},cL:function(){return d},hC:function(){return h}});var n=r(5893),i=r(7008),s=r(841);function o(e){let t=[];-1===t.indexOf(e)&&t.push(e),(0,s.Aj)((0,s.v0)(),e=>{e?t.forEach(e=>{e(!0)}):t.forEach(e=>{e(!1)})})}async function a(){let e=new s.hJ;try{await (0,s.rh)((0,s.v0)(),e)}catch(e){console.error(e)}}function l(){(0,s.w7)((0,s.v0)())}function u(){return h()?(0,s.v0)().currentUser.uid:""}function c(){return h()?(0,s.v0)().currentUser:""}function h(){return!!(0,s.v0)().currentUser}function d(e){let{isSignedIn:t}=e;return t?(0,n.jsx)("div",{children:(0,n.jsx)(i.zx,{type:"button",onClick:l,children:"Sign Out"})}):(0,n.jsx)("div",{children:(0,n.jsx)(i.zx,{type:"button",onClick:a,children:"Sign in"})})}function f(){return h?(0,n.jsx)(i.wp.Link,{href:"/",children:h()?(0,s.v0)().currentUser.displayName:null}):null}},9359:function(e,t,r){"use strict";r.d(t,{Uu:function(){return a},ef:function(){return o},zg:function(){return s}});var n=r(993);async function i(e){let t=[],r=await (0,n.BB)();for(let e=0;e<r.length;e++){var i,s;let o=await (0,n._U)(r[e],void 0,1);t.push({name:r[e],message:null===(i=o[0])||void 0===i?void 0:i.text,id:null===(s=o[0])||void 0===s?void 0:s.id})}return e(t),t}async function s(e,t){i(t).then(t=>{var r;return e(null===(r=t[0])||void 0===r?void 0:r.name)},e=>console.error("Couldn't identify default chat",e))}async function o(e,t,r,i,s){if(0===e.length){for(let e=0;e<r.length;e++)(0,n.OP)(r).then(e=>{t(e)},e=>console.error("Couldn't retrieve messages",e));(0,n.CT)(r,i,s.current)}}async function a(e,t){for(let r=0;r<t.length;r++)(0,n.OP)(t).then(t=>{e(t)},e=>console.error("Couldn't retrieve messages",e))}},993:function(e,t,r){"use strict";r.d(t,{BB:function(){return a},CT:function(){return h},JR:function(){return f},OP:function(){return c},_U:function(){return u},oi:function(){return d}});var n=r(819),i=r(6100);let s="test";async function o(){try{await (0,i.pl)((0,i.JU)((0,i.hJ)((0,i.ad)(),"time"),"time"),{date:(0,i.Bt)()});let e=(await (0,i.QT)((0,i.JU)((0,i.hJ)((0,i.ad)(),"time"),"time"))).data().date;return e}catch(e){return console.error("Error retrieving current server time",e),i.EK.now()}}async function a(){let e;let t=(0,i.JU)((0,i.ad)(),"public-chatrooms","testList");try{e=await (0,i.QT)(t)}catch(e){console.error("Error retrieving list of chatroomns",e)}return e.data().rooms}async function l(e,t,r){let n=(await p(e.author)).name,i={type:"text",title:n,text:String(e.message),posted:e.posted.toDate(),author:e.author,id:t};return e.author===r?i.position="right":i.position="left",i}async function u(e,t){let r,a,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;if(!e)return[];if(t)r=t;else try{r=await o()}catch(e){console.error("Error retrieving current server time",e)}let c=(0,i.IO)((0,i.hJ)((0,i.ad)(),"public-chatrooms/".concat(s,"/").concat(e)),(0,i.ar)("posted","<",r),(0,i.Xo)("posted","desc"),(0,i.b9)(u));try{a=await (0,i.PL)(c)}catch(e){console.error("Error retrieving messages",e)}let h=[],d=(0,n.VN)();for(let e=0;e<a.docs.length;e++){let t=a.docs[e].data(),r=await l(t,a.docs[e].id,d);h.unshift(r)}return h}async function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;if(!e)return[];let r=await o(),a=[];for(let o=0;o<e.length;o++){let u;let c=(0,i.IO)((0,i.hJ)((0,i.ad)(),"public-chatrooms/".concat(s,"/").concat(e[o].name)),(0,i.ar)("posted","<",r),(0,i.Xo)("posted","desc"),(0,i.b9)(t));try{u=await (0,i.PL)(c)}catch(e){console.error("Error retrieving messages",e)}let h=[],d=(0,n.VN)();for(let e=0;e<u.docs.length;e++){let t=u.docs[e].data(),r=await l(t,u.docs[e].id,d);h.unshift(r)}a.push({chatroom:e[o].name,messages:h})}return a}async function h(e,t){if(!e)return;let r=await o();for(let a=0;a<e.length;a++){let u=(0,i.IO)((0,i.hJ)((0,i.ad)(),"public-chatrooms/".concat(s,"/").concat(e[a].name)),(0,i.ar)("posted",">",r),(0,i.Xo)("posted","desc"));(0,i.cf)(u,async i=>{let s;let u=(0,n.VN)();i.docs.length>0&&(s=await l(i.docs[0].data(),i.docs[0].id,u)),r=o(),s&&t(s,e[a].name)})}}async function d(e,t){try{if((0,n.hC)()){let r=(0,n.VN)(),o=(0,i.hJ)((0,i.ad)(),"public-chatrooms/".concat(s,"/").concat(e));await (0,i.ET)(o,{message:t,chatroom:e,posted:(0,i.Bt)(),author:r})}}catch(e){console.error("Error posting message",e)}}async function f(){try{if((0,n.hC)()){let e=(0,n.VN)(),t=(0,n.LE)(),r=(0,i.hJ)((0,i.ad)(),"users");await (0,i.pl)((0,i.JU)(r,e),{name:t.displayName,pic:t.photoURL,lastUpdated:(0,i.Bt)()})}}catch(e){console.error("Error saving user profile",e)}}let g=[];async function p(e){if(!e)return{name:"Error",pic:""};let t=g.filter(t=>t.uid===e);if(t.length>0)return t[0];try{let t=(await (0,i.QT)((0,i.JU)((0,i.ad)(),"users",e))).data(),r={name:t.name,pic:t.pic,uid:e};return g.push(r),g.length>100&&g.shift(),r}catch(e){console.error("Error retrieving user data",e)}}},9614:function(){},3814:function(){},7663:function(e){!function(){var t={229:function(e){var t,r,n,i=e.exports={};function s(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var l=[],u=!1,c=-1;function h(){u&&n&&(u=!1,n.length?l=n.concat(l):c=-1,l.length&&d())}function d(){if(!u){var e=a(h);u=!0;for(var t=l.length;t;){for(n=l,l=[];++c<t;)n&&n[c].run();c=-1,t=l.length}n=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new f(e,t)),1!==l.length||u||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var s=r[e]={exports:{}},o=!0;try{t[e](s,s.exports,n),o=!1}finally{o&&delete r[e]}return s.exports}n.ab="//";var i=n(229);e.exports=i}()},9008:function(e,t,r){e.exports=r(2636)},5675:function(e,t,r){e.exports=r(3740)},1664:function(e,t,r){e.exports=r(5569)},5816:function(e,t,r){"use strict";let n,i;r.d(t,{Jn:function(){return L},qX:function(){return R},Xd:function(){return A},Mq:function(){return M},ZF:function(){return P},KN:function(){return j}});var s,o=r(740),a=r(3333),l=r(4444);let u=(e,t)=>t.some(t=>e instanceof t),c=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,g=new WeakMap,p={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return h.get(e);if("objectStoreNames"===t)return e.objectStoreNames||d.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return m(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function m(e){var t;if(e instanceof IDBRequest)return function(e){let t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(m(e.result)),n()},s=()=>{r(e.error),n()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&c.set(t,e)}).catch(()=>{}),g.set(t,e),t}(e);if(f.has(e))return f.get(e);let r="function"==typeof(t=e)?t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(y(this),e),m(c.get(this))}:function(...e){return m(t.apply(y(this),e))}:function(e,...r){let n=t.call(y(this),e,...r);return d.set(n,e.sort?e.sort():[e]),m(n)}:(t instanceof IDBTransaction&&function(e){if(h.has(e))return;let t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),n()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});h.set(e,t)}(t),u(t,n||(n=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(t,p):t;return r!==e&&(f.set(e,r),g.set(r,e)),r}let y=e=>g.get(e),b=["get","getKey","getAll","getAllKeys","count"],v=["put","add","delete","clear"],w=new Map;function x(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(w.get(t))return w.get(t);let r=t.replace(/FromIndex$/,""),n=t!==r,i=v.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||b.includes(r)))return;let s=async function(e,...t){let s=this.transaction(e,i?"readwrite":"readonly"),o=s.store;return n&&(o=o.index(t.shift())),(await Promise.all([o[r](...t),i&&s.done]))[0]};return w.set(t,s),s}p={...s=p,get:(e,t,r)=>x(e,t)||s.get(e,t,r),has:(e,t)=>!!x(e,t)||s.has(e,t)};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k{constructor(e){this.container=e}getPlatformInfoString(){let e=this.container.getProviders();return e.map(e=>{if(!function(e){let t=e.getComponent();return(null==t?void 0:t.type)==="VERSION"}(e))return null;{let t=e.getImmediate();return`${t.library}/${t.version}`}}).filter(e=>e).join(" ")}}let E="@firebase/app",T="0.9.9",I=new a.Yd("@firebase/app"),_="[DEFAULT]",C={[E]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},S=new Map,N=new Map;function A(e){let t=e.name;if(N.has(t))return I.debug(`There were multiple attempts to register component ${t}.`),!1;for(let r of(N.set(t,e),S.values()))!function(e,t){try{e.container.addComponent(t)}catch(r){I.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}(r,e);return!0}function R(e,t){let r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}let D=new l.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new o.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw D.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let L="9.21.0";function P(e,t={}){let r=e;if("object"!=typeof t){let e=t;t={name:e}}let n=Object.assign({name:_,automaticDataCollectionEnabled:!1},t),i=n.name;if("string"!=typeof i||!i)throw D.create("bad-app-name",{appName:String(i)});if(r||(r=(0,l.aH)()),!r)throw D.create("no-options");let s=S.get(i);if(s){if((0,l.vZ)(r,s.options)&&(0,l.vZ)(n,s.config))return s;throw D.create("duplicate-app",{appName:i})}let a=new o.H0(i);for(let e of N.values())a.addComponent(e);let u=new O(r,n,a);return S.set(i,u),u}function M(e=_){let t=S.get(e);if(!t&&e===_)return P();if(!t)throw D.create("no-app",{appName:e});return t}function j(e,t,r){var n;let i=null!==(n=C[e])&&void 0!==n?n:e;r&&(i+=`-${r}`);let s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){let e=[`Unable to register library "${i}" with version "${t}":`];s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),I.warn(e.join(" "));return}A(new o.wA(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}let F="firebase-heartbeat-store",U=null;function V(){return U||(U=(function(e,t,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){let o=indexedDB.open(e,1),a=m(o);return n&&o.addEventListener("upgradeneeded",e=>{n(m(o.result),e.oldVersion,e.newVersion,m(o.transaction),e)}),r&&o.addEventListener("blocked",e=>r(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a})("firebase-heartbeat-database",0,{upgrade:(e,t)=>{0===t&&e.createObjectStore(F)}}).catch(e=>{throw D.create("idb-open",{originalErrorMessage:e.message})})),U}async function B(e){try{let t=await V();return t.transaction(F).objectStore(F).get($(e))}catch(e){if(e instanceof l.ZR)I.warn(e.message);else{let t=D.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});I.warn(t.message)}}}async function z(e,t){try{let r=await V(),n=r.transaction(F,"readwrite"),i=n.objectStore(F);return await i.put(t,$(e)),n.done}catch(e){if(e instanceof l.ZR)I.warn(e.message);else{let t=D.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});I.warn(t.message)}}}function $(e){return`${e.name}!${e.options.appId}`}class q{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new K(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){let e=this.container.getProvider("platform-logger").getImmediate(),t=e.getPlatformInfoString(),r=H();return(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))?void 0:(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{let t=new Date(e.date).valueOf(),r=Date.now();return r-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache))}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";let e=H(),{heartbeatsToSend:t,unsentEntries:r}=function(e,t=1024){let r=[],n=e.slice();for(let i of e){let e=r.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),G(r)>t){e.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),G(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}(this._heartbeatsCache.heartbeats),n=(0,l.L)(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),n}}function H(){let e=new Date;return e.toISOString().substring(0,10)}class K{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,l.hl)()&&(0,l.eu)().then(()=>!0).catch(()=>!1)}async read(){let e=await this._canUseIndexedDBPromise;if(!e)return{heartbeats:[]};{let e=await B(this.app);return e||{heartbeats:[]}}}async overwrite(e){var t;let r=await this._canUseIndexedDBPromise;if(r){let r=await this.read();return z(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;let r=await this._canUseIndexedDBPromise;if(r){let r=await this.read();return z(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}}}function G(e){return(0,l.L)(JSON.stringify({version:2,heartbeats:e})).length}A(new o.wA("platform-logger",e=>new k(e),"PRIVATE")),A(new o.wA("heartbeat",e=>new q(e),"PRIVATE")),j(E,T,""),j(E,T,"esm2017"),j("fire-js","")},740:function(e,t,r){"use strict";r.d(t,{H0:function(){return a},wA:function(){return i}});var n=r(4444);class i{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let s="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new n.BH;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&e.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),n=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(e){if(n)return null;throw e}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:s})}catch(e){}for(let[e,t]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:r});t.resolve(e)}catch(e){}}}}clearInstance(e=s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=s){return this.instances.has(e)}getOptions(e=s){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let n=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[e,t]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(e);r===i&&t.resolve(n)}return n}onInit(e,t){var r;let n=this.normalizeInstanceIdentifier(t),i=null!==(r=this.onInitCallbacks.get(n))&&void 0!==r?r:new Set;i.add(e),this.onInitCallbacks.set(n,i);let s=this.instances.get(n);return s&&e(s,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let n of r)try{n(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:e===s?void 0:e,options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(e){}return r||null}normalizeInstanceIdentifier(e=s){return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){let t=this.getProvider(e.name);t.isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},3333:function(e,t,r){"use strict";var n,i;r.d(t,{Yd:function(){return c},in:function(){return n}});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let s=[];(i=n||(n={}))[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT";let o={debug:n.DEBUG,verbose:n.VERBOSE,info:n.INFO,warn:n.WARN,error:n.ERROR,silent:n.SILENT},a=n.INFO,l={[n.DEBUG]:"log",[n.VERBOSE]:"log",[n.INFO]:"info",[n.WARN]:"warn",[n.ERROR]:"error"},u=(e,t,...r)=>{if(t<e.logLevel)return;let n=new Date().toISOString(),i=l[t];if(i)console[i](`[${n}]  ${e.name}:`,...r);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class c{constructor(e){this.name=e,this._logLevel=a,this._logHandler=u,this._userLogHandler=null,s.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in n))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?o[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,n.DEBUG,...e),this._logHandler(this,n.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,n.VERBOSE,...e),this._logHandler(this,n.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,n.INFO,...e),this._logHandler(this,n.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,n.WARN,...e),this._logHandler(this,n.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,n.ERROR,...e),this._logHandler(this,n.ERROR,...e)}}},841:function(e,t,r){"use strict";r.d(t,{hJ:function(){return ez},v0:function(){return t4},Aj:function(){return eY},rh:function(){return tv},w7:function(){return eZ}});var n,i=r(4444),s=r(5816);function o(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}var a=r(3333),l=r(740);function u(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}let c=new i.LL("auth","Firebase",u()),h=new a.Yd("@firebase/auth");function d(e,...t){h.logLevel<=a.in.ERROR&&h.error(`Auth (${s.Jn}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f(e,...t){throw m(e,...t)}function g(e,...t){return m(e,...t)}function p(e,t,r){let n=Object.assign(Object.assign({},u()),{[t]:r}),s=new i.LL("auth","Firebase",n);return s.create(t,{appName:e.name})}function m(e,...t){if("string"!=typeof e){let r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return c.create(e,...t)}function y(e,t,...r){if(!e)throw m(t,...r)}function b(e){let t="INTERNAL ASSERTION FAILED: "+e;throw d(t),Error(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function w(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x{constructor(e,t){this.shortDelay=e,this.longDelay=t,t>e||b("Short delay should be less than long delay!"),this.isMobile=(0,i.uI)()||(0,i.b$)()}get(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===w()||"https:"===w()||(0,i.ru)()||"connection"in navigator))||navigator.onLine?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k(e,t){e.emulator||b("Emulator should always be set here");let{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void b("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void b("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void b("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let T={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},I=new x(3e4,6e4);function _(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function C(e,t,r,n,s={}){return S(e,s,async()=>{let s={},o={};n&&("GET"===t?o=n:s={body:JSON.stringify(n)});let a=(0,i.xO)(Object.assign({key:e.config.apiKey},o)).slice(1),l=await e._getAdditionalHeaders();return l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode),E.fetch()(A(e,e.config.apiHost,r,a),Object.assign({method:t,headers:l,referrerPolicy:"no-referrer"},s))})}async function S(e,t,r){e._canInitEmulator=!1;let n=Object.assign(Object.assign({},T),t);try{let t=new R(e),i=await Promise.race([r(),t.promise]);t.clearNetworkTimeout();let s=await i.json();if("needConfirmation"in s)throw D(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{let t=i.ok?s.errorMessage:s.error.message,[r,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===r)throw D(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===r)throw D(e,"email-already-in-use",s);if("USER_DISABLED"===r)throw D(e,"user-disabled",s);let a=n[r]||r.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw p(e,a,o);f(e,a)}}catch(t){if(t instanceof i.ZR)throw t;f(e,"network-request-failed",{message:String(t)})}}async function N(e,t,r,n,i={}){let s=await C(e,t,r,n,i);return"mfaPendingCredential"in s&&f(e,"multi-factor-auth-required",{_serverResponse:s}),s}function A(e,t,r,n){let i=`${t}${r}?${n}`;return e.config.emulator?k(e.config,i):`${e.config.apiScheme}://${i}`}class R{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(g(this.auth,"network-request-failed")),I.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function D(e,t,r){let n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);let i=g(e,t,n);return i.customData._tokenResponse=r,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O(e,t){return C(e,"POST","/v1/accounts:delete",t)}async function L(e,t){return C(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}async function M(e,t=!1){let r=(0,i.m9)(e),n=await r.getIdToken(t),s=F(n);y(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");let o="object"==typeof s.firebase?s.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:s,token:n,authTime:P(j(s.auth_time)),issuedAtTime:P(j(s.iat)),expirationTime:P(j(s.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}}function j(e){return 1e3*Number(e)}function F(e){let[t,r,n]=e.split(".");if(void 0===t||void 0===r||void 0===n)return d("JWT malformed, contained fewer than 3 sections"),null;try{let e=(0,i.tV)(r);if(!e)return d("Failed to decode base64 JWT payload"),null;return JSON.parse(e)}catch(e){return d("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U(e,t,r=!1){if(r)return t;try{return await t}catch(t){throw t instanceof i.ZR&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;let e=null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0,r=e-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(null==e?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=P(this.lastLoginAt),this.creationTime=P(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z(e){var t;let r=e.auth,n=await e.getIdToken(),i=await U(e,L(r,{idToken:n}));y(null==i?void 0:i.users.length,r,"internal-error");let s=i.users[0];e._notifyReloadListener(s);let a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map(e=>{var{providerId:t}=e,r=o(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}}):[],l=function(e,t){let r=e.filter(e=>!t.some(t=>t.providerId===e.providerId));return[...r,...t]}(e.providerData,a),u=e.isAnonymous,c=!(e.email&&s.passwordHash)&&!(null==l?void 0:l.length),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new B(s.createdAt,s.lastLoginAt),isAnonymous:!!u&&c};Object.assign(e,h)}async function $(e){let t=(0,i.m9)(e);await z(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q(e,t){let r=await S(e,{},async()=>{let r=(0,i.xO)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:n,apiKey:s}=e.config,o=A(e,n,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",E.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){y(e.idToken,"internal-error"),y(void 0!==e.idToken,"internal-error"),y(void 0!==e.refreshToken,"internal-error");let t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){let t=F(e);return y(t,"internal-error"),y(void 0!==t.exp,"internal-error"),y(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return(y(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired)?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:n,expiresIn:i}=await q(e,t);this.updateTokensAndExpiration(r,n,Number(i))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){let{refreshToken:r,accessToken:n,expirationTime:i}=t,s=new H;return r&&(y("string"==typeof r,"internal-error",{appName:e}),s.refreshToken=r),n&&(y("string"==typeof n,"internal-error",{appName:e}),s.accessToken=n),i&&(y("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new H,this.toJSON())}_performRefresh(){return b("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(e,t){y("string"==typeof e||void 0===e,"internal-error",{appName:t})}class G{constructor(e){var{uid:t,auth:r,stsTokenManager:n}=e,i=o(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new V(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new B(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await U(this,this.stsTokenManager.getToken(this.auth,e));return y(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return M(this,e)}reload(){return $(this)}_assign(e){this!==e&&(y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new G(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await z(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){let e=await this.getIdToken();return await U(this,O(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,n,i,s,o,a,l,u;let c=null!==(r=t.displayName)&&void 0!==r?r:void 0,h=null!==(n=t.email)&&void 0!==n?n:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,g=null!==(o=t.tenantId)&&void 0!==o?o:void 0,p=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,b=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:w,isAnonymous:x,providerData:k,stsTokenManager:E}=t;y(v&&E,e,"internal-error");let T=H.fromJSON(this.name,E);y("string"==typeof v,e,"internal-error"),K(c,e.name),K(h,e.name),y("boolean"==typeof w,e,"internal-error"),y("boolean"==typeof x,e,"internal-error"),K(d,e.name),K(f,e.name),K(g,e.name),K(p,e.name),K(m,e.name),K(b,e.name);let I=new G({uid:v,auth:e,email:h,emailVerified:w,displayName:c,isAnonymous:x,photoURL:f,phoneNumber:d,tenantId:g,stsTokenManager:T,createdAt:m,lastLoginAt:b});return k&&Array.isArray(k)&&(I.providerData=k.map(e=>Object.assign({},e))),p&&(I._redirectEventId=p),I}static async _fromIdTokenResponse(e,t,r=!1){let n=new H;n.updateFromServerResponse(t);let i=new G({uid:t.localId,auth:e,stsTokenManager:n,isAnonymous:r});return await z(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let W=new Map;function Q(e){e instanceof Function||b("Expected a class definition");let t=W.get(e);return t?(t instanceof e||b("Instance stored in cache mismatched with class"),t):(t=new e,W.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(e,t,r){return`firebase:${e}:${t}:${r}`}X.type="NONE";class Y{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:n,name:i}=this.auth;this.fullUserKey=J(this.userKey,n.apiKey,i),this.fullPersistenceKey=J("persistence",n.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);return e?G._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Y(Q(X),e,r);let n=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),i=n[0]||Q(X),s=J(r,e.config.apiKey,e.name),o=null;for(let r of t)try{let t=await r._get(s);if(t){let n=G._fromJSON(e,t);r!==i&&(o=n),i=r;break}}catch(e){}let a=n.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length&&(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(e){}}))),new Y(i,e,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(en(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";{if(t.includes("edge/"))return"Edge";if(ee(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(es(t))return"Blackberry";if(eo(t))return"Webos";if(et(t))return"Safari";if((t.includes("chrome/")||er(t))&&!t.includes("edge/"))return"Chrome";if(ei(t))return"Android";let r=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if((null==r?void 0:r.length)===2)return r[1]}return"Other"}function ee(e=(0,i.z$)()){return/firefox\//i.test(e)}function et(e=(0,i.z$)()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function er(e=(0,i.z$)()){return/crios\//i.test(e)}function en(e=(0,i.z$)()){return/iemobile/i.test(e)}function ei(e=(0,i.z$)()){return/android/i.test(e)}function es(e=(0,i.z$)()){return/blackberry/i.test(e)}function eo(e=(0,i.z$)()){return/webos/i.test(e)}function ea(e=(0,i.z$)()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function el(e=(0,i.z$)()){return ea(e)||ei(e)||eo(e)||es(e)||/windows phone/i.test(e)||en(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(e,t=[]){let r;switch(e){case"Browser":r=Z((0,i.z$)());break;case"Worker":r=`${Z((0,i.z$)())}-${e}`;break;default:r=e}let n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${s.Jn}/${n}`}async function ec(e,t){return C(e,"GET","/v2/recaptchaConfig",_(e,t))}function eh(e){return void 0!==e&&void 0!==e.enterprise}class ed{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState)}}function ef(e){return new Promise((t,r)=>{var n,i;let s=document.createElement("script");s.setAttribute("src",e),s.onload=t,s.onerror=e=>{let t=g("internal-error");t.customData=e,r(t)},s.type="text/javascript",s.charset="UTF-8",(null!==(i=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==i?i:document).appendChild(s)})}function eg(e){return`__${e}${Math.floor(1e6*Math.random())}`}class ep{constructor(e){this.type="recaptcha-enterprise",this.auth=ev(e)}async verify(e="verify",t=!1){async function r(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,r)=>{ec(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(n=>{if(void 0===n.recaptchaKey)r(Error("recaptcha Enterprise site key undefined"));else{let r=new ed(n);return null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,t(r.siteKey)}}).catch(e=>{r(e)})})}function n(t,r,n){let i=window.grecaptcha;eh(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{r(e)}).catch(()=>{r("NO_RECAPTCHA")})}):n(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,i)=>{r(this.auth).then(r=>{if(!t&&eh(window.grecaptcha))n(r,e,i);else{if("undefined"==typeof window){i(Error("RecaptchaVerifier is only supported in browser"));return}ef("https://www.google.com/recaptcha/enterprise.js?render="+r).then(()=>{n(r,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}}async function em(e,t,r,n=!1){let i;let s=new ep(e);try{i=await s.verify(r)}catch(e){i=await s.verify(r,!0)}let o=Object.assign({},t);return n?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=t=>new Promise((r,n)=>{try{let n=e(t);r(n)}catch(e){n(e)}});r.onAbort=t,this.queue.push(r);let n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(e){for(let e of(t.reverse(),t))try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,t,r,n){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ew(this),this.idTokenSubscription=new ew(this),this.beforeStateQueue=new ey(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=c,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Q(t)),this._initializationPromise=this.queue(async()=>{var r,n;if(!this._deleted&&(this.persistenceManager=await Y.create(this,e),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(n=this.currentUser)||void 0===n?void 0:n.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(this.currentUser||e){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var t;let r=await this.assertedPersistence.getCurrentUser(),n=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let r=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==n?void 0:n._redirectEventId,o=await this.tryRedirectSignIn(e);(!r||r===s)&&(null==o?void 0:o.user)&&(n=o.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(e){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return(y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId)?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await z(e)}catch(e){if((null==e?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){let t=e?(0,i.m9)(e):null;return t&&y(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Q(e))})}async initializeRecaptchaConfig(){let e=await ec(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new ed(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){let e=new ep(this);e.verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new i.LL("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Q(e)||this._popupRedirectResolver;y(t,this,"argument-error"),this.redirectPersistenceManager=await Y.create(this,[Q(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return(this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e)?this._currentUser:(null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,n){if(this._deleted)return()=>{};let i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return(y(s,this,"internal-error"),s.then(()=>i(this.currentUser)),"function"==typeof t)?e.addObserver(t,r,n):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eu(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await (null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var e;let t=await (null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){h.logLevel<=a.in.WARN&&h.warn(`Auth (${s.Jn}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function ev(e){return(0,i.m9)(e)}class ew{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,i.ne)(e=>this.observer=e)}get next(){return y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ex(e){let t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ek(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return b("not implemented")}_getIdTokenResponse(e){return b("not implemented")}_linkToIdToken(e,t){return b("not implemented")}_getReauthenticationResolver(e){return b("not implemented")}}async function eT(e,t){return C(e,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eI(e,t){return N(e,"POST","/v1/accounts:signInWithPassword",_(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e_(e,t){return N(e,"POST","/v1/accounts:signInWithEmailLink",_(e,t))}async function eC(e,t){return N(e,"POST","/v1/accounts:signInWithEmailLink",_(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS extends eE{constructor(e,t,r,n=null){super("password",r),this._email=e,this._password=t,this._tenantId=n}static _fromEmailAndPassword(e,t){return new eS(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new eS(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":let r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t||!t.emailPasswordEnabled)return eI(e,r).catch(async t=>{if("auth/missing-recaptcha-token"!==t.code)return Promise.reject(t);{console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");let t=await em(e,r,"signInWithPassword");return eI(e,t)}});{let t=await em(e,r,"signInWithPassword");return eI(e,t)}case"emailLink":return e_(e,{email:this._email,oobCode:this._password});default:f(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return eT(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return eC(e,{idToken:t,email:this._email,oobCode:this._password});default:f(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eN(e,t){return N(e,"POST","/v1/accounts:signInWithIdp",_(e,t))}class eA extends eE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new eA(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):f("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:n}=t,i=o(t,["providerId","signInMethod"]);if(!r||!n)return null;let s=new eA(r,n);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return eN(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,eN(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,eN(e,t)}buildRequest(){let e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,i.xO)(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eR(e,t){return C(e,"POST","/v1/accounts:sendVerificationCode",_(e,t))}async function eD(e,t){return N(e,"POST","/v1/accounts:signInWithPhoneNumber",_(e,t))}async function eO(e,t){let r=await N(e,"POST","/v1/accounts:signInWithPhoneNumber",_(e,t));if(r.temporaryProof)throw D(e,"account-exists-with-different-credential",r);return r}let eL={USER_NOT_FOUND:"user-not-found"};async function eP(e,t){let r=Object.assign(Object.assign({},t),{operation:"REAUTH"});return N(e,"POST","/v1/accounts:signInWithPhoneNumber",_(e,r),eL)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM extends eE{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new eM({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new eM({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return eD(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return eO(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return eP(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:n}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:n}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));let{verificationId:t,verificationCode:r,phoneNumber:n,temporaryProof:i}=e;return r||t||n||i?new eM({verificationId:t,verificationCode:r,phoneNumber:n,temporaryProof:i}):null}}class ej{constructor(e){var t,r,n,s,o,a;let l=(0,i.zd)((0,i.pd)(e)),u=null!==(t=l.apiKey)&&void 0!==t?t:null,c=null!==(r=l.oobCode)&&void 0!==r?r:null,h=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(n=l.mode)&&void 0!==n?n:null);y(u&&c&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=c,this.continueUrl=null!==(s=l.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=l.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=l.tenantId)&&void 0!==a?a:null}static parseLink(e){let t=function(e){let t=(0,i.zd)((0,i.pd)(e)).link,r=t?(0,i.zd)((0,i.pd)(t)).deep_link_id:null,n=(0,i.zd)((0,i.pd)(e)).deep_link_id,s=n?(0,i.zd)((0,i.pd)(n)).link:null;return s||n||r||t||e}(e);try{return new ej(t)}catch(e){return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(){this.providerId=eF.PROVIDER_ID}static credential(e,t){return eS._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let r=ej.parseLink(t);return y(r,"argument-error"),eS._fromEmailAndCode(e,r.code,r.tenantId)}}eF.PROVIDER_ID="password",eF.EMAIL_PASSWORD_SIGN_IN_METHOD="password",eF.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV extends eU{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB extends eV{constructor(){super("facebook.com")}static credential(e){return eA._fromParams({providerId:eB.PROVIDER_ID,signInMethod:eB.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return eB.credentialFromTaggedObject(e)}static credentialFromError(e){return eB.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return eB.credential(e.oauthAccessToken)}catch(e){return null}}}eB.FACEBOOK_SIGN_IN_METHOD="facebook.com",eB.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ez extends eV{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return eA._fromParams({providerId:ez.PROVIDER_ID,signInMethod:ez.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ez.credentialFromTaggedObject(e)}static credentialFromError(e){return ez.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ez.credential(t,r)}catch(e){return null}}}ez.GOOGLE_SIGN_IN_METHOD="google.com",ez.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e$ extends eV{constructor(){super("github.com")}static credential(e){return eA._fromParams({providerId:e$.PROVIDER_ID,signInMethod:e$.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return e$.credentialFromTaggedObject(e)}static credentialFromError(e){return e$.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return e$.credential(e.oauthAccessToken)}catch(e){return null}}}e$.GITHUB_SIGN_IN_METHOD="github.com",e$.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eq extends eV{constructor(){super("twitter.com")}static credential(e,t){return eA._fromParams({providerId:eq.PROVIDER_ID,signInMethod:eq.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return eq.credentialFromTaggedObject(e)}static credentialFromError(e){return eq.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return eq.credential(t,r)}catch(e){return null}}}eq.TWITTER_SIGN_IN_METHOD="twitter.com",eq.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eH{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,n=!1){let i=await G._fromIdTokenResponse(e,r,n),s=eK(r),o=new eH({user:i,providerId:s,_tokenResponse:r,operationType:t});return o}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let n=eK(r);return new eH({user:e,providerId:n,_tokenResponse:r,operationType:t})}}function eK(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eG extends i.ZR{constructor(e,t,r,n){var i;super(t.code,t.message),this.operationType=r,this.user=n,Object.setPrototypeOf(this,eG.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,n){return new eG(e,t,r,n)}}function eW(e,t,r,n){let i="reauthenticate"===t?r._getReauthenticationResolver(e):r._getIdTokenResponse(e);return i.catch(r=>{if("auth/multi-factor-auth-required"===r.code)throw eG._fromErrorAndOperation(e,r,t,n);throw r})}async function eQ(e,t,r=!1){let n=await U(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return eH._forOperation(e,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eX(e,t,r=!1){let{auth:n}=e,i="reauthenticate";try{let s=await U(e,eW(n,i,t,e),r);y(s.idToken,n,"internal-error");let o=F(s.idToken);y(o,n,"internal-error");let{sub:a}=o;return y(e.uid===a,n,"user-mismatch"),eH._forOperation(e,i,s)}catch(e){throw(null==e?void 0:e.code)==="auth/user-not-found"&&f(n,"user-mismatch"),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eJ(e,t,r=!1){let n="signIn",i=await eW(e,n,t),s=await eH._fromIdTokenResponse(e,n,i);return r||await e._updateCurrentUser(s.user),s}function eY(e,t,r,n){return(0,i.m9)(e).onAuthStateChanged(t,r,n)}function eZ(e){return(0,i.m9)(e).signOut()}new WeakMap;let e0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{if(!this.storage)return Promise.resolve(!1);return this.storage.setItem(e0,"1"),this.storage.removeItem(e0),Promise.resolve(!0)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class e2 extends e1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){let e=(0,i.z$)();return et(e)||ea(e)}()&&function(){try{return!!(window&&window!==window.top)}catch(e){return!1}}(),this.fallbackToPolling=el(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let r=this.storage.getItem(t),n=this.localCache[t];r!==n&&e(t,n,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((e,t,r)=>{this.notifyListeners(e,r)});return}let r=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let n=this.storage.getItem(r);if(e.newValue!==n)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!t)return}let n=()=>{let e=this.storage.getItem(r);(t||this.localCache[r]!==e)&&this.notifyListeners(r,e)},s=this.storage.getItem(r);(0,i.w1)()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(n,10):n()}notifyListeners(e,t){this.localCache[e]=t;let r=this.listeners[e];if(r)for(let e of Array.from(r))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}e2.type="LOCAL";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4 extends e1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}e4.type="SESSION";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;let r=new e9(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let{eventId:t,eventType:r,data:n}=e.data,i=this.handlersMap[r];if(!(null==i?void 0:i.size))return;e.ports[0].postMessage({status:"ack",eventId:t,eventType:r});let s=Array.from(i).map(async t=>t(e.origin,n)),o=await Promise.all(s.map(async e=>{try{let t=await e;return{fulfilled:!0,value:t}}catch(e){return{fulfilled:!1,reason:e}}}));e.ports[0].postMessage({status:"done",eventId:t,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e5(e="",t=10){let r="";for(let e=0;e<t;e++)r+=Math.floor(10*Math.random());return e+r}e9.receivers=[];/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let n,i;let s="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!s)throw Error("connection_unavailable");return new Promise((o,a)=>{let l=e5("",20);s.port1.start();let u=setTimeout(()=>{a(Error("unsupported_event"))},r);i={messageChannel:s,onMessage(e){if(e.data.eventId===l)switch(e.data.status){case"ack":clearTimeout(u),n=setTimeout(()=>{a(Error("timeout"))},3e3);break;case"done":clearTimeout(n),o(e.data.response);break;default:clearTimeout(u),clearTimeout(n),a(Error("invalid_response"))}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e3(){return window}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e7(){return void 0!==e3().WorkerGlobalScope&&"function"==typeof e3().importScripts}async function e8(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{let e=await navigator.serviceWorker.ready;return e.active}catch(e){return null}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let te="firebaseLocalStorageDb",tt="firebaseLocalStorage",tr="fbase_key";class tn{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ti(e,t){return e.transaction([tt],t?"readwrite":"readonly").objectStore(tt)}function ts(){let e=indexedDB.open(te,1);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{let t=e.result;try{t.createObjectStore(tt,{keyPath:tr})}catch(e){r(e)}}),e.addEventListener("success",async()=>{let r=e.result;r.objectStoreNames.contains(tt)?t(r):(r.close(),await function(){let e=indexedDB.deleteDatabase(te);return new tn(e).toPromise()}(),t(await ts()))})})}async function to(e,t,r){let n=ti(e,!0).put({[tr]:t,value:r});return new tn(n).toPromise()}async function ta(e,t){let r=ti(e,!1).get(t),n=await new tn(r).toPromise();return void 0===n?null:n.value}function tl(e,t){let r=ti(e,!0).delete(t);return new tn(r).toPromise()}class tu{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await ts()),this.db}async _withRetries(e){let t=0;for(;;)try{let t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return e7()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=e9._getInstance(e7()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>{let r=await this._poll();return{keyProcessed:r.includes(t.key)}}),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await e8(),!this.activeServiceWorker)return;this.sender=new e6(this.activeServiceWorker);let r=await this.sender._send("ping",{},800);r&&(null===(e=r[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=r[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null==navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await ts();return await to(e,e0,"1"),await tl(e,e0),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>to(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>ta(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>tl(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>{let t=ti(e,!1).getAll();return new tn(t).toPromise()});if(!e||0!==this.pendingWrites)return[];let t=[],r=new Set;for(let{fbase_key:n,value:i}of e)r.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(i)&&(this.notifyListeners(n,i),t.push(n));for(let e of Object.keys(this.localCache))this.localCache[e]&&!r.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let r=this.listeners[e];if(r)for(let e of Array.from(r))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}async function tc(e,t,r){var n,i,s;let o=await r.verify();try{let a;if(y("string"==typeof o,e,"argument-error"),y("recaptcha"===r.type,e,"argument-error"),a="string"==typeof t?{phoneNumber:t}:t,"session"in a){let t=a.session;if("phoneNumber"in a){y("enroll"===t.type,e,"internal-error");let r=await (i={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,recaptchaToken:o}},C(e,"POST","/v2/accounts/mfaEnrollment:start",_(e,i)));return r.phoneSessionInfo.sessionInfo}{y("signin"===t.type,e,"internal-error");let r=(null===(n=a.multiFactorHint)||void 0===n?void 0:n.uid)||a.multiFactorUid;y(r,e,"missing-multi-factor-info");let i=await (s={mfaPendingCredential:t.credential,mfaEnrollmentId:r,phoneSignInInfo:{recaptchaToken:o}},C(e,"POST","/v2/accounts/mfaSignIn:start",_(e,s)));return i.phoneResponseInfo.sessionInfo}}{let{sessionInfo:t}=await eR(e,{phoneNumber:a.phoneNumber,recaptchaToken:o});return t}}finally{r._reset()}}tu.type="LOCAL",eg("rcb"),new x(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e){this.providerId=th.PROVIDER_ID,this.auth=ev(e)}verifyPhoneNumber(e,t){return tc(this.auth,e,(0,i.m9)(t))}static credential(e,t){return eM._fromVerification(e,t)}static credentialFromResult(e){return th.credentialFromTaggedObject(e)}static credentialFromError(e){return th.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:r}=e;return t&&r?eM._fromTokenResponse(t,r):null}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(e,t){return t?Q(t):(y(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}th.PROVIDER_ID="phone",th.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf extends eE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return eN(e,this._buildIdpRequest())}_linkToIdToken(e,t){return eN(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return eN(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function tg(e){return eJ(e.auth,new tf(e),e.bypassAuthState)}function tp(e){let{auth:t,user:r}=e;return y(r,t,"internal-error"),eX(r,new tf(e),e.bypassAuthState)}async function tm(e){let{auth:t,user:r}=e;return y(r,t,"internal-error"),eQ(r,new tf(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e,t,r,n,i=!1){this.auth=e,this.resolver=r,this.user=n,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:n,tenantId:i,error:s,type:o}=e;if(s){this.reject(s);return}let a={auth:this.auth,requestUri:t,sessionId:r,tenantId:i||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tg;case"linkViaPopup":case"linkViaRedirect":return tm;case"reauthViaPopup":case"reauthViaRedirect":return tp;default:f(this.auth,"internal-error")}}resolve(e){this.pendingPromise||b("Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){this.pendingPromise||b("Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tb=new x(2e3,1e4);async function tv(e,t,r){let n=ev(e);!function(e,t,r){if(!(t instanceof r))throw r.name!==t.constructor.name&&f(e,"argument-error"),p(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(e,t,eU);let i=td(n,r),s=new tw(n,"signInViaPopup",t,i);return s.executeNotNull()}class tw extends ty{constructor(e,t,r,n,i){super(e,t,n,i),this.provider=r,this.authWindow=null,this.pollId=null,tw.currentPopupAction&&tw.currentPopupAction.cancel(),tw.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return y(e,this.auth,"internal-error"),e}async onExecution(){1===this.filter.length||b("Popup operations only handle one event");let e=e5();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(g(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(g(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,tw.currentPopupAction=null}pollUserCancellation(){let e=()=>{var t,r;if(null===(r=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===r?void 0:r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(g(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tb.get())};e()}}tw.currentPopupAction=null;let tx=new Map;class tk extends ty{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=tx.get(this.auth._key());if(!e){try{let t=await tE(this.resolver,this.auth),r=t?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}tx.set(this.auth._key(),e)}return this.bypassAuthState||tx.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"===e.type){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tE(e,t){let r=J("pendingRedirect",t.config.apiKey,t.name),n=Q(e._redirectPersistence);if(!await n._isAvailable())return!1;let i=await n._get(r)==="true";return await n._remove(r),i}function tT(e,t){tx.set(e._key(),t)}async function tI(e,t,r=!1){let n=ev(e),i=td(n,t),s=new tk(n,i,r),o=await s.execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,t)),o}class t_{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tS(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!tS(e)){let n=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(g(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(tC(e))}saveEventToCache(e){this.cachedEventUids.add(tC(e)),this.lastProcessedEventTime=Date.now()}}function tC(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function tS({type:e,error:t}){return"unknown"===e&&(null==t?void 0:t.code)==="auth/no-auth-event"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(e,t={}){return C(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tR=/^https?/;async function tD(e){if(e.config.emulator)return;let{authorizedDomains:t}=await tN(e);for(let e of t)try{if(function(e){let t=v(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){let i=new URL(e);return""===i.hostname&&""===n?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&i.hostname===n}if(!tR.test(r))return!1;if(tA.test(e))return n===e;let i=e.replace(/\./g,"\\."),s=RegExp("^(.+\\."+i+"|"+i+")$","i");return s.test(n)}(e))return}catch(e){}f(e,"unauthorized-domain")}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tO=new x(3e4,6e4);function tL(){let e=e3().___jsl;if(null==e?void 0:e.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}}let tP=null,tM=new x(5e3,15e3),tj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);async function tU(e){let t=await (tP=tP||new Promise((t,r)=>{var n,i,s;function o(){tL(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{tL(),r(g(e,"network-request-failed"))},timeout:tO.get()})}if(null===(i=null===(n=e3().gapi)||void 0===n?void 0:n.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else if(null===(s=e3().gapi)||void 0===s?void 0:s.load)o();else{let t=eg("iframefcb");return e3()[t]=()=>{gapi.load?o():r(g(e,"network-request-failed"))},ef(`https://apis.google.com/js/api.js?onload=${t}`).catch(e=>r(e))}}).catch(e=>{throw tP=null,e})),r=e3().gapi;return y(r,e,"internal-error"),t.open({where:document.body,url:function(e){let t=e.config;y(t.authDomain,e,"auth-domain-config-required");let r=t.emulator?k(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,n={apiKey:t.apiKey,appName:e.name,v:s.Jn},o=tF.get(e.config.apiHost);o&&(n.eid=o);let a=e._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${(0,i.xO)(n).slice(1)}`}(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tj,dontclear:!0},t=>new Promise(async(r,n)=>{await t.restyle({setHideOnLeave:!1});let i=g(e,"network-request-failed"),s=e3().setTimeout(()=>{n(i)},tM.get());function o(){e3().clearTimeout(s),r(t)}t.ping(o).then(o,()=>{n(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class tB{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}let tz=encodeURIComponent("fac");async function t$(e,t,r,n,o,a){y(e.config.authDomain,e,"auth-domain-config-required"),y(e.config.apiKey,e,"invalid-api-key");let l={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:s.Jn,eventId:o};if(t instanceof eU)for(let[r,n]of(t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,i.xb)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters())),Object.entries(a||{})))l[r]=n;if(t instanceof eV){let e=t.getScopes().filter(e=>""!==e);e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);let u=l;for(let e of Object.keys(u))void 0===u[e]&&delete u[e];let c=await e._getAppCheckToken(),h=c?`#${tz}=${encodeURIComponent(c)}`:"";return`${function({config:e}){return e.emulator?k(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${(0,i.xO)(u).slice(1)}${h}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tq="webStorageSupport",tH=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=e4,this._completeRedirectFn=tI,this._overrideRedirectResult=tT}async _openPopup(e,t,r,n){var s;(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager)||b("_initialize() not called before _openPopup()");let o=await t$(e,t,r,v(),n);return function(e,t,r,n=500,s=600){let o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString(),l="",u=Object.assign(Object.assign({},tV),{width:n.toString(),height:s.toString(),top:o,left:a}),c=(0,i.z$)().toLowerCase();r&&(l=er(c)?"_blank":r),ee(c)&&(t=t||"http://localhost",u.scrollbars="yes");let h=Object.entries(u).reduce((e,[t,r])=>`${e}${t}=${r},`,"");if(function(e=(0,i.z$)()){var t;return ea(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(c)&&"_self"!==l)return function(e,t){let r=document.createElement("a");r.href=e,r.target=t;let n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}(t||"",l),new tB(null);let d=window.open(t||"",l,h);y(d,e,"popup-blocked");try{d.focus()}catch(e){}return new tB(d)}(e,o,e5())}async _openRedirect(e,t,r,n){await this._originValidation(e);let i=await t$(e,t,r,v(),n);return e3().location.href=i,new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:e,promise:r}=this.eventManagers[t];return e?Promise.resolve(e):(r||b("If manager is not set, promise should be"),r)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await tU(e),r=new t_(e);return t.register("authEvent",t=>{y(null==t?void 0:t.authEvent,e,"invalid-auth-event");let n=r.onEvent(t.authEvent);return{status:n?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){let r=this.iframes[e._key()];r.send(tq,{type:tq},r=>{var n;let i=null===(n=null==r?void 0:r[0])||void 0===n?void 0:n[tq];void 0!==i&&t(!!i),f(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=tD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return el()||et()||ea()}};class tK{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return b("unexpected MultiFactorSessionType")}}}class tG extends tK{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new tG(e)}_finalizeEnroll(e,t,r){return C(e,"POST","/v2/accounts/mfaEnrollment:finalize",_(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}_finalizeSignIn(e,t){return C(e,"POST","/v2/accounts/mfaSignIn:finalize",_(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}}class tW extends tK{constructor(e,t,r){super("totp"),this.otp=e,this.enrollmentId=t,this.secret=r}static _fromSecret(e,t){return new tW(t,void 0,e)}static _fromEnrollmentId(e,t){return new tW(t,e)}async _finalizeEnroll(e,t,r){return y(void 0!==this.secret,e,"argument-error"),C(e,"POST","/v2/accounts/mfaEnrollment:finalize",_(e,{idToken:t,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}))}async _finalizeSignIn(e,t){y(void 0!==this.enrollmentId&&void 0!==this.otp,e,"argument-error");let r={verificationCode:this.otp};return C(e,"POST","/v2/accounts/mfaSignIn:finalize",_(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}))}}class tQ{constructor(e,t,r,n,i,s,o){this.sessionInfo=s,this.auth=o,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=r,this.codeIntervalSeconds=n,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(e,t){return new tQ(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,t)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){var r;let n=!1;return(tX(e)||tX(t))&&(n=!0),n&&(tX(e)&&(e=(null===(r=this.auth.currentUser)||void 0===r?void 0:r.email)||"unknownuser"),tX(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function tX(e){return void 0===e||(null==e?void 0:e.length)===0}var tJ="@firebase/auth",tY="0.23.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tZ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;let t=await this.auth.currentUser.getIdToken(e);return{accessToken:t}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}let t0=(0,i.Pz)("authIdTokenMaxAge")||300,t1=null,t2=e=>async t=>{let r=t&&await t.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>t0)return;let i=null==r?void 0:r.token;t1!==i&&(t1=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function t4(e=(0,s.Mq)()){let t=(0,s.qX)(e,"auth");if(t.isInitialized())return t.getImmediate();let r=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t){let r=(0,s.qX)(e,"auth");if(r.isInitialized()){let e=r.getImmediate(),n=r.getOptions();if((0,i.vZ)(n,null!=t?t:{}))return e;f(e,"already-initialized")}let n=r.initialize({options:t});return n}(e,{popupRedirectResolver:tH,persistence:[tu,e2,e4]}),n=(0,i.Pz)("authTokenSyncURL");if(n){var o,a;let e=t2(n);o=()=>e(r.currentUser),(0,i.m9)(r).beforeAuthStateChanged(e,o),a=t=>e(t),(0,i.m9)(r).onIdTokenChanged(a,void 0,void 0)}let l=(0,i.q4)("auth");return l&&function(e,t,r){let n=ev(e);y(n._canInitEmulator,n,"emulator-config-failed"),y(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");let i=!!(null==r?void 0:r.disableWarnings),s=ex(t),{host:o,port:a}=function(e){let t=ex(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};let n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){let e=i[1];return{host:e,port:ek(n.substr(e.length+1))}}{let[e,t]=n.split(":");return{host:e,port:ek(t)}}}(t),l=null===a?"":`:${a}`;n.config.emulator={url:`${s}//${o}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(r,`http://${l}`),r}n="Browser",(0,s.Xd)(new l.wA("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;y(o&&!o.includes(":"),"invalid-api-key",{appName:r.name}),y(!(null==a?void 0:a.includes(":")),"argument-error",{appName:r.name});let l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eu(n)},u=new eb(r,i,s,l);return function(e,t){let r=(null==t?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Q);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,null==t?void 0:t.popupRedirectResolver)}(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{let n=e.getProvider("auth-internal");n.initialize()})),(0,s.Xd)(new l.wA("auth-internal",e=>{let t=ev(e.getProvider("auth").getImmediate());return new tZ(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,s.KN)(tJ,tY,/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),(0,s.KN)(tJ,tY,"esm2017")},6100:function(e,t,r){"use strict";r.d(t,{EK:function(){return ny},ET:function(){return lW},hJ:function(){return a4},JU:function(){return a9},QT:function(){return lq},PL:function(){return lK},ad:function(){return a7},b9:function(){return lO},cf:function(){return lQ},Xo:function(){return lR},IO:function(){return l_},Bt:function(){return lY},pl:function(){return lG},ar:function(){return lS}});var n,i,s,o,a,l,u,c,h=r(5816),d=r(740),f=r(3333),g=r(4444),p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},m={},y=y||{},b=p||self;function v(){}function w(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function x(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function k(e,t,r){return e.call.apply(e.bind,arguments)}function E(e,t,r){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),e.apply(t,r)}}return function(){return e.apply(t,arguments)}}function T(e,t,r){return(T=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?k:E).apply(null,arguments)}function I(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=r.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function _(e,t){function r(){}r.prototype=t.prototype,e.$=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.ac=function(e,r,n){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[r].apply(e,i)}}function C(){this.s=this.s,this.o=this.o}C.prototype.s=!1,C.prototype.ra=function(){this.s||(this.s=!0,this.N())},C.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};let S=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let r=0;r<e.length;r++)if(r in e&&e[r]===t)return r;return -1};function N(e){let t=e.length;if(0<t){let r=Array(t);for(let n=0;n<t;n++)r[n]=e[n];return r}return[]}function A(e,t){for(let t=1;t<arguments.length;t++){let r=arguments[t];if(w(r)){let t=e.length||0,n=r.length||0;e.length=t+n;for(let i=0;i<n;i++)e[t+i]=r[i]}else e.push(r)}}function R(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!b.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{b.addEventListener("test",v,t),b.removeEventListener("test",v,t)}catch(e){}return e}();function O(e){return/^[\s\xa0]*$/.test(e)}var L=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function P(e,t){return e<t?-1:e>t?1:0}function M(){var e=b.navigator;return e&&(e=e.userAgent)?e:""}function j(e){return -1!=M().indexOf(e)}function F(e){return F[" "](e),e}function U(e,t,r){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:e[t]=r(t)}F[" "]=v;var V=j("Opera"),B=j("Trident")||j("MSIE"),z=j("Edge"),$=z||B,q=j("Gecko")&&!(-1!=M().toLowerCase().indexOf("webkit")&&!j("Edge"))&&!(j("Trident")||j("MSIE"))&&!j("Edge"),H=-1!=M().toLowerCase().indexOf("webkit")&&!j("Edge");function K(){var e=b.document;return e?e.documentMode:void 0}e:{var G,W="",Q=(G=M(),q?/rv:([^\);]+)(\)|;)/.exec(G):z?/Edge\/([\d\.]+)/.exec(G):B?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(G):H?/WebKit\/(\S+)/.exec(G):V?/(?:Version)[ \/]?(\S+)/.exec(G):void 0);if(Q&&(W=Q?Q[1]:""),B){var X=K();if(null!=X&&X>parseFloat(W)){i=String(X);break e}}i=W}var J={},Y=b.document&&B&&(K()||parseInt(i,10))||void 0;function Z(e,t){if(R.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var r=this.type=e.type,n=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(q){e:{try{F(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==r?t=e.fromElement:"mouseout"==r&&(t=e.toElement);this.relatedTarget=t,n?(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:ee[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Z.$.h.call(this)}}_(Z,R);var ee={2:"touch",3:"pen",4:"mouse"};Z.prototype.h=function(){Z.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var et="closure_listenable_"+(1e6*Math.random()|0),er=0;function en(e,t,r,n,i){this.listener=e,this.proxy=null,this.src=t,this.type=r,this.capture=!!n,this.la=i,this.key=++er,this.fa=this.ia=!1}function ei(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function es(e,t,r){for(let n in e)t.call(r,e[n],n,e)}function eo(e){let t={};for(let r in e)t[r]=e[r];return t}let ea="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function el(e,t){let r,n;for(let t=1;t<arguments.length;t++){for(r in n=arguments[t])e[r]=n[r];for(let t=0;t<ea.length;t++)r=ea[t],Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}}function eu(e){this.src=e,this.g={},this.h=0}function ec(e,t){var r=t.type;if(r in e.g){var n,i=e.g[r],s=S(i,t);(n=0<=s)&&Array.prototype.splice.call(i,s,1),n&&(ei(t),0==e.g[r].length&&(delete e.g[r],e.h--))}}function eh(e,t,r,n){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&!!r==s.capture&&s.la==n)return i}return -1}eu.prototype.add=function(e,t,r,n,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=eh(e,t,n,i);return -1<o?(t=e[o],r||(t.ia=!1)):((t=new en(t,this.src,s,!!n,i)).ia=r,e.push(t)),t};var ed="closure_lm_"+(1e6*Math.random()|0),ef={};function eg(e,t,r,n,i,s){if(!t)throw Error("Invalid event type");var o=x(i)?!!i.capture:!!i,a=eb(e);if(a||(e[ed]=a=new eu(e)),(r=a.add(t,r,n,o,s)).proxy)return r;if(n=function e(t){return ey.call(e.src,e.listener,t)},r.proxy=n,n.src=e,n.listener=r,e.addEventListener)D||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),n,i);else if(e.attachEvent)e.attachEvent(em(t.toString()),n);else if(e.addListener&&e.removeListener)e.addListener(n);else throw Error("addEventListener and attachEvent are unavailable.");return r}function ep(e){if("number"!=typeof e&&e&&!e.fa){var t=e.src;if(t&&t[et])ec(t.i,e);else{var r=e.type,n=e.proxy;t.removeEventListener?t.removeEventListener(r,n,e.capture):t.detachEvent?t.detachEvent(em(r),n):t.addListener&&t.removeListener&&t.removeListener(n),(r=eb(t))?(ec(r,e),0==r.h&&(r.src=null,t[ed]=null)):ei(e)}}}function em(e){return e in ef?ef[e]:ef[e]="on"+e}function ey(e,t){if(e.fa)e=!0;else{t=new Z(t,this);var r=e.listener,n=e.la||e.src;e.ia&&ep(e),e=r.call(n,t)}return e}function eb(e){return(e=e[ed])instanceof eu?e:null}var ev="__closure_events_fn_"+(1e9*Math.random()>>>0);function ew(e){return"function"==typeof e?e:(e[ev]||(e[ev]=function(t){return e.handleEvent(t)}),e[ev])}function ex(){C.call(this),this.i=new eu(this),this.S=this,this.J=null}function ek(e,t){var r,n=e.J;if(n)for(r=[];n;n=n.J)r.push(n);if(e=e.S,n=t.type||t,"string"==typeof t)t=new R(t,e);else if(t instanceof R)t.target=t.target||e;else{var i=t;el(t=new R(n,e),i)}if(i=!0,r)for(var s=r.length-1;0<=s;s--){var o=t.g=r[s];i=eE(o,n,!0,t)&&i}if(i=eE(o=t.g=e,n,!0,t)&&i,i=eE(o,n,!1,t)&&i,r)for(s=0;s<r.length;s++)i=eE(o=t.g=r[s],n,!1,t)&&i}function eE(e,t,r,n){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==r){var a=o.listener,l=o.la||o.src;o.ia&&ec(e.i,o),i=!1!==a.call(l,n)&&i}}return i&&!n.defaultPrevented}_(ex,C),ex.prototype[et]=!0,ex.prototype.removeEventListener=function(e,t,r,n){!function e(t,r,n,i,s){if(Array.isArray(r))for(var o=0;o<r.length;o++)e(t,r[o],n,i,s);else(i=x(i)?!!i.capture:!!i,n=ew(n),t&&t[et])?(t=t.i,(r=String(r).toString())in t.g&&-1<(n=eh(o=t.g[r],n,i,s))&&(ei(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[r],t.h--))):t&&(t=eb(t))&&(r=t.g[r.toString()],t=-1,r&&(t=eh(r,n,i,s)),(n=-1<t?r[t]:null)&&ep(n))}(this,e,t,r,n)},ex.prototype.N=function(){if(ex.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var r=t.g[e],n=0;n<r.length;n++)ei(r[n]);delete t.g[e],t.h--}}this.J=null},ex.prototype.O=function(e,t,r,n){return this.i.add(String(e),t,!1,r,n)},ex.prototype.P=function(e,t,r,n){return this.i.add(String(e),t,!0,r,n)};var eT=b.JSON.stringify,eI=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new e_,e=>e.reset());class e_{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function eC(e,t){var r;o||(r=b.Promise.resolve(void 0),o=function(){r.then(eA)}),eS||(o(),eS=!0),eN.add(e,t)}var eS=!1,eN=new class{constructor(){this.h=this.g=null}add(e,t){let r=eI.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function eA(){let e;for(;e=null,(t=eN).g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),r=e;){try{r.h.call(r.g)}catch(e){!function(e){b.setTimeout(()=>{throw e},0)}(e)}var t,r,n=eI;n.j(r),100>n.h&&(n.h++,r.next=n.g,n.g=r)}eS=!1}function eR(e,t){ex.call(this),this.h=e||1,this.g=t||b,this.j=T(this.qb,this),this.l=Date.now()}function eD(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function eO(e,t,r){if("function"==typeof e)r&&(e=T(e,r));else if(e&&"function"==typeof e.handleEvent)e=T(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:b.setTimeout(e,t||0)}_(eR,ex),(c=eR.prototype).ga=!1,c.T=null,c.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ek(this,"tick"),this.ga&&(eD(this),this.start()))}},c.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},c.N=function(){eR.$.N.call(this),eD(this),delete this.g};class eL extends C{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:function e(t){t.g=eO(()=>{t.g=null,t.i&&(t.i=!1,e(t))},t.j);let r=t.h;t.h=null,t.m.apply(null,r)}(this)}N(){super.N(),this.g&&(b.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function eP(e){C.call(this),this.h=e,this.g={}}_(eP,C);var eM=[];function ej(e,t,r,n){Array.isArray(r)||(r&&(eM[0]=r.toString()),r=eM);for(var i=0;i<r.length;i++){var s=function e(t,r,n,i,s){if(i&&i.once)return function e(t,r,n,i,s){if(Array.isArray(r)){for(var o=0;o<r.length;o++)e(t,r[o],n,i,s);return null}return n=ew(n),t&&t[et]?t.P(r,n,x(i)?!!i.capture:!!i,s):eg(t,r,n,!0,i,s)}(t,r,n,i,s);if(Array.isArray(r)){for(var o=0;o<r.length;o++)e(t,r[o],n,i,s);return null}return n=ew(n),t&&t[et]?t.O(r,n,x(i)?!!i.capture:!!i,s):eg(t,r,n,!1,i,s)}(t,r[i],n||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function eF(e){es(e.g,function(e,t){this.g.hasOwnProperty(t)&&ep(e)},e),e.g={}}function eU(){this.g=!0}function eV(e,t,r,n){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var r=JSON.parse(t);if(r){for(e=0;e<r.length;e++)if(Array.isArray(r[e])){var n=r[e];if(!(2>n.length)){var i=n[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}}return eT(r)}catch(e){return t}}(e,r)+(n?" "+n:"")})}eP.prototype.N=function(){eP.$.N.call(this),eF(this)},eP.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},eU.prototype.Ea=function(){this.g=!1},eU.prototype.info=function(){};var eB={},ez=null;function e$(){return ez=ez||new ex}function eq(e){R.call(this,eB.Ta,e)}function eH(e){let t=e$();ek(t,new eq(t))}function eK(e,t){R.call(this,eB.STAT_EVENT,e),this.stat=t}function eG(e){let t=e$();ek(t,new eK(t,e))}function eW(e,t){R.call(this,eB.Ua,e),this.size=t}function eQ(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return b.setTimeout(function(){e()},t)}eB.Ta="serverreachability",_(eq,R),eB.STAT_EVENT="statevent",_(eK,R),eB.Ua="timingevent",_(eW,R);var eX={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},eJ={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function eY(){}function eZ(e){return e.h||(e.h=e.i())}function e0(){}eY.prototype.h=null;var e1={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function e2(){R.call(this,"d")}function e4(){R.call(this,"c")}function e9(){}function e5(e,t,r,n){this.l=e,this.j=t,this.m=r,this.W=n||1,this.U=new eP(this),this.P=e3,e=$?125:void 0,this.V=new eR(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new e6}function e6(){this.i=null,this.g="",this.h=!1}_(e2,R),_(e4,R),_(e9,eY),e9.prototype.g=function(){return new XMLHttpRequest},e9.prototype.i=function(){return{}},a=new e9;var e3=45e3,e7={},e8={};function te(e,t,r){e.L=1,e.v=tb(tf(t)),e.s=r,e.S=!0,tt(e,null)}function tt(e,t){e.G=Date.now(),ti(e),e.A=tf(e.v);var r=e.A,n=e.W;Array.isArray(n)||(n=[String(n)]),tR(r.i,"t",n),e.C=0,r=e.l.I,e.h=new e6,e.g=rw(e.l,r?t:null,!e.s),0<e.O&&(e.M=new eL(T(e.Pa,e,e.g),e.O)),ej(e.U,e.g,"readystatechange",e.nb),t=e.I?eo(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),eH(),function(e,t,r,n,i,s){e.info(function(){if(e.g){if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null}else o=s;return"XMLHTTP REQ ("+n+") [attempt "+i+"]: "+t+"\n"+r+"\n"+o})}(e.j,e.u,e.A,e.m,e.W,e.s)}function tr(e){return!!e.g&&"GET"==e.u&&2!=e.L&&e.l.Ha}function tn(e,t,r){let n=!0,i;for(;!e.J&&e.C<r.length;)if((i=function(e,t){var r=e.C,n=t.indexOf("\n",r);return -1==n?e8:isNaN(r=Number(t.substring(r,n)))?e7:(n+=1)+r>t.length?e8:(t=t.substr(n,r),e.C=n+r,t)}(e,r))==e8){4==t&&(e.o=4,eG(14),n=!1),eV(e.j,e.m,null,"[Incomplete Response]");break}else if(i==e7){e.o=4,eG(15),eV(e.j,e.m,r,"[Invalid Chunk]"),n=!1;break}else eV(e.j,e.m,i,null),tu(e,i);tr(e)&&i!=e8&&i!=e7&&(e.h.g="",e.C=0),4!=t||0!=r.length||e.h.h||(e.o=1,eG(16),n=!1),e.i=e.i&&n,n?0<r.length&&!e.ca&&(e.ca=!0,(t=e.l).g==e&&t.ca&&!t.L&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+r.length),rd(t),t.L=!0,eG(11))):(eV(e.j,e.m,r,"[Invalid Chunked Response]"),tl(e),ta(e))}function ti(e){e.Y=Date.now()+e.P,ts(e,e.P)}function ts(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=eQ(T(e.lb,e),t)}function to(e){e.B&&(b.clearTimeout(e.B),e.B=null)}function ta(e){0==e.l.H||e.J||rp(e.l,e)}function tl(e){to(e);var t=e.M;t&&"function"==typeof t.ra&&t.ra(),e.M=null,eD(e.V),eF(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ra())}function tu(e,t){try{var r=e.l;if(0!=r.H&&(r.g==e||tF(r.h,e))){if(!e.K&&tF(r.h,e)&&3==r.H){try{var n=r.Ja.g.parse(t)}catch(e){n=null}if(Array.isArray(n)&&3==n.length){var i=n;if(0==i[0]){e:if(!r.u){if(r.g){if(r.g.G+3e3<e.G)rg(r),ri(r);else break e}rh(r),eG(18)}}else r.Fa=i[1],0<r.Fa-r.V&&37500>i[2]&&r.M&&0==r.A&&!r.v&&(r.v=eQ(T(r.ib,r),6e3));if(1>=tj(r.h)&&r.na){try{r.na()}catch(e){}r.na=void 0}}else ry(r,11)}else if((e.K||r.g==e)&&rg(r),!O(t))for(i=r.Ja.g.parse(t),t=0;t<i.length;t++){let a=i[t];if(r.V=a[0],a=a[1],2==r.H){if("c"==a[0]){r.J=a[1],r.oa=a[2];let t=a[3];null!=t&&(r.qa=t,r.j.info("VER="+r.qa));let i=a[4];null!=i&&(r.Ga=i,r.j.info("SVER="+r.Ga));let l=a[5];null!=l&&"number"==typeof l&&0<l&&(n=1.5*l,r.K=n,r.j.info("backChannelRequestTimeoutMs_="+n)),n=r;let u=e.g;if(u){let e=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=n.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(tU(s,s.h),s.h=null))}if(n.F){let e=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(n.Da=e,ty(n.G,n.F,e))}}if(r.H=3,r.l&&r.l.Ba(),r.ca&&(r.S=Date.now()-e.G,r.j.info("Handshake RTT: "+r.S+"ms")),(n=r).wa=rv(n,n.I?n.oa:null,n.Y),e.K){tV(n.h,e);var o=n.K;o&&e.setTimeout(o),e.B&&(to(e),ti(e)),n.g=e}else rc(n);0<r.i.length&&ro(r)}else"stop"!=a[0]&&"close"!=a[0]||ry(r,7)}else 3==r.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?ry(r,7):rn(r):"noop"!=a[0]&&r.l&&r.l.Aa(a),r.A=0)}}eH(4)}catch(e){}}function tc(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(w(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var r=function(e){if(e.sa&&"function"==typeof e.sa)return e.sa();if(!e.Z||"function"!=typeof e.Z){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(w(e)||"string"==typeof e){var t=[];e=e.length;for(var r=0;r<e;r++)t.push(r);return t}for(let n in t=[],r=0,e)t[r++]=n;return t}}}(e),n=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(w(e)){for(var t=[],r=e.length,n=0;n<r;n++)t.push(e[n]);return t}for(n in t=[],r=0,e)t[r++]=e[n];return t}(e),i=n.length,s=0;s<i;s++)t.call(void 0,n[s],r&&r[s],e)}(c=e5.prototype).setTimeout=function(e){this.P=e},c.nb=function(e){e=e.target;let t=this.M;t&&3==t3(e)?t.l():this.Pa(e)},c.Pa=function(e){try{if(e==this.g)e:{let c=t3(this.g);var t=this.g.Ia();let h=this.g.da();if(!(3>c)&&(3!=c||$||this.g&&(this.h.h||this.g.ja()||t7(this.g)))){this.J||4!=c||7==t||(8==t||0>=h?eH(3):eH(2)),to(this);var r=this.g.da();this.aa=r;t:if(tr(this)){var n=t7(this.g);e="";var i=n.length,s=4==t3(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){tl(this),ta(this);var o="";break t}this.h.i=new b.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(n[t],{stream:s&&t==i-1});n.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==r,function(e,t,r,n,i,s,o){e.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+i+"]: "+t+"\n"+r+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,c,r),this.i){if(this.ba&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(a)){var u=a;break t}}u=null}if(r=u)eV(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tu(this,r);else{this.i=!1,this.o=3,eG(12),tl(this),ta(this);break e}}this.S?(tn(this,c,o),$&&this.i&&3==c&&(ej(this.U,this.V,"tick",this.mb),this.V.start())):(eV(this.j,this.m,o,null),tu(this,o)),4==c&&tl(this),this.i&&!this.J&&(4==c?rp(this.l,this):(this.i=!1,ti(this)))}else 400==r&&0<o.indexOf("Unknown SID")?(this.o=3,eG(12)):(this.o=0,eG(13)),tl(this),ta(this)}}}catch(e){}finally{}},c.mb=function(){if(this.g){var e=t3(this.g),t=this.g.ja();this.C<t.length&&(to(this),tn(this,e,t),this.i&&4!=e&&ti(this))}},c.cancel=function(){this.J=!0,tl(this)},c.lb=function(){this.B=null;let e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.L&&(eH(),eG(17)),tl(this),this.o=2,ta(this)):ts(this,this.Y-e)};var th=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function td(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof td){this.h=void 0!==t?t:e.h,tg(this,e.j),this.s=e.s,this.g=e.g,tp(this,e.m),this.l=e.l,t=e.i;var r=new tC;r.i=t.i,t.g&&(r.g=new Map(t.g),r.h=t.h),tm(this,r),this.o=e.o}else e&&(r=String(e).match(th))?(this.h=!!t,tg(this,r[1]||"",!0),this.s=tv(r[2]||""),this.g=tv(r[3]||"",!0),tp(this,r[4]),this.l=tv(r[5]||"",!0),tm(this,r[6]||"",!0),this.o=tv(r[7]||"")):(this.h=!!t,this.i=new tC(null,this.h))}function tf(e){return new td(e)}function tg(e,t,r){e.j=r?tv(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function tp(e,t){if(t){if(isNaN(t=Number(t))||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function tm(e,t,r){var n,i;t instanceof tC?(e.i=t,n=e.i,(i=e.h)&&!n.j&&(tS(n),n.i=null,n.g.forEach(function(e,t){var r=t.toLowerCase();t!=r&&(tN(this,t),tR(this,r,e))},n)),n.j=i):(r||(t=tw(t,tI)),e.i=new tC(t,e.h))}function ty(e,t,r){e.i.set(t,r)}function tb(e){return ty(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function tv(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function tw(e,t,r){return"string"==typeof e?(e=encodeURI(e).replace(t,tx),r&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function tx(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}td.prototype.toString=function(){var e=[],t=this.j;t&&e.push(tw(t,tk,!0),":");var r=this.g;return(r||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(tw(t,tk,!0),"@"),e.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.m)&&e.push(":",String(r))),(r=this.l)&&(this.g&&"/"!=r.charAt(0)&&e.push("/"),e.push(tw(r,"/"==r.charAt(0)?tT:tE,!0))),(r=this.i.toString())&&e.push("?",r),(r=this.o)&&e.push("#",tw(r,t_)),e.join("")};var tk=/[#\/\?@]/g,tE=/[#\?:]/g,tT=/[#\?]/g,tI=/[#\?@]/g,t_=/#/g;function tC(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function tS(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var r=0;r<e.length;r++){var n=e[r].indexOf("="),i=null;if(0<=n){var s=e[r].substring(0,n);i=e[r].substring(n+1)}else s=e[r];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,r){e.add(decodeURIComponent(t.replace(/\+/g," ")),r)}))}function tN(e,t){tS(e),t=tD(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function tA(e,t){return tS(e),t=tD(e,t),e.g.has(t)}function tR(e,t,r){tN(e,t),0<r.length&&(e.i=null,e.g.set(tD(e,t),N(r)),e.h+=r.length)}function tD(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(c=tC.prototype).add=function(e,t){tS(this),this.i=null,e=tD(this,e);var r=this.g.get(e);return r||this.g.set(e,r=[]),r.push(t),this.h+=1,this},c.forEach=function(e,t){tS(this),this.g.forEach(function(r,n){r.forEach(function(r){e.call(t,r,n,this)},this)},this)},c.sa=function(){tS(this);let e=Array.from(this.g.values()),t=Array.from(this.g.keys()),r=[];for(let n=0;n<t.length;n++){let i=e[n];for(let e=0;e<i.length;e++)r.push(t[n])}return r},c.Z=function(e){tS(this);let t=[];if("string"==typeof e)tA(this,e)&&(t=t.concat(this.g.get(tD(this,e))));else{e=Array.from(this.g.values());for(let r=0;r<e.length;r++)t=t.concat(e[r])}return t},c.set=function(e,t){return tS(this),this.i=null,tA(this,e=tD(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},c.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},c.toString=function(){if(this.i)return this.i;if(!this.g)return"";let e=[],t=Array.from(this.g.keys());for(var r=0;r<t.length;r++){var n=t[r];let s=encodeURIComponent(String(n)),o=this.Z(n);for(n=0;n<o.length;n++){var i=s;""!==o[n]&&(i+="="+encodeURIComponent(String(o[n]))),e.push(i)}}return this.i=e.join("&")};var tO=class{constructor(e,t){this.h=e,this.g=t}};function tL(e){this.l=e||tP,e=b.PerformanceNavigationTiming?0<(e=b.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(b.g&&b.g.Ka&&b.g.Ka()&&b.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var tP=10;function tM(e){return!!e.h||!!e.g&&e.g.size>=e.j}function tj(e){return e.h?1:e.g?e.g.size:0}function tF(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function tU(e,t){e.g?e.g.add(t):e.h=t}function tV(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function tB(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(let r of e.g.values())t=t.concat(r.F);return t}return N(e.i)}function tz(){}function t$(){this.g=new tz}function tq(e,t,r,n,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(n)}catch(e){}}function tH(e){this.l=e.fc||null,this.j=e.ob||!1}function tK(e,t){ex.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=tG,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}tL.prototype.cancel=function(){if(this.i=tB(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(let e of this.g.values())e.cancel();this.g.clear()}},tz.prototype.stringify=function(e){return b.JSON.stringify(e,void 0)},tz.prototype.parse=function(e){return b.JSON.parse(e,void 0)},_(tH,eY),tH.prototype.g=function(){return new tK(this.l,this.j)},tH.prototype.i=(n={},function(){return n}),_(tK,ex);var tG=0;function tW(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function tQ(e){e.readyState=4,e.l=null,e.j=null,e.A=null,tX(e)}function tX(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(c=tK.prototype).open=function(e,t){if(this.readyState!=tG)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,tX(this)},c.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;let t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||b).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},c.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,tQ(this)),this.readyState=tG},c.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,tX(this)),this.g&&(this.readyState=3,tX(this),this.g))){if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==b.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tW(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))}},c.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?tQ(this):tX(this),3==this.readyState&&tW(this)}},c.Za=function(e){this.g&&(this.response=this.responseText=e,tQ(this))},c.Ya=function(e){this.g&&(this.response=e,tQ(this))},c.ka=function(){this.g&&tQ(this)},c.setRequestHeader=function(e,t){this.v.append(e,t)},c.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},c.getAllResponseHeaders=function(){if(!this.h)return"";let e=[],t=this.h.entries();for(var r=t.next();!r.done;)e.push((r=r.value)[0]+": "+r[1]),r=t.next();return e.join("\r\n")},Object.defineProperty(tK.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var tJ=b.JSON.parse;function tY(e){ex.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=tZ,this.L=this.M=!1}_(tY,ex);var tZ="",t0=/^https?$/i,t1=["POST","PUT"];function t2(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,t4(e),t5(e)}function t4(e){e.F||(e.F=!0,ek(e,"complete"),ek(e,"error"))}function t9(e){if(e.h&&void 0!==y&&(!e.C[1]||4!=t3(e)||2!=e.da())){if(e.v&&4==t3(e))eO(e.La,0,e);else if(ek(e,"readystatechange"),4==t3(e)){e.h=!1;try{let a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t,r,n=!0;break e;default:n=!1}if(!(t=n)){if(r=0===a){var i=String(e.I).match(th)[1]||null;if(!i&&b.self&&b.self.location){var s=b.self.location.protocol;i=s.substr(0,s.length-1)}r=!t0.test(i?i.toLowerCase():"")}t=r}if(t)ek(e,"complete"),ek(e,"success");else{e.m=6;try{var o=2<t3(e)?e.g.statusText:""}catch(e){o=""}e.j=o+" ["+e.da()+"]",t4(e)}}finally{t5(e)}}}}function t5(e,t){if(e.g){t6(e);let r=e.g,n=e.C[0]?v:null;e.g=null,e.C=null,t||ek(e,"ready");try{r.onreadystatechange=n}catch(e){}}}function t6(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(b.clearTimeout(e.A),e.A=null)}function t3(e){return e.g?e.g.readyState:0}function t7(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case tZ:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function t8(e){let t="";return es(e,function(e,r){t+=r+":"+e+"\r\n"}),t}function re(e,t,r){e:{for(n in r){var n=!1;break e}n=!0}n||(r=t8(r),"string"==typeof e?null!=r&&encodeURIComponent(String(r)):ty(e,t,r))}function rt(e,t,r){return r&&r.internalChannelParams&&r.internalChannelParams[e]||t}function rr(e){this.Ga=0,this.i=[],this.j=new eU,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=rt("failFast",!1,e),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=rt("baseRetryDelayMs",5e3,e),this.hb=rt("retryDelaySeedMs",1e4,e),this.eb=rt("forwardChannelMaxRetries",2,e),this.xa=rt("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.K=void 0,this.I=e&&e.supportsCrossDomainXhr||!1,this.J="",this.h=new tL(e&&e.concurrentRequestLimit),this.Ja=new t$,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.j.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function rn(e){if(rs(e),3==e.H){var t=e.W++,r=tf(e.G);ty(r,"SID",e.J),ty(r,"RID",t),ty(r,"TYPE","terminate"),rl(e,r),(t=new e5(e,e.j,t,void 0)).L=2,t.v=tb(tf(r)),r=!1,b.navigator&&b.navigator.sendBeacon&&(r=b.navigator.sendBeacon(t.v.toString(),"")),!r&&b.Image&&((new Image).src=t.v,r=!0),r||(t.g=rw(t.l,null),t.g.ha(t.v)),t.G=Date.now(),ti(t)}rb(e)}function ri(e){e.g&&(rd(e),e.g.cancel(),e.g=null)}function rs(e){ri(e),e.u&&(b.clearTimeout(e.u),e.u=null),rg(e),e.h.cancel(),e.m&&("number"==typeof e.m&&b.clearTimeout(e.m),e.m=null)}function ro(e){tM(e.h)||e.m||(e.m=!0,eC(e.Na,e),e.C=0)}function ra(e,t){var r;r=t?t.m:e.W++;let n=tf(e.G);ty(n,"SID",e.J),ty(n,"RID",r),ty(n,"AID",e.V),rl(e,n),e.o&&e.s&&re(n,e.o,e.s),r=new e5(e,e.j,r,e.C+1),null===e.o&&(r.I=e.s),t&&(e.i=t.F.concat(e.i)),t=ru(e,r,1e3),r.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),tU(e.h,r),te(r,n,t)}function rl(e,t){e.ma&&es(e.ma,function(e,r){ty(t,r,e)}),e.l&&tc({},function(e,r){ty(t,r,e)})}function ru(e,t,r){r=Math.min(e.i.length,r);var n=e.l?T(e.l.Va,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){let e=["count="+r];-1==t?0<r?(t=i[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<r;o++){let r=i[o].h,a=i[o].g;if(0>(r-=t))t=Math.max(0,i[o].h-100),s=!1;else try{!function(e,t,r){let n=r||"";try{tc(e,function(e,r){let i=e;x(e)&&(i=eT(e)),t.push(n+r+"="+encodeURIComponent(i))})}catch(e){throw t.push(n+"type="+encodeURIComponent("_badmap")),e}}(a,e,"req"+r+"_")}catch(e){n&&n(a)}}if(s){n=e.join("&");break e}}}return e=e.i.splice(0,r),t.F=e,n}function rc(e){e.g||e.u||(e.ba=1,eC(e.Ma,e),e.A=0)}function rh(e){return!e.g&&!e.u&&!(3<=e.A)&&(e.ba++,e.u=eQ(T(e.Ma,e),rm(e,e.A)),e.A++,!0)}function rd(e){null!=e.B&&(b.clearTimeout(e.B),e.B=null)}function rf(e){e.g=new e5(e,e.j,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=tf(e.wa);ty(t,"RID","rpc"),ty(t,"SID",e.J),ty(t,"CI",e.M?"0":"1"),ty(t,"AID",e.V),ty(t,"TYPE","xmlhttp"),rl(e,t),e.o&&e.s&&re(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var r=e.g;e=e.oa,r.L=1,r.v=tb(tf(t)),r.s=null,r.S=!0,tt(r,e)}function rg(e){null!=e.v&&(b.clearTimeout(e.v),e.v=null)}function rp(e,t){var r=null;if(e.g==t){rg(e),rd(e),e.g=null;var n=2}else{if(!tF(e.h,t))return;r=t.F,tV(e.h,t),n=1}if(0!=e.H){if(e.ta=t.aa,t.i){if(1==n){r=t.s?t.s.length:0,t=Date.now()-t.G;var i,s,o=e.C;ek(n=e$(),new eW(n,r)),ro(e)}else rc(e)}else if(3==(o=t.o)||0==o&&0<e.ta||!(1==n&&(i=e,s=t,!(tj(i.h)>=i.h.j-(i.m?1:0))&&(i.m?(i.i=s.F.concat(i.i),!0):1!=i.H&&2!=i.H&&!(i.C>=(i.cb?0:i.eb))&&(i.m=eQ(T(i.Na,i,s),rm(i,i.C)),i.C++,!0)))||2==n&&rh(e)))switch(r&&0<r.length&&((t=e.h).i=t.i.concat(r)),o){case 1:ry(e,5);break;case 4:ry(e,10);break;case 3:ry(e,6);break;default:ry(e,2)}}}function rm(e,t){let r=e.ab+Math.floor(Math.random()*e.hb);return e.l||(r*=2),r*t}function ry(e,t){if(e.j.info("Error code "+t),2==t){var r=null;e.l&&(r=null);var n=T(e.pb,e);r||(r=new td("//www.google.com/images/cleardot.gif"),b.location&&"http"==b.location.protocol||tg(r,"https"),tb(r)),function(e,t){let r=new eU;if(b.Image){let n=new Image;n.onload=I(tq,r,n,"TestLoadImage: loaded",!0,t),n.onerror=I(tq,r,n,"TestLoadImage: error",!1,t),n.onabort=I(tq,r,n,"TestLoadImage: abort",!1,t),n.ontimeout=I(tq,r,n,"TestLoadImage: timeout",!1,t),b.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=e}else t(!1)}(r.toString(),n)}else eG(2);e.H=0,e.l&&e.l.za(t),rb(e),rs(e)}function rb(e){if(e.H=0,e.pa=[],e.l){let t=tB(e.h);(0!=t.length||0!=e.i.length)&&(A(e.pa,t),A(e.pa,e.i),e.h.i.length=0,N(e.i),e.i.length=0),e.l.ya()}}function rv(e,t,r){var n=r instanceof td?tf(r):new td(r,void 0);if(""!=n.g)t&&(n.g=t+"."+n.g),tp(n,n.m);else{var i=b.location;n=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new td(null,void 0);n&&tg(s,n),t&&(s.g=t),i&&tp(s,i),r&&(s.l=r),n=s}return r=e.F,t=e.Da,r&&t&&ty(n,r,t),ty(n,"VER",e.qa),rl(e,n),n}function rw(e,t,r){if(t&&!e.I)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new tY(r&&e.Ha&&!e.va?new tH({ob:!0}):e.va)).Oa(e.I),t}function rx(){}function rk(){if(B&&!(10<=Number(Y)))throw Error("Environmental error: no available transport.")}function rE(e,t){ex.call(this),this.g=new rr(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!O(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!O(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new r_(this)}function rT(e){e2.call(this);var t=e.__sm__;if(t){e:{for(let r in t){e=r;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function rI(){e4.call(this),this.status=1}function r_(e){this.g=e}function rC(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function rS(e,t,r){r||(r=0);var n=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)n[i]=t.charCodeAt(r++)|t.charCodeAt(r++)<<8|t.charCodeAt(r++)<<16|t.charCodeAt(r++)<<24;else for(i=0;16>i;++i)n[i]=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;t=e.g[0],r=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^r&(i^s))+n[0]+3614090360&4294967295;o=s+(i^(t=r+(o<<7&4294967295|o>>>25))&(r^i))+n[1]+3905402710&4294967295,o=i+(r^(s=t+(o<<12&4294967295|o>>>20))&(t^r))+n[2]+606105819&4294967295,o=r+(t^(i=s+(o<<17&4294967295|o>>>15))&(s^t))+n[3]+3250441966&4294967295,o=t+(s^(r=i+(o<<22&4294967295|o>>>10))&(i^s))+n[4]+4118548399&4294967295,o=s+(i^(t=r+(o<<7&4294967295|o>>>25))&(r^i))+n[5]+1200080426&4294967295,o=i+(r^(s=t+(o<<12&4294967295|o>>>20))&(t^r))+n[6]+2821735955&4294967295,o=r+(t^(i=s+(o<<17&4294967295|o>>>15))&(s^t))+n[7]+4249261313&4294967295,o=t+(s^(r=i+(o<<22&4294967295|o>>>10))&(i^s))+n[8]+1770035416&4294967295,o=s+(i^(t=r+(o<<7&4294967295|o>>>25))&(r^i))+n[9]+2336552879&4294967295,o=i+(r^(s=t+(o<<12&4294967295|o>>>20))&(t^r))+n[10]+4294925233&4294967295,o=r+(t^(i=s+(o<<17&4294967295|o>>>15))&(s^t))+n[11]+2304563134&4294967295,o=t+(s^(r=i+(o<<22&4294967295|o>>>10))&(i^s))+n[12]+1804603682&4294967295,o=s+(i^(t=r+(o<<7&4294967295|o>>>25))&(r^i))+n[13]+4254626195&4294967295,o=i+(r^(s=t+(o<<12&4294967295|o>>>20))&(t^r))+n[14]+2792965006&4294967295,o=r+(t^(i=s+(o<<17&4294967295|o>>>15))&(s^t))+n[15]+1236535329&4294967295,r=i+(o<<22&4294967295|o>>>10),o=t+(i^s&(r^i))+n[1]+4129170786&4294967295,t=r+(o<<5&4294967295|o>>>27),o=s+(r^i&(t^r))+n[6]+3225465664&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^r&(s^t))+n[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=r+(s^t&(i^s))+n[0]+3921069994&4294967295,r=i+(o<<20&4294967295|o>>>12),o=t+(i^s&(r^i))+n[5]+3593408605&4294967295,t=r+(o<<5&4294967295|o>>>27),o=s+(r^i&(t^r))+n[10]+38016083&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^r&(s^t))+n[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=r+(s^t&(i^s))+n[4]+3889429448&4294967295,r=i+(o<<20&4294967295|o>>>12),o=t+(i^s&(r^i))+n[9]+568446438&4294967295,t=r+(o<<5&4294967295|o>>>27),o=s+(r^i&(t^r))+n[14]+3275163606&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^r&(s^t))+n[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=r+(s^t&(i^s))+n[8]+1163531501&4294967295,r=i+(o<<20&4294967295|o>>>12),o=t+(i^s&(r^i))+n[13]+2850285829&4294967295,t=r+(o<<5&4294967295|o>>>27),o=s+(r^i&(t^r))+n[2]+4243563512&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^r&(s^t))+n[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=r+(s^t&(i^s))+n[12]+2368359562&4294967295,o=t+((r=i+(o<<20&4294967295|o>>>12))^i^s)+n[5]+4294588738&4294967295,o=s+((t=r+(o<<4&4294967295|o>>>28))^r^i)+n[8]+2272392833&4294967295,o=i+((s=t+(o<<11&4294967295|o>>>21))^t^r)+n[11]+1839030562&4294967295,o=r+((i=s+(o<<16&4294967295|o>>>16))^s^t)+n[14]+4259657740&4294967295,o=t+((r=i+(o<<23&4294967295|o>>>9))^i^s)+n[1]+2763975236&4294967295,o=s+((t=r+(o<<4&4294967295|o>>>28))^r^i)+n[4]+1272893353&4294967295,o=i+((s=t+(o<<11&4294967295|o>>>21))^t^r)+n[7]+4139469664&4294967295,o=r+((i=s+(o<<16&4294967295|o>>>16))^s^t)+n[10]+3200236656&4294967295,o=t+((r=i+(o<<23&4294967295|o>>>9))^i^s)+n[13]+681279174&4294967295,o=s+((t=r+(o<<4&4294967295|o>>>28))^r^i)+n[0]+3936430074&4294967295,o=i+((s=t+(o<<11&4294967295|o>>>21))^t^r)+n[3]+3572445317&4294967295,o=r+((i=s+(o<<16&4294967295|o>>>16))^s^t)+n[6]+76029189&4294967295,o=t+((r=i+(o<<23&4294967295|o>>>9))^i^s)+n[9]+3654602809&4294967295,o=s+((t=r+(o<<4&4294967295|o>>>28))^r^i)+n[12]+3873151461&4294967295,o=i+((s=t+(o<<11&4294967295|o>>>21))^t^r)+n[15]+530742520&4294967295,o=r+((i=s+(o<<16&4294967295|o>>>16))^s^t)+n[2]+3299628645&4294967295,r=i+(o<<23&4294967295|o>>>9),o=t+(i^(r|~s))+n[0]+4096336452&4294967295,t=r+(o<<6&4294967295|o>>>26),o=s+(r^(t|~i))+n[7]+1126891415&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~r))+n[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=r+(s^(i|~t))+n[5]+4237533241&4294967295,r=i+(o<<21&4294967295|o>>>11),o=t+(i^(r|~s))+n[12]+1700485571&4294967295,t=r+(o<<6&4294967295|o>>>26),o=s+(r^(t|~i))+n[3]+2399980690&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~r))+n[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=r+(s^(i|~t))+n[1]+2240044497&4294967295,r=i+(o<<21&4294967295|o>>>11),o=t+(i^(r|~s))+n[8]+1873313359&4294967295,t=r+(o<<6&4294967295|o>>>26),o=s+(r^(t|~i))+n[15]+4264355552&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~r))+n[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=r+(s^(i|~t))+n[13]+1309151649&4294967295,r=i+(o<<21&4294967295|o>>>11),o=t+(i^(r|~s))+n[4]+4149444226&4294967295,t=r+(o<<6&4294967295|o>>>26),o=s+(r^(t|~i))+n[11]+3174756917&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~r))+n[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=r+(s^(i|~t))+n[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function rN(e,t){this.h=t;for(var r=[],n=!0,i=e.length-1;0<=i;i--){var s=0|e[i];n&&s==t||(r[i]=s,n=!1)}this.g=r}(c=tY.prototype).Oa=function(e){this.M=e},c.ha=function(e,t,r,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():a.g(),this.C=this.u?eZ(this.u):eZ(a),this.g.onreadystatechange=T(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(e){t2(this,e);return}if(e=r||"",r=new Map(this.headers),n){if(Object.getPrototypeOf(n)===Object.prototype)for(var s in n)r.set(s,n[s]);else if("function"==typeof n.keys&&"function"==typeof n.get)for(let e of n.keys())r.set(e,n.get(e));else throw Error("Unknown input type for opt_headers: "+String(n))}for(let[i,o]of(n=Array.from(r.keys()).find(e=>"content-type"==e.toLowerCase()),s=b.FormData&&e instanceof b.FormData,!(0<=S(t1,t))||n||s||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r))this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{var o;t6(this),0<this.B&&((this.L=(o=this.g,B&&U(J,9,function(){let e=0,t=L(String(i)).split("."),r=L("9").split("."),n=Math.max(t.length,r.length);for(let i=0;0==e&&i<n;i++){var s=t[i]||"",o=r[i]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==s[0].length&&0==o[0].length)break;e=P(0==s[1].length?0:parseInt(s[1],10),0==o[1].length?0:parseInt(o[1],10))||P(0==s[2].length,0==o[2].length)||P(s[2],o[2]),s=s[3],o=o[3]}while(0==e)}return 0<=e})&&"number"==typeof o.timeout&&void 0!==o.ontimeout))?(this.g.timeout=this.B,this.g.ontimeout=T(this.ua,this)):this.A=eO(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){t2(this,e)}},c.ua=function(){void 0!==y&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ek(this,"timeout"),this.abort(8))},c.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ek(this,"complete"),ek(this,"abort"),t5(this))},c.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),t5(this,!0)),tY.$.N.call(this)},c.La=function(){this.s||(this.G||this.v||this.l?t9(this):this.kb())},c.kb=function(){t9(this)},c.da=function(){try{return 2<t3(this)?this.g.status:-1}catch(e){return -1}},c.ja=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},c.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),tJ(t)}},c.Ia=function(){return this.m},c.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(c=rr.prototype).qa=8,c.H=1,c.Na=function(e){if(this.m){if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;let i=new e5(this,this.j,e,void 0),s=this.s;if(this.U&&(s?el(s=eo(s),this.U):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,r=0;r<this.i.length;r++){t:{var n=this.i[r];if("__data__"in n.g&&"string"==typeof(n=n.g.__data__)){n=n.length;break t}n=void 0}if(void 0===n)break;if(4096<(t+=n)){t=r;break e}if(4096===t||r===this.i.length-1){t=r+1;break e}}t=1e3}else t=1e3;t=ru(this,i,t),ty(r=tf(this.G),"RID",e),ty(r,"CVER",22),this.F&&ty(r,"X-HTTP-Session-Id",this.F),rl(this,r),s&&(this.O?t="headers="+encodeURIComponent(String(t8(s)))+"&"+t:this.o&&re(r,this.o,s)),tU(this.h,i),this.bb&&ty(r,"TYPE","init"),this.P?(ty(r,"$req",t),ty(r,"SID","null"),i.ba=!0,te(i,r,null)):te(i,r,t),this.H=2}}else 3==this.H&&(e?ra(this,e):0==this.i.length||tM(this.h)||ra(this))}},c.Ma=function(){if(this.u=null,rf(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var e=2*this.S;this.j.info("BP detection timer enabled: "+e),this.B=eQ(T(this.jb,this),e)}},c.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,eG(10),ri(this),rf(this))},c.ib=function(){null!=this.v&&(this.v=null,ri(this),rh(this),eG(19))},c.pb=function(e){e?(this.j.info("Successfully pinged google.com"),eG(2)):(this.j.info("Failed to ping google.com"),eG(1))},(c=rx.prototype).Ba=function(){},c.Aa=function(){},c.za=function(){},c.ya=function(){},c.Va=function(){},rk.prototype.g=function(e,t){return new rE(e,t)},_(rE,ex),rE.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var e=this.g,t=this.l,r=this.h||void 0;eG(0),e.Y=t,e.ma=r||{},e.M=e.aa,e.G=rv(e,null,e.Y),ro(e)},rE.prototype.close=function(){rn(this.g)},rE.prototype.u=function(e){var t=this.g;if("string"==typeof e){var r={};r.__data__=e,e=r}else this.v&&((r={}).__data__=eT(e),e=r);t.i.push(new tO(t.fb++,e)),3==t.H&&ro(t)},rE.prototype.N=function(){this.g.l=null,delete this.j,rn(this.g),delete this.g,rE.$.N.call(this)},_(rT,e2),_(rI,e4),_(r_,rx),r_.prototype.Ba=function(){ek(this.g,"a")},r_.prototype.Aa=function(e){ek(this.g,new rT(e))},r_.prototype.za=function(e){ek(this.g,new rI)},r_.prototype.ya=function(){ek(this.g,"b")},_(rC,function(){this.blockSize=-1}),rC.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},rC.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,n=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=r;)rS(this,e,s),s+=this.blockSize;if("string"==typeof e){for(;s<t;)if(n[i++]=e.charCodeAt(s++),i==this.blockSize){rS(this,n),i=0;break}}else for(;s<t;)if(n[i++]=e[s++],i==this.blockSize){rS(this,n),i=0;break}}this.h=i,this.i+=t},rC.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var r=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&r,r/=256;for(this.j(e),e=Array(16),t=r=0;4>t;++t)for(var n=0;32>n;n+=8)e[r++]=this.g[t]>>>n&255;return e};var rA={};function rR(e){return -128<=e&&128>e?U(rA,e,function(e){return new rN([0|e],0>e?-1:0)}):new rN([0|e],0>e?-1:0)}function rD(e){if(isNaN(e)||!isFinite(e))return rL;if(0>e)return rU(rD(-e));for(var t=[],r=1,n=0;e>=r;n++)t[n]=e/r|0,r*=rO;return new rN(t,0)}var rO=4294967296,rL=rR(0),rP=rR(1),rM=rR(16777216);function rj(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function rF(e){return -1==e.h}function rU(e){for(var t=e.g.length,r=[],n=0;n<t;n++)r[n]=~e.g[n];return new rN(r,~e.h).add(rP)}function rV(e,t){return e.add(rU(t))}function rB(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function rz(e,t){this.g=e,this.h=t}function r$(e,t){if(rj(t))throw Error("division by zero");if(rj(e))return new rz(rL,rL);if(rF(e))return t=r$(rU(e),t),new rz(rU(t.g),rU(t.h));if(rF(t))return t=r$(e,rU(t)),new rz(rU(t.g),t.h);if(30<e.g.length){if(rF(e)||rF(t))throw Error("slowDivide_ only works with positive integers.");for(var r=rP,n=t;0>=n.X(e);)r=rq(r),n=rq(n);var i=rH(r,1),s=rH(n,1);for(n=rH(n,2),r=rH(r,2);!rj(n);){var o=s.add(n);0>=o.X(e)&&(i=i.add(r),s=o),n=rH(n,1),r=rH(r,1)}return t=rV(e,i.R(t)),new rz(i,t)}for(i=rL;0<=e.X(t);){for(n=48>=(n=Math.ceil(Math.log(r=Math.max(1,Math.floor(e.ea()/t.ea())))/Math.LN2))?1:Math.pow(2,n-48),o=(s=rD(r)).R(t);rF(o)||0<o.X(e);)r-=n,o=(s=rD(r)).R(t);rj(s)&&(s=rP),i=i.add(s),e=rV(e,o)}return new rz(i,e)}function rq(e){for(var t=e.g.length+1,r=[],n=0;n<t;n++)r[n]=e.D(n)<<1|e.D(n-1)>>>31;return new rN(r,e.h)}function rH(e,t){var r=t>>5;t%=32;for(var n=e.g.length-r,i=[],s=0;s<n;s++)i[s]=0<t?e.D(s+r)>>>t|e.D(s+r+1)<<32-t:e.D(s+r);return new rN(i,e.h)}(c=rN.prototype).ea=function(){if(rF(this))return-rU(this).ea();for(var e=0,t=1,r=0;r<this.g.length;r++){var n=this.D(r);e+=(0<=n?n:rO+n)*t,t*=rO}return e},c.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(rj(this))return"0";if(rF(this))return"-"+rU(this).toString(e);for(var t=rD(Math.pow(e,6)),r=this,n="";;){var i=r$(r,t).g,s=((0<(r=rV(r,i.R(t))).g.length?r.g[0]:r.h)>>>0).toString(e);if(rj(r=i))return s+n;for(;6>s.length;)s="0"+s;n=s+n}},c.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},c.X=function(e){return rF(e=rV(this,e))?-1:rj(e)?0:1},c.abs=function(){return rF(this)?rU(this):this},c.add=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0,i=0;i<=t;i++){var s=n+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);n=o>>>16,s&=65535,o&=65535,r[i]=o<<16|s}return new rN(r,-2147483648&r[r.length-1]?-1:0)},c.R=function(e){if(rj(this)||rj(e))return rL;if(rF(this))return rF(e)?rU(this).R(rU(e)):rU(rU(this).R(e));if(rF(e))return rU(this.R(rU(e)));if(0>this.X(rM)&&0>e.X(rM))return rD(this.ea()*e.ea());for(var t=this.g.length+e.g.length,r=[],n=0;n<2*t;n++)r[n]=0;for(n=0;n<this.g.length;n++)for(var i=0;i<e.g.length;i++){var s=this.D(n)>>>16,o=65535&this.D(n),a=e.D(i)>>>16,l=65535&e.D(i);r[2*n+2*i]+=o*l,rB(r,2*n+2*i),r[2*n+2*i+1]+=s*l,rB(r,2*n+2*i+1),r[2*n+2*i+1]+=o*a,rB(r,2*n+2*i+1),r[2*n+2*i+2]+=s*a,rB(r,2*n+2*i+2)}for(n=0;n<t;n++)r[n]=r[2*n+1]<<16|r[2*n];for(n=t;n<2*t;n++)r[n]=0;return new rN(r,0)},c.gb=function(e){return r$(this,e).h},c.and=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0;n<t;n++)r[n]=this.D(n)&e.D(n);return new rN(r,this.h&e.h)},c.or=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0;n<t;n++)r[n]=this.D(n)|e.D(n);return new rN(r,this.h|e.h)},c.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0;n<t;n++)r[n]=this.D(n)^e.D(n);return new rN(r,this.h^e.h)},rk.prototype.createWebChannel=rk.prototype.g,rE.prototype.send=rE.prototype.u,rE.prototype.open=rE.prototype.m,rE.prototype.close=rE.prototype.close,eX.NO_ERROR=0,eX.TIMEOUT=8,eX.HTTP_ERROR=6,eJ.COMPLETE="complete",e0.EventType=e1,e1.OPEN="a",e1.CLOSE="b",e1.ERROR="c",e1.MESSAGE="d",ex.prototype.listen=ex.prototype.O,tY.prototype.listenOnce=tY.prototype.P,tY.prototype.getLastError=tY.prototype.Sa,tY.prototype.getLastErrorCode=tY.prototype.Ia,tY.prototype.getStatus=tY.prototype.da,tY.prototype.getResponseJson=tY.prototype.Wa,tY.prototype.getResponseText=tY.prototype.ja,tY.prototype.send=tY.prototype.ha,tY.prototype.setWithCredentials=tY.prototype.Oa,rC.prototype.digest=rC.prototype.l,rC.prototype.reset=rC.prototype.reset,rC.prototype.update=rC.prototype.j,rN.prototype.add=rN.prototype.add,rN.prototype.multiply=rN.prototype.R,rN.prototype.modulo=rN.prototype.gb,rN.prototype.compare=rN.prototype.X,rN.prototype.toNumber=rN.prototype.ea,rN.prototype.toString=rN.prototype.toString,rN.prototype.getBits=rN.prototype.D,rN.fromNumber=rD,rN.fromString=function e(t,r){if(0==t.length)throw Error("number format error: empty string");if(2>(r=r||10)||36<r)throw Error("radix out of range: "+r);if("-"==t.charAt(0))return rU(e(t.substring(1),r));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=rD(Math.pow(r,8)),i=rL,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),r);8>o?(o=rD(Math.pow(r,o)),i=i.R(o).add(rD(a))):i=(i=i.R(n)).add(rD(a))}return i};var rK=m.createWebChannelTransport=function(){return new rk},rG=m.getStatEventTarget=function(){return e$()},rW=m.ErrorCode=eX,rQ=m.EventType=eJ,rX=m.Event=eB,rJ=m.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},rY=m.FetchXmlHttpFactory=tH,rZ=m.WebChannel=e0,r0=m.XhrIo=tY,r1=m.Md5=rC,r2=m.Integer=rN;r(3454);let r4="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r9{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}r9.UNAUTHENTICATED=new r9(null),r9.GOOGLE_CREDENTIALS=new r9("google-credentials-uid"),r9.FIRST_PARTY=new r9("first-party-uid"),r9.MOCK_USER=new r9("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let r5="9.21.0",r6=new f.Yd("@firebase/firestore");function r3(){return r6.logLevel}function r7(e,...t){if(r6.logLevel<=f.in.DEBUG){let r=t.map(nt);r6.debug(`Firestore (${r5}): ${e}`,...r)}}function r8(e,...t){if(r6.logLevel<=f.in.ERROR){let r=t.map(nt);r6.error(`Firestore (${r5}): ${e}`,...r)}}function ne(e,...t){if(r6.logLevel<=f.in.WARN){let r=t.map(nt);r6.warn(`Firestore (${r5}): ${e}`,...r)}}function nt(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(e="Unexpected state"){let t=`FIRESTORE (${r5}) INTERNAL ASSERTION FAILED: `+e;throw r8(t),Error(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nn={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ni extends g.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class na{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(r9.UNAUTHENTICATED))}shutdown(){}}class nl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class nu{constructor(e){this.t=e,this.currentUser=r9.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i,n=e=>this.i!==r?(r=this.i,t(e)):Promise.resolve(),i=new ns;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ns,e.enqueueRetryable(()=>n(this.currentUser))};let s=()=>{let t=i;e.enqueueRetryable(async()=>{await t.promise,await n(this.currentUser)})},o=e=>{r7("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?o(e):(r7("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ns)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(r7("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?("string"==typeof t.accessToken||nr(),new no(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return null===e||"string"==typeof e||nr(),new r9(e)}}class nc{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=r9.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);let e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class nh{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new nc(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(r9.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nd{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nf{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){let r=e=>{null!=e.error&&r7("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let r=e.token!==this.T;return this.T=e.token,r7("FirebaseAppCheckTokenProvider",`Received ${r?"new":"existing"} token.`),r?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>r(t))};let n=e=>{r7("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit(e=>n(e)),setTimeout(()=>{if(!this.appCheck){let e=this.I.getImmediate({optional:!0});e?n(e):r7("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?("string"==typeof e.token||nr(),this.T=e.token,new nd(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{static A(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let n=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){let t="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(r);else for(let t=0;t<e;t++)r[t]=Math.floor(256*Math.random());return r}(40);for(let i=0;i<n.length;++i)r.length<20&&n[i]<t&&(r+=e.charAt(n[i]%e.length))}return r}}function np(e,t){return e<t?-1:e>t?1:0}function nm(e,t,r){return e.length===t.length&&e.every((e,n)=>r(e,t[n]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new ni(nn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800||e>=253402300800)throw new ni(nn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ny.fromMillis(Date.now())}static fromDate(e){return ny.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3);return new ny(t,Math.floor(1e6*(e-1e3*t)))}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?np(this.nanoseconds,e.nanoseconds):np(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e){this.timestamp=e}static fromTimestamp(e){return new nb(e)}static min(){return new nb(new ny(0,0))}static max(){return new nb(new ny(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e,t,r){void 0===t?t=0:t>e.length&&nr(),void 0===r?r=e.length-t:r>e.length-t&&nr(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===nv.comparator(this,e)}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof nv?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let n=0;n<r;n++){let r=e.get(n),i=t.get(n);if(r<i)return -1;if(r>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class nw extends nv{construct(e,t,r){return new nw(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new ni(nn.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(e=>e.length>0))}return new nw(t)}static emptyPath(){return new nw([])}}let nx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nk extends nv{construct(e,t,r){return new nk(e,t,r)}static isValidIdentifier(e){return nx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nk.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new nk(["__name__"])}static fromServerFormat(e){let t=[],r="",n=0,i=()=>{if(0===r.length)throw new ni(nn.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;n<e.length;){let t=e[n];if("\\"===t){if(n+1===e.length)throw new ni(nn.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let t=e[n+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ni(nn.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=t,n+=2}else"`"===t?(s=!s,n++):"."!==t||s?(r+=t,n++):(i(),n++)}if(i(),s)throw new ni(nn.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nk(t)}static emptyPath(){return new nk([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e){this.path=e}static fromPath(e){return new nE(nw.fromString(e))}static fromName(e){return new nE(nw.fromString(e).popFirst(5))}static empty(){return new nE(nw.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===nw.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return nw.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nE(new nw(e.slice()))}}class nT{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new nT(nb.min(),nE.empty(),-1)}static max(){return new nT(nb.max(),nE.empty(),-1)}}class nI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n_(e){if(e.code!==nn.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;r7("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new nC((r,n)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(r,n)},this.catchCallback=e=>{this.wrapFailure(t,e).next(r,n)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof nC?t:nC.resolve(t)}catch(e){return nC.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):nC.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):nC.reject(t)}static resolve(e){return new nC((t,r)=>{t(e)})}static reject(e){return new nC((t,r)=>{r(e)})}static waitFor(e){return new nC((t,r)=>{let n=0,i=0,s=!1;e.forEach(e=>{++n,e.next(()=>{++i,s&&i===n&&t()},e=>r(e))}),s=!0,i===n&&t()})}static or(e){let t=nC.resolve(!1);for(let r of e)t=t.next(e=>e?nC.resolve(e):r());return t}static forEach(e,t){let r=[];return e.forEach((e,n)=>{r.push(t.call(this,e,n))}),this.waitFor(r)}static mapArray(e,t){return new nC((r,n)=>{let i=e.length,s=Array(i),o=0;for(let a=0;a<i;a++){let l=a;t(e[l]).next(e=>{s[l]=e,++o===i&&r(s)},e=>n(e))}})}static doWhile(e,t){return new nC((r,n)=>{let i=()=>{!0===e()?t().next(()=>{i()},n):r()};i()})}}function nS(e){return"IndexedDbTransactionError"===e.name}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ut&&this.ut(e),e}}function nA(e){return 0===e&&1/e==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(e){let t=0;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function nD(e,t){for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function nO(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}nN.ct=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(e,t){this.comparator=e,this.root=t||nM.EMPTY}insert(e,t){return new nL(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nM.BLACK,null,null))}remove(e){return new nL(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nM.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let n=this.comparator(e,r.key);if(0===n)return t+r.left.size;n<0?r=r.left:(t+=r.left.size+1,r=r.right)}return -1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nP(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nP(this.root,e,this.comparator,!1)}getReverseIterator(){return new nP(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nP(this.root,e,this.comparator,!0)}}class nP{constructor(e,t,r,n){this.isReverse=n,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&n&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nM{constructor(e,t,r,n,i){this.key=e,this.value=t,this.color=null!=r?r:nM.RED,this.left=null!=n?n:nM.EMPTY,this.right=null!=i?i:nM.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,n,i){return new nM(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=n?n:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let n=this,i=r(e,n.key);return(n=i<0?n.copy(null,null,null,n.left.insert(e,t,r),null):0===i?n.copy(null,t,null,null,null):n.copy(null,null,null,null,n.right.insert(e,t,r))).fixUp()}removeMin(){if(this.left.isEmpty())return nM.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}remove(e,t){let r,n=this;if(0>t(e,n.key))n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),0===t(e,n.key)){if(n.right.isEmpty())return nM.EMPTY;r=n.right.min(),n=n.copy(r.key,r.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}rotateLeft(){let e=this.copy(null,null,nM.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,nM.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nr();let e=this.left.check();if(e!==this.right.check())throw nr();return e+(this.isRed()?0:1)}}nM.EMPTY=null,nM.RED=!0,nM.BLACK=!1,nM.EMPTY=new class{constructor(){this.size=0}get key(){throw nr()}get value(){throw nr()}get color(){throw nr()}get left(){throw nr()}get right(){throw nr()}copy(e,t,r,n,i){return this}insert(e,t,r){return new nM(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e){this.comparator=e,this.data=new nL(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let n=r.getNext();if(this.comparator(n.key,e[1])>=0)return;t(n.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nF(this.data.getIterator())}getIteratorFrom(e){return new nF(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof nj)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let e=t.getNext().key,n=r.getNext().key;if(0!==this.comparator(e,n))return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new nj(this.comparator);return t.data=e,t}}class nF{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(e){this.fields=e,e.sort(nk.comparator)}static empty(){return new nU([])}unionWith(e){let t=new nj(nk.comparator);for(let e of this.fields)t=t.add(e);for(let r of e)t=t.add(r);return new nU(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nm(this.fields,e.fields,(e,t)=>e.isEqual(t))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new nV("Invalid base64 string: "+e):e}}(e);return new nB(t)}static fromUint8Array(e){let t=function(e){let t="";for(let r=0;r<e.length;++r)t+=String.fromCharCode(e[r]);return t}(e);return new nB(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return np(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nB.EMPTY_BYTE_STRING=new nB("");let nz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function n$(e){if(e||nr(),"string"==typeof e){let t=0,r=nz.exec(e);if(r||nr(),r[1]){let e=r[1];t=Number(e=(e+"000000000").substr(0,9))}let n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:nq(e.seconds),nanos:nq(e.nanos)}}function nq(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function nH(e){return"string"==typeof e?nB.fromBase64String(e):nB.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nK(e){var t,r;return"server_timestamp"===(null===(r=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function nG(e){let t=e.mapValue.fields.__previous_value__;return nK(t)?nG(t):t}function nW(e){let t=n$(e.mapValue.fields.__local_write_time__.timestampValue);return new ny(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nQ{constructor(e,t,r,n,i,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=n,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class nX{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new nX("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof nX&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nJ={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function nY(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?nK(e)?4:it(e)?9007199254740991:10:nr()}function nZ(e,t){if(e===t)return!0;let r=nY(e);if(r!==nY(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return nW(e).isEqual(nW(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let r=n$(e.timestampValue),n=n$(t.timestampValue);return r.seconds===n.seconds&&r.nanos===n.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return nH(e.bytesValue).isEqual(nH(t.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return nq(e.geoPointValue.latitude)===nq(t.geoPointValue.latitude)&&nq(e.geoPointValue.longitude)===nq(t.geoPointValue.longitude);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return nq(e.integerValue)===nq(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){let r=nq(e.doubleValue),n=nq(t.doubleValue);return r===n?nA(r)===nA(n):isNaN(r)&&isNaN(n)}return!1}(e,t);case 9:return nm(e.arrayValue.values||[],t.arrayValue.values||[],nZ);case 10:return function(e,t){let r=e.mapValue.fields||{},n=t.mapValue.fields||{};if(nR(r)!==nR(n))return!1;for(let e in r)if(r.hasOwnProperty(e)&&(void 0===n[e]||!nZ(r[e],n[e])))return!1;return!0}(e,t);default:return nr()}}function n0(e,t){return void 0!==(e.values||[]).find(e=>nZ(e,t))}function n1(e,t){if(e===t)return 0;let r=nY(e),n=nY(t);if(r!==n)return np(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return np(e.booleanValue,t.booleanValue);case 2:return function(e,t){let r=nq(e.integerValue||e.doubleValue),n=nq(t.integerValue||t.doubleValue);return r<n?-1:r>n?1:r===n?0:isNaN(r)?isNaN(n)?0:-1:1}(e,t);case 3:return n2(e.timestampValue,t.timestampValue);case 4:return n2(nW(e),nW(t));case 5:return np(e.stringValue,t.stringValue);case 6:return function(e,t){let r=nH(e),n=nH(t);return r.compareTo(n)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){let r=e.split("/"),n=t.split("/");for(let e=0;e<r.length&&e<n.length;e++){let t=np(r[e],n[e]);if(0!==t)return t}return np(r.length,n.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){let r=np(nq(e.latitude),nq(t.latitude));return 0!==r?r:np(nq(e.longitude),nq(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){let r=e.values||[],n=t.values||[];for(let e=0;e<r.length&&e<n.length;++e){let t=n1(r[e],n[e]);if(t)return t}return np(r.length,n.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===nJ.mapValue&&t===nJ.mapValue)return 0;if(e===nJ.mapValue)return 1;if(t===nJ.mapValue)return -1;let r=e.fields||{},n=Object.keys(r),i=t.fields||{},s=Object.keys(i);n.sort(),s.sort();for(let e=0;e<n.length&&e<s.length;++e){let t=np(n[e],s[e]);if(0!==t)return t;let o=n1(r[n[e]],i[s[e]]);if(0!==o)return o}return np(n.length,s.length)}(e.mapValue,t.mapValue);default:throw nr()}}function n2(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return np(e,t);let r=n$(e),n=n$(t),i=np(r.seconds,n.seconds);return 0!==i?i:np(r.nanos,n.nanos)}function n4(e){var t,r;return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){let t=n$(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?nH(e.bytesValue).toBase64():"referenceValue"in e?(r=e.referenceValue,nE.fromName(r).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",r=!0;for(let n of e.values||[])r?r=!1:t+=",",t+=n4(n);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){let t=Object.keys(e.fields||{}).sort(),r="{",n=!0;for(let i of t)n?n=!1:r+=",",r+=`${i}:${n4(e.fields[i])}`;return r+"}"}(e.mapValue):nr()}function n9(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function n5(e){return!!e&&"integerValue"in e}function n6(e){return!!e&&"arrayValue"in e}function n3(e){return!!e&&"nullValue"in e}function n7(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function n8(e){return!!e&&"mapValue"in e}function ie(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){let t={mapValue:{fields:{}}};return nD(e.mapValue.fields,(e,r)=>t.mapValue.fields[e]=ie(r)),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=ie(e.arrayValue.values[r]);return t}return Object.assign({},e)}function it(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.value=e}static empty(){return new ir({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(!n8(t=(t.mapValue.fields||{})[e.get(r)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ie(t)}setAll(e){let t=nk.emptyPath(),r={},n=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){let e=this.getFieldsMap(t);this.applyChanges(e,r,n),r={},n=[],t=i.popLast()}e?r[i.lastSegment()]=ie(e):n.push(i.lastSegment())});let i=this.getFieldsMap(t);this.applyChanges(i,r,n)}delete(e){let t=this.field(e.popLast());n8(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return nZ(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let n=t.mapValue.fields[e.get(r)];n8(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=n),t=n}return t.mapValue.fields}applyChanges(e,t,r){for(let n of(nD(t,(t,r)=>e[t]=r),r))delete e[n]}clone(){return new ir(ie(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,t,r,n,i,s,o){this.key=e,this.documentType=t,this.version=r,this.readTime=n,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new ii(e,0,nb.min(),nb.min(),nb.min(),ir.empty(),0)}static newFoundDocument(e,t,r,n){return new ii(e,1,t,nb.min(),r,n,0)}static newNoDocument(e,t){return new ii(e,2,t,nb.min(),nb.min(),ir.empty(),0)}static newUnknownDocument(e,t){return new ii(e,3,t,nb.min(),nb.min(),ir.empty(),2)}convertToFoundDocument(e,t){return this.createTime.isEqual(nb.min())&&(2===this.documentType||0===this.documentType)&&(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ir.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ir.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nb.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ii&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ii(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,t){this.position=e,this.inclusive=t}}function io(e,t,r){let n=0;for(let i=0;i<e.position.length;i++){let s=t[i],o=e.position[i];if(n=s.field.isKeyField()?nE.comparator(nE.fromName(o.referenceValue),r.key):n1(o,r.data.field(s.field)),"desc"===s.dir&&(n*=-1),0!==n)break}return n}function ia(e,t){if(null===e)return null===t;if(null===t||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!nZ(e.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,t="asc"){this.field=e,this.dir=t}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{}class ic extends iu{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new ip(e,t,r):"array-contains"===t?new iv(e,r):"in"===t?new iw(e,r):"not-in"===t?new ix(e,r):"array-contains-any"===t?new ik(e,r):new ic(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new im(e,r):new iy(e,r)}matches(e){let t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(n1(t,this.value)):null!==t&&nY(this.value)===nY(t)&&this.matchesComparison(n1(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nr()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ih extends iu{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new ih(e,t)}matches(e){return id(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){let e=this.lt(e=>e.isInequality());return null!==e?e.field:null}lt(e){for(let t of this.getFlattenedFilters())if(e(t))return t;return null}}function id(e){return"and"===e.op}function ig(e){for(let t of e.filters)if(t instanceof ih)return!1;return!0}class ip extends ic{constructor(e,t,r){super(e,t,r),this.key=nE.fromName(r.referenceValue)}matches(e){let t=nE.comparator(e.key,this.key);return this.matchesComparison(t)}}class im extends ic{constructor(e,t){super(e,"in",t),this.keys=ib("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class iy extends ic{constructor(e,t){super(e,"not-in",t),this.keys=ib("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ib(e,t){var r;return((null===(r=t.arrayValue)||void 0===r?void 0:r.values)||[]).map(e=>nE.fromName(e.referenceValue))}class iv extends ic{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return n6(t)&&n0(t.arrayValue,this.value)}}class iw extends ic{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return null!==t&&n0(this.value.arrayValue,t)}}class ix extends ic{constructor(e,t){super(e,"not-in",t)}matches(e){if(n0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return null!==t&&!n0(this.value.arrayValue,t)}}class ik extends ic{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!n6(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>n0(this.value.arrayValue,e))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e,t=null,r=[],n=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=n,this.limit=i,this.startAt=s,this.endAt=o,this.ft=null}}function iT(e,t=null,r=[],n=[],i=null,s=null,o=null){return new iE(e,t,r,n,i,s,o)}function iI(e){let t=e;if(null===t.ft){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:"+t.filters.map(e=>(function e(t){if(t instanceof ic)return t.field.canonicalString()+t.op.toString()+n4(t.value);if(ig(t)&&id(t))return t.filters.map(t=>e(t)).join(",");{let r=t.filters.map(t=>e(t)).join(",");return`${t.op}(${r})`}})(e)).join(",")+"|ob:"+t.orderBy.map(e=>e.field.canonicalString()+e.dir).join(","),null==t.limit||(e+="|l:"+t.limit),t.startAt&&(e+="|lb:"+(t.startAt.inclusive?"b:":"a:")+t.startAt.position.map(e=>n4(e)).join(",")),t.endAt&&(e+="|ub:"+(t.endAt.inclusive?"a:":"b:")+t.endAt.position.map(e=>n4(e)).join(",")),t.ft=e}return t.ft}function i_(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<e.orderBy.length;i++){var r,n;if(r=e.orderBy[i],n=t.orderBy[i],!(r.dir===n.dir&&r.field.isEqual(n.field)))return!1}if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!function e(t,r){return t instanceof ic?r instanceof ic&&t.op===r.op&&t.field.isEqual(r.field)&&nZ(t.value,r.value):t instanceof ih?r instanceof ih&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((t,n,i)=>t&&e(n,r.filters[i]),!0):void nr()}(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ia(e.startAt,t.startAt)&&ia(e.endAt,t.endAt)}function iC(e){return nE.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,t=null,r=[],n=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=n,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.dt=null,this._t=null,this.startAt,this.endAt}}function iN(e){return new iS(e)}function iA(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function iR(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function iD(e){for(let t of e.filters){let e=t.getFirstInequalityField();if(null!==e)return e}return null}function iO(e){return null!==e.collectionGroup}function iL(e){let t=e;if(null===t.dt){t.dt=[];let e=iD(t),r=iR(t);if(null!==e&&null===r)e.isKeyField()||t.dt.push(new il(e)),t.dt.push(new il(nk.keyField(),"asc"));else{let e=!1;for(let r of t.explicitOrderBy)t.dt.push(r),r.field.isKeyField()&&(e=!0);if(!e){let e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new il(nk.keyField(),e))}}}return t.dt}function iP(e){let t=e;if(!t._t){if("F"===t.limitType)t._t=iT(t.path,t.collectionGroup,iL(t),t.filters,t.limit,t.startAt,t.endAt);else{let e=[];for(let r of iL(t)){let t="desc"===r.dir?"asc":"desc";e.push(new il(r.field,t))}let r=t.endAt?new is(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new is(t.startAt.position,t.startAt.inclusive):null;t._t=iT(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}return t._t}function iM(e,t){t.getFirstInequalityField(),iD(e);let r=e.filters.concat([t]);return new iS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function ij(e,t,r){return new iS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function iF(e,t){return i_(iP(e),iP(t))&&e.limitType===t.limitType}function iU(e){return`${iI(iP(e))}|lt:${e.limitType}`}function iV(e){var t;let r;return`Query(target=${r=(t=iP(e)).path.canonicalString(),null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(e=>(function e(t){return t instanceof ic?`${t.field.canonicalString()} ${t.op} ${n4(t.value)}`:t instanceof ih?t.op.toString()+" {"+t.getFilters().map(e).join(" ,")+"}":"Filter"})(e)).join(", ")}]`),null==t.limit||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(e=>`${e.field.canonicalString()} (${e.dir})`).join(", ")}]`),t.startAt&&(r+=", startAt: "+(t.startAt.inclusive?"b:":"a:")+t.startAt.position.map(e=>n4(e)).join(",")),t.endAt&&(r+=", endAt: "+(t.endAt.inclusive?"a:":"b:")+t.endAt.position.map(e=>n4(e)).join(",")),`Target(${r})`}; limitType=${e.limitType})`}function iB(e,t){return t.isFoundDocument()&&function(e,t){let r=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):nE.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(e,t)&&function(e,t){for(let r of iL(e))if(!r.field.isKeyField()&&null===t.data.field(r.field))return!1;return!0}(e,t)&&function(e,t){for(let r of e.filters)if(!r.matches(t))return!1;return!0}(e,t)&&(!e.startAt||!!function(e,t,r){let n=io(e,t,r);return e.inclusive?n<=0:n<0}(e.startAt,iL(e),t))&&(!e.endAt||!!function(e,t,r){let n=io(e,t,r);return e.inclusive?n>=0:n>0}(e.endAt,iL(e),t))}function iz(e){return(t,r)=>{let n=!1;for(let i of iL(e)){let e=function(e,t,r){let n=e.field.isKeyField()?nE.comparator(t.key,r.key):function(e,t,r){let n=t.data.field(e),i=r.data.field(e);return null!==n&&null!==i?n1(n,i):nr()}(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return -1*n;default:return nr()}}(i,t,r);if(0!==e)return e;n=n||i.field.isKeyField()}return 0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i${constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r){for(let[t,n]of r)if(this.equalsFn(t,e))return n}}has(e){return void 0!==this.get(e)}set(e,t){let r=this.mapKeyFn(e),n=this.inner[r];if(void 0===n)return this.inner[r]=[[e,t]],void this.innerSize++;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return void(n[r]=[e,t]);n.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return 1===r.length?delete this.inner[t]:r.splice(n,1),this.innerSize--,!0;return!1}forEach(e){nD(this.inner,(t,r)=>{for(let[t,n]of r)e(t,n)})}isEmpty(){return nO(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iq=new nL(nE.comparator),iH=new nL(nE.comparator);function iK(...e){let t=iH;for(let r of e)t=t.insert(r.key,r);return t}function iG(e){let t=iH;return e.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function iW(){return new i$(e=>e.toString(),(e,t)=>e.isEqual(t))}let iQ=new nL(nE.comparator),iX=new nj(nE.comparator);function iJ(...e){let t=iX;for(let r of e)t=t.add(r);return t}let iY=new nj(np);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iZ(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nA(t)?"-0":t}}function i0(e){return{integerValue:""+e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(){this._=void 0}}function i2(e,t){return e instanceof i7?n5(t)||t&&"doubleValue"in t?t:{integerValue:0}:null}class i4 extends i1{}class i9 extends i1{constructor(e){super(),this.elements=e}}function i5(e,t){let r=se(t);for(let t of e.elements)r.some(e=>nZ(e,t))||r.push(t);return{arrayValue:{values:r}}}class i6 extends i1{constructor(e){super(),this.elements=e}}function i3(e,t){let r=se(t);for(let t of e.elements)r=r.filter(e=>!nZ(e,t));return{arrayValue:{values:r}}}class i7 extends i1{constructor(e,t){super(),this.serializer=e,this.wt=t}}function i8(e){return nq(e.integerValue||e.doubleValue)}function se(e){return n6(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,t){this.field=e,this.transform=t}}class sr{constructor(e,t){this.version=e,this.transformResults=t}}class sn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new sn}static exists(e){return new sn(void 0,e)}static updateTime(e){return new sn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function si(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class ss{}function so(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new sg(e.key,sn.none()):new su(e.key,e.data,sn.none());{let r=e.data,n=ir.empty(),i=new nj(nk.comparator);for(let e of t.fields)if(!i.has(e)){let t=r.field(e);null===t&&e.length>1&&(e=e.popLast(),t=r.field(e)),null===t?n.delete(e):n.set(e,t),i=i.add(e)}return new sc(e.key,n,new nU(i.toArray()),sn.none())}}function sa(e,t,r,n){return e instanceof su?function(e,t,r,n){if(!si(e.precondition,t))return r;let i=e.value.clone(),s=sf(e.fieldTransforms,n,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,r,n):e instanceof sc?function(e,t,r,n){if(!si(e.precondition,t))return r;let i=sf(e.fieldTransforms,n,t),s=t.data;return(s.setAll(sh(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===r)?null:r.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,r,n):si(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):r}function sl(e,t){var r,n;return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(r=e.fieldTransforms,n=t.fieldTransforms,!!(void 0===r&&void 0===n||!(!r||!n)&&nm(r,n,(e,t)=>{var r,n;return e.field.isEqual(t.field)&&(r=e.transform,n=t.transform,r instanceof i9&&n instanceof i9||r instanceof i6&&n instanceof i6?nm(r.elements,n.elements,nZ):r instanceof i7&&n instanceof i7?nZ(r.wt,n.wt):r instanceof i4&&n instanceof i4)})))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class su extends ss{constructor(e,t,r,n=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}class sc extends ss{constructor(e,t,r,n,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=n,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function sh(e){let t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){let n=e.data.field(r);t.set(r,n)}}),t}function sd(e,t,r){var n;let i=new Map;e.length===r.length||nr();for(let s=0;s<r.length;s++){let o=e[s],a=o.transform,l=t.data.field(o.field);i.set(o.field,(n=r[s],a instanceof i9?i5(a,l):a instanceof i6?i3(a,l):n))}return i}function sf(e,t,r){let n=new Map;for(let i of e){let e=i.transform,s=r.data.field(i.field);n.set(i.field,e instanceof i4?function(e,t){let r={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&nK(t)&&(t=nG(t)),t&&(r.fields.__previous_value__=t),{mapValue:r}}(t,s):e instanceof i9?i5(e,s):e instanceof i6?i3(e,s):function(e,t){let r=i2(e,t),n=i8(r)+i8(e.wt);return n5(r)&&n5(e.wt)?i0(n):iZ(e.serializer,n)}(e,s))}return n}class sg extends ss{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sp extends ss{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,t,r,n){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=n}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let i=this.mutations[t];if(i.key.isEqual(e.key)){var n;n=r[t],i instanceof su?function(e,t,r){let n=e.value.clone(),i=sd(e.fieldTransforms,t,r.transformResults);n.setAll(i),t.convertToFoundDocument(r.version,n).setHasCommittedMutations()}(i,e,n):i instanceof sc?function(e,t,r){if(!si(e.precondition,t))return void t.convertToUnknownDocument(r.version);let n=sd(e.fieldTransforms,t,r.transformResults),i=t.data;i.setAll(sh(e)),i.setAll(n),t.convertToFoundDocument(r.version,i).setHasCommittedMutations()}(i,e,n):function(e,t,r){t.convertToNoDocument(r.version).setHasCommittedMutations()}(0,e,n)}}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=sa(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=sa(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=iW();return this.mutations.forEach(n=>{let i=e.get(n.key),s=i.overlayedDocument,o=this.applyToLocalView(s,i.mutatedFields);o=t.has(n.key)?null:o;let a=so(s,o);null!==a&&r.set(n.key,a),s.isValidDocument()||s.convertToNoDocument(nb.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),iJ())}isEqual(e){return this.batchId===e.batchId&&nm(this.mutations,e.mutations,(e,t)=>sl(e,t))&&nm(this.baseMutations,e.baseMutations,(e,t)=>sl(e,t))}}class sy{constructor(e,t,r,n){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=n}static from(e,t,r){e.mutations.length===r.length||nr();let n=iQ,i=e.mutations;for(let e=0;e<i.length;e++)n=n.insert(i[e].key,r[e].version);return new sy(e,t,r,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e,t){this.count=e,this.unchangedNames=t}}function sw(e){if(void 0===e)return r8("GRPC error has no .code"),nn.UNKNOWN;switch(e){case l.OK:return nn.OK;case l.CANCELLED:return nn.CANCELLED;case l.UNKNOWN:return nn.UNKNOWN;case l.DEADLINE_EXCEEDED:return nn.DEADLINE_EXCEEDED;case l.RESOURCE_EXHAUSTED:return nn.RESOURCE_EXHAUSTED;case l.INTERNAL:return nn.INTERNAL;case l.UNAVAILABLE:return nn.UNAVAILABLE;case l.UNAUTHENTICATED:return nn.UNAUTHENTICATED;case l.INVALID_ARGUMENT:return nn.INVALID_ARGUMENT;case l.NOT_FOUND:return nn.NOT_FOUND;case l.ALREADY_EXISTS:return nn.ALREADY_EXISTS;case l.PERMISSION_DENIED:return nn.PERMISSION_DENIED;case l.FAILED_PRECONDITION:return nn.FAILED_PRECONDITION;case l.ABORTED:return nn.ABORTED;case l.OUT_OF_RANGE:return nn.OUT_OF_RANGE;case l.UNIMPLEMENTED:return nn.UNIMPLEMENTED;case l.DATA_LOSS:return nn.DATA_LOSS;default:return nr()}}(u=l||(l={}))[u.OK=0]="OK",u[u.CANCELLED=1]="CANCELLED",u[u.UNKNOWN=2]="UNKNOWN",u[u.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",u[u.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",u[u.NOT_FOUND=5]="NOT_FOUND",u[u.ALREADY_EXISTS=6]="ALREADY_EXISTS",u[u.PERMISSION_DENIED=7]="PERMISSION_DENIED",u[u.UNAUTHENTICATED=16]="UNAUTHENTICATED",u[u.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",u[u.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",u[u.ABORTED=10]="ABORTED",u[u.OUT_OF_RANGE=11]="OUT_OF_RANGE",u[u.UNIMPLEMENTED=12]="UNIMPLEMENTED",u[u.INTERNAL=13]="INTERNAL",u[u.UNAVAILABLE=14]="UNAVAILABLE",u[u.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return sk}static getOrCreateInstance(){return null===sk&&(sk=new sx),sk}onExistenceFilterMismatch(e){let t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let sk=null,sE=new r2([4294967295,4294967295],0);function sT(e){let t=(new TextEncoder).encode(e),r=new r1;return r.update(t),new Uint8Array(r.digest())}function sI(e){let t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new r2([r,n],0),new r2([i,s],0)]}class s_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new sC(`Invalid padding: ${t}`);if(r<0||e.length>0&&0===this.hashCount)throw new sC(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new sC(`Invalid padding when bitmap length is 0: ${t}`);this.yt=8*e.length-t,this.It=r2.fromNumber(this.yt)}Tt(e,t,r){let n=e.add(t.multiply(r2.fromNumber(r)));return 1===n.compare(sE)&&(n=new r2([n.getBits(0),n.getBits(1)],0)),n.modulo(this.It).toNumber()}Et(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}At(e){if(0===this.yt)return!1;let t=sT(e),[r,n]=sI(t);for(let e=0;e<this.hashCount;e++){let t=this.Tt(r,n,e);if(!this.Et(t))return!1}return!0}static create(e,t,r){let n=new Uint8Array(Math.ceil(e/8)),i=new s_(n,e%8==0?0:8-e%8,t);return r.forEach(e=>i.insert(e)),i}insert(e){if(0===this.yt)return;let t=sT(e),[r,n]=sI(t);for(let e=0;e<this.hashCount;e++){let t=this.Tt(r,n,e);this.Rt(t)}}Rt(e){this.bitmap[Math.floor(e/8)]|=1<<e%8}}class sC extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,t,r,n,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=n,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let n=new Map;return n.set(e,sN.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new sS(nb.min(),n,new nL(np),iq,iJ())}}class sN{constructor(e,t,r,n,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=n,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new sN(r,t,iJ(),iJ(),iJ())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e,t,r,n){this.vt=e,this.removedTargetIds=t,this.key=r,this.Pt=n}}class sR{constructor(e,t){this.targetId=e,this.bt=t}}class sD{constructor(e,t,r=nB.EMPTY_BYTE_STRING,n=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=n}}class sO{constructor(){this.Vt=0,this.St=sM(),this.Dt=nB.EMPTY_BYTE_STRING,this.Ct=!1,this.xt=!0}get current(){return this.Ct}get resumeToken(){return this.Dt}get Nt(){return 0!==this.Vt}get kt(){return this.xt}Mt(e){e.approximateByteSize()>0&&(this.xt=!0,this.Dt=e)}Ot(){let e=iJ(),t=iJ(),r=iJ();return this.St.forEach((n,i)=>{switch(i){case 0:e=e.add(n);break;case 2:t=t.add(n);break;case 1:r=r.add(n);break;default:nr()}}),new sN(this.Dt,this.Ct,e,t,r)}$t(){this.xt=!1,this.St=sM()}Ft(e,t){this.xt=!0,this.St=this.St.insert(e,t)}Bt(e){this.xt=!0,this.St=this.St.remove(e)}Lt(){this.Vt+=1}qt(){this.Vt-=1}Ut(){this.xt=!0,this.Ct=!0}}class sL{constructor(e){this.Kt=e,this.Gt=new Map,this.Qt=iq,this.jt=sP(),this.zt=new nL(np)}Wt(e){for(let t of e.vt)e.Pt&&e.Pt.isFoundDocument()?this.Ht(t,e.Pt):this.Jt(t,e.key,e.Pt);for(let t of e.removedTargetIds)this.Jt(t,e.key,e.Pt)}Yt(e){this.forEachTarget(e,t=>{let r=this.Xt(t);switch(e.state){case 0:this.Zt(t)&&r.Mt(e.resumeToken);break;case 1:r.qt(),r.Nt||r.$t(),r.Mt(e.resumeToken);break;case 2:r.qt(),r.Nt||this.removeTarget(t);break;case 3:this.Zt(t)&&(r.Ut(),r.Mt(e.resumeToken));break;case 4:this.Zt(t)&&(this.te(t),r.Mt(e.resumeToken));break;default:nr()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Gt.forEach((e,r)=>{this.Zt(r)&&t(r)})}ee(e){var t;let r=e.targetId,n=e.bt.count,i=this.ne(r);if(i){let s=i.target;if(iC(s)){if(0===n){let e=new nE(s.path);this.Jt(r,e,ii.newNoDocument(e,nb.min()))}else 1===n||nr()}else{let i=this.se(r);if(i!==n){let n=this.ie(e,i);0!==n&&(this.te(r),this.zt=this.zt.insert(r,2===n?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=sx.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,r){var n,i,s,o,a,l;let u={localCacheCount:t,existenceFilterCount:r.count},c=r.unchangedNames;return c&&(u.bloomFilter={applied:0===e,hashCount:null!==(n=null==c?void 0:c.hashCount)&&void 0!==n?n:0,bitmapLength:null!==(o=null===(s=null===(i=null==c?void 0:c.bits)||void 0===i?void 0:i.bitmap)||void 0===s?void 0:s.length)&&void 0!==o?o:0,padding:null!==(l=null===(a=null==c?void 0:c.bits)||void 0===a?void 0:a.padding)&&void 0!==l?l:0}),u}(n,i,e.bt))}}}}ie(e,t){let r,n;let{unchangedNames:i,count:s}=e.bt;if(!i||!i.bits)return 1;let{bits:{bitmap:o="",padding:a=0},hashCount:l=0}=i;try{r=nH(o).toUint8Array()}catch(e){if(e instanceof nV)return ne("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{n=new s_(r,a,l)}catch(e){return ne(e instanceof sC?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===n.yt?1:s!==t-this.re(e.targetId,n)?2:0}re(e,t){let r=this.Kt.getRemoteKeysForTarget(e),n=0;return r.forEach(r=>{let i=this.Kt.oe(),s=`projects/${i.projectId}/databases/${i.database}/documents/${r.path.canonicalString()}`;t.At(s)||(this.Jt(e,r,null),n++)}),n}ue(e){let t=new Map;this.Gt.forEach((r,n)=>{let i=this.ne(n);if(i){if(r.current&&iC(i.target)){let t=new nE(i.target.path);null!==this.Qt.get(t)||this.ce(n,t)||this.Jt(n,t,ii.newNoDocument(t,e))}r.kt&&(t.set(n,r.Ot()),r.$t())}});let r=iJ();this.jt.forEach((e,t)=>{let n=!0;t.forEachWhile(e=>{let t=this.ne(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(n=!1,!1)}),n&&(r=r.add(e))}),this.Qt.forEach((t,r)=>r.setReadTime(e));let n=new sS(e,t,this.zt,this.Qt,r);return this.Qt=iq,this.jt=sP(),this.zt=new nL(np),n}Ht(e,t){if(!this.Zt(e))return;let r=this.ce(e,t.key)?2:0;this.Xt(e).Ft(t.key,r),this.Qt=this.Qt.insert(t.key,t),this.jt=this.jt.insert(t.key,this.ae(t.key).add(e))}Jt(e,t,r){if(!this.Zt(e))return;let n=this.Xt(e);this.ce(e,t)?n.Ft(t,1):n.Bt(t),this.jt=this.jt.insert(t,this.ae(t).delete(e)),r&&(this.Qt=this.Qt.insert(t,r))}removeTarget(e){this.Gt.delete(e)}se(e){let t=this.Xt(e).Ot();return this.Kt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Lt(e){this.Xt(e).Lt()}Xt(e){let t=this.Gt.get(e);return t||(t=new sO,this.Gt.set(e,t)),t}ae(e){let t=this.jt.get(e);return t||(t=new nj(np),this.jt=this.jt.insert(e,t)),t}Zt(e){let t=null!==this.ne(e);return t||r7("WatchChangeAggregator","Detected inactive target",e),t}ne(e){let t=this.Gt.get(e);return t&&t.Nt?null:this.Kt.he(e)}te(e){this.Gt.set(e,new sO),this.Kt.getRemoteKeysForTarget(e).forEach(t=>{this.Jt(e,t,null)})}ce(e,t){return this.Kt.getRemoteKeysForTarget(e).has(t)}}function sP(){return new nL(nE.comparator)}function sM(){return new nL(nE.comparator)}let sj={asc:"ASCENDING",desc:"DESCENDING"},sF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sU={and:"AND",or:"OR"};class sV{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function sB(e,t){return e.useProto3Json||null==t?t:{value:t}}function sz(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function s$(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function sq(e){return e||nr(),nb.fromTimestamp(function(e){let t=n$(e);return new ny(t.seconds,t.nanos)}(e))}function sH(e,t){return new nw(["projects",e.projectId,"databases",e.database]).child("documents").child(t).canonicalString()}function sK(e){let t=nw.fromString(e);return s1(t)||nr(),t}function sG(e,t){return sH(e.databaseId,t.path)}function sW(e,t){let r=sK(t);if(r.get(1)!==e.databaseId.projectId)throw new ni(nn.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new ni(nn.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new nE(sJ(r))}function sQ(e,t){return sH(e.databaseId,t)}function sX(e){return new nw(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function sJ(e){return e.length>4&&"documents"===e.get(4)||nr(),e.popFirst(5)}function sY(e,t,r){return{name:sG(e,t),fields:r.value.mapValue.fields}}function sZ(e){return{fieldPath:e.canonicalString()}}function s0(e){return nk.fromServerFormat(e.fieldPath)}function s1(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,t,r,n,i=nb.min(),s=nb.min(),o=nB.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=n,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new s2(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new s2(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new s2(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new s2(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e){this.le=e}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9{constructor(){}_e(e,t){this.we(e,t),t.me()}we(e,t){if("nullValue"in e)this.ge(t,5);else if("booleanValue"in e)this.ge(t,10),t.ye(e.booleanValue?1:0);else if("integerValue"in e)this.ge(t,15),t.ye(nq(e.integerValue));else if("doubleValue"in e){let r=nq(e.doubleValue);isNaN(r)?this.ge(t,13):(this.ge(t,15),nA(r)?t.ye(0):t.ye(r))}else if("timestampValue"in e){let r=e.timestampValue;this.ge(t,20),"string"==typeof r?t.pe(r):(t.pe(`${r.seconds||""}`),t.ye(r.nanos||0))}else if("stringValue"in e)this.Ie(e.stringValue,t),this.Te(t);else if("bytesValue"in e)this.ge(t,30),t.Ee(nH(e.bytesValue)),this.Te(t);else if("referenceValue"in e)this.Ae(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.ge(t,45),t.ye(r.latitude||0),t.ye(r.longitude||0)}else"mapValue"in e?it(e)?this.ge(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Te(t)):"arrayValue"in e?(this.ve(e.arrayValue,t),this.Te(t)):nr()}Ie(e,t){this.ge(t,25),this.Pe(e,t)}Pe(e,t){t.pe(e)}Re(e,t){let r=e.fields||{};for(let e of(this.ge(t,55),Object.keys(r)))this.Ie(e,t),this.we(r[e],t)}ve(e,t){let r=e.values||[];for(let e of(this.ge(t,50),r))this.we(e,t)}Ae(e,t){this.ge(t,37),nE.fromName(e).path.forEach(e=>{this.ge(t,60),this.Pe(e,t)})}ge(e,t){e.ye(t)}Te(e){e.ye(2)}}s9.be=new s9;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(){this.sn=new s6}addToCollectionParentIndex(e,t){return this.sn.add(t),nC.resolve()}getCollectionParents(e,t){return nC.resolve(this.sn.getEntries(t))}addFieldIndex(e,t){return nC.resolve()}deleteFieldIndex(e,t){return nC.resolve()}getDocumentsMatchingTarget(e,t){return nC.resolve(null)}getIndexType(e,t){return nC.resolve(0)}getFieldIndexes(e,t){return nC.resolve([])}getNextCollectionGroupToUpdate(e){return nC.resolve(null)}getMinOffset(e,t){return nC.resolve(nT.min())}getMinOffsetFromCollectionGroup(e,t){return nC.resolve(nT.min())}updateCollectionGroup(e,t,r){return nC.resolve()}updateIndexEntries(e,t){return nC.resolve()}}class s6{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),n=this.index[t]||new nj(nw.comparator),i=!n.has(r);return this.index[t]=n.add(r),i}has(e){let t=e.lastSegment(),r=e.popLast(),n=this.index[t];return n&&n.has(r)}getEntries(e){return(this.index[e]||new nj(nw.comparator)).toArray()}}new Uint8Array(0);class s3{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new s3(e,s3.DEFAULT_COLLECTION_PERCENTILE,s3.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */s3.DEFAULT_COLLECTION_PERCENTILE=10,s3.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,s3.DEFAULT=new s3(41943040,s3.DEFAULT_COLLECTION_PERCENTILE,s3.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),s3.DISABLED=new s3(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s7{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static Nn(){return new s7(0)}static kn(){return new s7(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(){this.changes=new i$(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ii.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return void 0!==r?nC.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,t,r,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=n}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(n=>(r=n,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==r&&sa(r.mutation,e,nU.empty(),ny.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,iJ()).next(()=>t))}getLocalViewOfDocuments(e,t,r=iJ()){let n=iW();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,r).next(e=>{let t=iK();return e.forEach((e,r)=>{t=t.insert(e,r.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){let r=iW();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,iJ()))}populateOverlays(e,t,r){let n=[];return r.forEach(e=>{t.has(e)||n.push(e)}),this.documentOverlayCache.getOverlays(e,n).next(e=>{e.forEach((e,r)=>{t.set(e,r)})})}computeViews(e,t,r,n){let i=iq,s=iW(),o=iW();return t.forEach((e,t)=>{let o=r.get(t.key);n.has(t.key)&&(void 0===o||o.mutation instanceof sc)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),sa(o.mutation,t,o.mutation.getFieldMask(),ny.now())):s.set(t.key,nU.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var r;return o.set(e,new oe(t,null!==(r=s.get(e))&&void 0!==r?r:null))}),o))}recalculateAndSaveOverlays(e,t){let r=iW(),n=new nL((e,t)=>e-t),i=iJ();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(let i of e)i.keys().forEach(e=>{let s=t.get(e);if(null===s)return;let o=r.get(e)||nU.empty();o=i.applyToLocalView(s,o),r.set(e,o);let a=(n.get(i.batchId)||iJ()).add(e);n=n.insert(i.batchId,a)})}).next(()=>{let s=[],o=n.getReverseIterator();for(;o.hasNext();){let n=o.getNext(),a=n.key,l=n.value,u=iW();l.forEach(e=>{if(!i.has(e)){let n=so(t.get(e),r.get(e));null!==n&&u.set(e,n),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return nC.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,r){return nE.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):iO(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r)}getNextDocuments(e,t,r,n){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,n).next(i=>{let s=n-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,n-i.size):nC.resolve(iW()),o=-1,a=i;return s.next(t=>nC.forEach(t,(t,r)=>(o<r.largestBatchId&&(o=r.largestBatchId),i.get(t)?nC.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,iJ())).next(e=>({batchId:o,changes:iG(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new nE(t)).next(e=>{let t=iK();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,r){let n=t.collectionGroup,i=iK();return this.indexManager.getCollectionParents(e,n).next(s=>nC.forEach(s,s=>{var o;let a=(o=s.child(n),new iS(o,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt));return this.getDocumentsMatchingCollectionQuery(e,a,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,r){let n;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(i=>(n=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,n))).next(e=>{n.forEach((t,r)=>{let n=r.getKey();null===e.get(n)&&(e=e.insert(n,ii.newInvalidDocument(n)))});let r=iK();return e.forEach((e,i)=>{let s=n.get(e);void 0!==s&&sa(s.mutation,i,nU.empty(),ny.now()),iB(t,i)&&(r=r.insert(e,i))}),r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.serializer=e,this.us=new Map,this.cs=new Map}getBundleMetadata(e,t){return nC.resolve(this.us.get(t))}saveBundleMetadata(e,t){return this.us.set(t.id,{id:t.id,version:t.version,createTime:sq(t.createTime)}),nC.resolve()}getNamedQuery(e,t){return nC.resolve(this.cs.get(t))}saveNamedQuery(e,t){return this.cs.set(t.name,{name:t.name,query:function(e){let t=function(e){var t,r,n,i,s,o,a,l;let u,c=function(e){let t=sK(e);return 4===t.length?nw.emptyPath():sJ(t)}(e.parent),h=e.structuredQuery,d=h.from?h.from.length:0,f=null;if(d>0){1===d||nr();let e=h.from[0];e.allDescendants?f=e.collectionId:c=c.child(e.collectionId)}let g=[];h.where&&(g=function(e){var t;let r=function e(t){return void 0!==t.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":let t=s0(e.unaryFilter.field);return ic.create(t,"==",{doubleValue:NaN});case"IS_NULL":let r=s0(e.unaryFilter.field);return ic.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let n=s0(e.unaryFilter.field);return ic.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let i=s0(e.unaryFilter.field);return ic.create(i,"!=",{nullValue:"NULL_VALUE"});default:return nr()}}(t):void 0!==t.fieldFilter?ic.create(s0(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nr()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==t.compositeFilter?ih.create(t.compositeFilter.filters.map(t=>e(t)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return nr()}}(t.compositeFilter.op)):nr()}(e);return r instanceof ih&&ig(t=r)&&id(t)?r.getFilters():[r]}(h.where));let p=[];h.orderBy&&(p=h.orderBy.map(e=>new il(s0(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))));let m=null;h.limit&&(m=null==(u="object"==typeof(t=h.limit)?t.value:t)?null:u);let y=null;h.startAt&&(y=function(e){let t=!!e.before,r=e.values||[];return new is(r,t)}(h.startAt));let b=null;return h.endAt&&(b=function(e){let t=!e.before,r=e.values||[];return new is(r,t)}(h.endAt)),r=c,n=f,i=p,s=g,o=m,a=y,l=b,new iS(r,n,i,s,o,"F",a,l)}({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ij(t,t.limit,"L"):t}(t.bundledQuery),readTime:sq(t.readTime)}),nC.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(){this.overlays=new nL(nE.comparator),this.hs=new Map}getOverlay(e,t){return nC.resolve(this.overlays.get(t))}getOverlays(e,t){let r=iW();return nC.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&r.set(t,e)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((r,n)=>{this.de(e,t,n)}),nC.resolve()}removeOverlaysForBatchId(e,t,r){let n=this.hs.get(r);return void 0!==n&&(n.forEach(e=>this.overlays=this.overlays.remove(e)),this.hs.delete(r)),nC.resolve()}getOverlaysForCollection(e,t,r){let n=iW(),i=t.length+1,s=new nE(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){let e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>r&&n.set(e.getKey(),e)}return nC.resolve(n)}getOverlaysForCollectionGroup(e,t,r,n){let i=new nL((e,t)=>e-t),s=this.overlays.getIterator();for(;s.hasNext();){let e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>r){let t=i.get(e.largestBatchId);null===t&&(t=iW(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let o=iW(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=n)););return nC.resolve(o)}de(e,t,r){let n=this.overlays.get(r.key);if(null!==n){let e=this.hs.get(n.largestBatchId).delete(r.key);this.hs.set(n.largestBatchId,e)}this.overlays=this.overlays.insert(r.key,new sb(t,r));let i=this.hs.get(t);void 0===i&&(i=iJ(),this.hs.set(t,i)),this.hs.set(t,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(){this.ls=new nj(os.fs),this.ds=new nj(os._s)}isEmpty(){return this.ls.isEmpty()}addReference(e,t){let r=new os(e,t);this.ls=this.ls.add(r),this.ds=this.ds.add(r)}ws(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.gs(new os(e,t))}ys(e,t){e.forEach(e=>this.removeReference(e,t))}ps(e){let t=new nE(new nw([])),r=new os(t,e),n=new os(t,e+1),i=[];return this.ds.forEachInRange([r,n],e=>{this.gs(e),i.push(e.key)}),i}Is(){this.ls.forEach(e=>this.gs(e))}gs(e){this.ls=this.ls.delete(e),this.ds=this.ds.delete(e)}Ts(e){let t=new nE(new nw([])),r=new os(t,e),n=new os(t,e+1),i=iJ();return this.ds.forEachInRange([r,n],e=>{i=i.add(e.key)}),i}containsKey(e){let t=new os(e,0),r=this.ls.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class os{constructor(e,t){this.key=e,this.Es=t}static fs(e,t){return nE.comparator(e.key,t.key)||np(e.Es,t.Es)}static _s(e,t){return np(e.Es,t.Es)||nE.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.As=1,this.Rs=new nj(os.fs)}checkEmpty(e){return nC.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,n){let i=this.As;this.As++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new sm(i,t,r,n);for(let t of(this.mutationQueue.push(s),n))this.Rs=this.Rs.add(new os(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return nC.resolve(s)}lookupMutationBatch(e,t){return nC.resolve(this.vs(t))}getNextMutationBatchAfterBatchId(e,t){let r=this.Ps(t+1),n=r<0?0:r;return nC.resolve(this.mutationQueue.length>n?this.mutationQueue[n]:null)}getHighestUnacknowledgedBatchId(){return nC.resolve(0===this.mutationQueue.length?-1:this.As-1)}getAllMutationBatches(e){return nC.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new os(t,0),n=new os(t,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([r,n],e=>{let t=this.vs(e.Es);i.push(t)}),nC.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new nj(np);return t.forEach(e=>{let t=new os(e,0),n=new os(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,n],e=>{r=r.add(e.Es)})}),nC.resolve(this.bs(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,n=r.length+1,i=r;nE.isDocumentKey(i)||(i=i.child(""));let s=new os(new nE(i),0),o=new nj(np);return this.Rs.forEachWhile(e=>{let t=e.key.path;return!!r.isPrefixOf(t)&&(t.length===n&&(o=o.add(e.Es)),!0)},s),nC.resolve(this.bs(o))}bs(e){let t=[];return e.forEach(e=>{let r=this.vs(e);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){0===this.Vs(t.batchId,"removed")||nr(),this.mutationQueue.shift();let r=this.Rs;return nC.forEach(t.mutations,n=>{let i=new os(n.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,n.key)}).next(()=>{this.Rs=r})}Dn(e){}containsKey(e,t){let r=new os(t,0),n=this.Rs.firstAfterOrEqual(r);return nC.resolve(t.isEqual(n&&n.key))}performConsistencyCheck(e){return this.mutationQueue.length,nC.resolve()}Vs(e,t){return this.Ps(e)}Ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}vs(e){let t=this.Ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e){this.Ss=e,this.docs=new nL(nE.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,n=this.docs.get(r),i=n?n.size:0,s=this.Ss(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return nC.resolve(r?r.document.mutableCopy():ii.newInvalidDocument(t))}getEntries(e,t){let r=iq;return t.forEach(e=>{let t=this.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():ii.newInvalidDocument(e))}),nC.resolve(r)}getDocumentsMatchingQuery(e,t,r,n){let i=iq,s=t.path,o=new nE(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){let{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||0>=function(e,t){let r=e.readTime.compareTo(t.readTime);return 0!==r?r:0!==(r=nE.comparator(e.documentKey,t.documentKey))?r:np(e.largestBatchId,t.largestBatchId)}(new nT(o.readTime,o.key,-1),r)||(n.has(o.key)||iB(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return nC.resolve(i)}getAllFromCollectionGroup(e,t,r,n){nr()}Ds(e,t){return nC.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new ol(this)}getSize(e){return nC.resolve(this.size)}}class ol extends s8{constructor(e){super(),this.rs=e}applyChanges(e){let t=[];return this.changes.forEach((r,n)=>{n.isValidDocument()?t.push(this.rs.addEntry(e,n)):this.rs.removeEntry(r)}),nC.waitFor(t)}getFromCache(e,t){return this.rs.getEntry(e,t)}getAllFromCache(e,t){return this.rs.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e){this.persistence=e,this.Cs=new i$(e=>iI(e),i_),this.lastRemoteSnapshotVersion=nb.min(),this.highestTargetId=0,this.xs=0,this.Ns=new oi,this.targetCount=0,this.ks=s7.Nn()}forEachTarget(e,t){return this.Cs.forEach((e,r)=>t(r)),nC.resolve()}getLastRemoteSnapshotVersion(e){return nC.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return nC.resolve(this.xs)}allocateTargetId(e){return this.highestTargetId=this.ks.next(),nC.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.xs&&(this.xs=t),nC.resolve()}$n(e){this.Cs.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ks=new s7(t),this.highestTargetId=t),e.sequenceNumber>this.xs&&(this.xs=e.sequenceNumber)}addTargetData(e,t){return this.$n(t),this.targetCount+=1,nC.resolve()}updateTargetData(e,t){return this.$n(t),nC.resolve()}removeTargetData(e,t){return this.Cs.delete(t.target),this.Ns.ps(t.targetId),this.targetCount-=1,nC.resolve()}removeTargets(e,t,r){let n=0,i=[];return this.Cs.forEach((s,o)=>{o.sequenceNumber<=t&&null===r.get(o.targetId)&&(this.Cs.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),n++)}),nC.waitFor(i).next(()=>n)}getTargetCount(e){return nC.resolve(this.targetCount)}getTargetData(e,t){let r=this.Cs.get(t)||null;return nC.resolve(r)}addMatchingKeys(e,t,r){return this.Ns.ws(t,r),nC.resolve()}removeMatchingKeys(e,t,r){this.Ns.ys(t,r);let n=this.persistence.referenceDelegate,i=[];return n&&t.forEach(t=>{i.push(n.markPotentiallyOrphaned(e,t))}),nC.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Ns.ps(t),nC.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Ns.Ts(t);return nC.resolve(r)}containsKey(e,t){return nC.resolve(this.Ns.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,t){var r;this.Ms={},this.overlays={},this.Os=new nN(0),this.$s=!1,this.$s=!0,this.referenceDelegate=e(this),this.Fs=new ou(this),this.indexManager=new s5,this.remoteDocumentCache=(r=e=>this.referenceDelegate.Bs(e),new oa(r)),this.serializer=new s4(t),this.Ls=new or(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.$s=!1,Promise.resolve()}get started(){return this.$s}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new on,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ms[e.toKey()];return r||(r=new oo(t,this.referenceDelegate),this.Ms[e.toKey()]=r),r}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ls}runTransaction(e,t,r){r7("MemoryPersistence","Starting transaction:",e);let n=new oh(this.Os.next());return this.referenceDelegate.qs(),r(n).next(e=>this.referenceDelegate.Us(n).next(()=>e)).toPromise().then(e=>(n.raiseOnCommittedEvent(),e))}Ks(e,t){return nC.or(Object.values(this.Ms).map(r=>()=>r.containsKey(e,t)))}}class oh extends nI{constructor(e){super(),this.currentSequenceNumber=e}}class od{constructor(e){this.persistence=e,this.Gs=new oi,this.Qs=null}static js(e){return new od(e)}get zs(){if(this.Qs)return this.Qs;throw nr()}addReference(e,t,r){return this.Gs.addReference(r,t),this.zs.delete(r.toString()),nC.resolve()}removeReference(e,t,r){return this.Gs.removeReference(r,t),this.zs.add(r.toString()),nC.resolve()}markPotentiallyOrphaned(e,t){return this.zs.add(t.toString()),nC.resolve()}removeTarget(e,t){this.Gs.ps(t.targetId).forEach(e=>this.zs.add(e.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.zs.add(e.toString()))}).next(()=>r.removeTargetData(e,t))}qs(){this.Qs=new Set}Us(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nC.forEach(this.zs,r=>{let n=nE.fromPath(r);return this.Ws(e,n).next(e=>{e||t.removeEntry(n,nb.min())})}).next(()=>(this.Qs=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ws(e,t).next(e=>{e?this.zs.delete(t.toString()):this.zs.add(t.toString())})}Bs(e){return 0}Ws(e,t){return nC.or([()=>nC.resolve(this.Gs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ks(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,t,r,n){this.targetId=e,this.fromCache=t,this.$i=r,this.Fi=n}static Bi(e,t){let r=iJ(),n=iJ();for(let e of t.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:n=n.add(e.doc.key)}return new of(e,t.fromCache,r,n)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(){this.Li=!1}initialize(e,t){this.qi=e,this.indexManager=t,this.Li=!0}getDocumentsMatchingQuery(e,t,r,n){return this.Ui(e,t).next(i=>i||this.Ki(e,t,n,r)).next(r=>r||this.Gi(e,t))}Ui(e,t){if(iA(t))return nC.resolve(null);let r=iP(t);return this.indexManager.getIndexType(e,r).next(n=>0===n?null:(null!==t.limit&&1===n&&(r=iP(t=ij(t,null,"F"))),this.indexManager.getDocumentsMatchingTarget(e,r).next(n=>{let i=iJ(...n);return this.qi.getDocuments(e,i).next(n=>this.indexManager.getMinOffset(e,r).next(r=>{let s=this.Qi(t,n);return this.ji(t,s,i,r.readTime)?this.Ui(e,ij(t,null,"F")):this.zi(e,s,t,r)}))})))}Ki(e,t,r,n){return iA(t)||n.isEqual(nb.min())?this.Gi(e,t):this.qi.getDocuments(e,r).next(i=>{let s=this.Qi(t,i);return this.ji(t,s,r,n)?this.Gi(e,t):(r3()<=f.in.DEBUG&&r7("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),iV(t)),this.zi(e,s,t,function(e,t){let r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,i=nb.fromTimestamp(1e9===n?new ny(r+1,0):new ny(r,n));return new nT(i,nE.empty(),-1)}(n,0)))})}Qi(e,t){let r=new nj(iz(e));return t.forEach((t,n)=>{iB(e,n)&&(r=r.add(n))}),r}ji(e,t,r,n){if(null===e.limit)return!1;if(r.size!==t.size)return!0;let i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(n)>0)}Gi(e,t){return r3()<=f.in.DEBUG&&r7("QueryEngine","Using full collection scan to execute query:",iV(t)),this.qi.getDocumentsMatchingQuery(e,t,nT.min())}zi(e,t,r,n){return this.qi.getDocumentsMatchingQuery(e,r,n).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,t,r,n){this.persistence=e,this.Wi=t,this.serializer=n,this.Hi=new nL(np),this.Ji=new i$(e=>iI(e),i_),this.Yi=new Map,this.Xi=e.getRemoteDocumentCache(),this.Fs=e.getTargetCache(),this.Ls=e.getBundleCache(),this.Zi(r)}Zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ot(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Wi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Hi))}}async function om(e,t){return await e.persistence.runTransaction("Handle user change","readonly",r=>{let n;return e.mutationQueue.getAllMutationBatches(r).next(i=>(n=i,e.Zi(t),e.mutationQueue.getAllMutationBatches(r))).next(t=>{let i=[],s=[],o=iJ();for(let e of n)for(let t of(i.push(e.batchId),e.mutations))o=o.add(t.key);for(let e of t)for(let t of(s.push(e.batchId),e.mutations))o=o.add(t.key);return e.localDocuments.getDocuments(r,o).next(e=>({tr:e,removedBatchIds:i,addedBatchIds:s}))})})}function oy(e){return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Fs.getLastRemoteSnapshotVersion(t))}async function ob(e,t,r){let n=e,i=n.Hi.get(t);try{r||await n.persistence.runTransaction("Release target",r?"readwrite":"readwrite-primary",e=>n.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!nS(e))throw e;r7("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}n.Hi=n.Hi.remove(t),n.Ji.delete(i.target)}function ov(e,t,r){let n=nb.min(),i=iJ();return e.persistence.runTransaction("Execute query","readonly",s=>(function(e,t,r){let n=e.Ji.get(r);return void 0!==n?nC.resolve(e.Hi.get(n)):e.Fs.getTargetData(t,r)})(e,s,iP(t)).next(t=>{if(t)return n=t.lastLimboFreeSnapshotVersion,e.Fs.getMatchingKeysForTargetId(s,t.targetId).next(e=>{i=e})}).next(()=>e.Wi.getDocumentsMatchingQuery(s,t,r?n:nb.min(),r?i:iJ())).next(r=>{var n;let s;return n=t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2)),s=e.Yi.get(n)||nb.min(),r.forEach((e,t)=>{t.readTime.compareTo(s)>0&&(s=t.readTime)}),e.Yi.set(n,s),{documents:r,sr:i}}))}class ow{constructor(){this.activeTargetIds=iY}hr(e){this.activeTargetIds=this.activeTargetIds.add(e)}lr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ar(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ox{constructor(){this.Wr=new ow,this.Hr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Wr.hr(e),this.Hr[e]||"not-current"}updateQueryState(e,t,r){this.Hr[e]=t}removeLocalQueryTarget(e){this.Wr.lr(e)}isLocalQueryTarget(e){return this.Wr.activeTargetIds.has(e)}clearQueryState(e){delete this.Hr[e]}getAllActiveQueryTargets(){return this.Wr.activeTargetIds}isActiveQueryTarget(e){return this.Wr.activeTargetIds.has(e)}start(){return this.Wr=new ow,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{Jr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(){this.Yr=()=>this.Xr(),this.Zr=()=>this.eo(),this.no=[],this.so()}Jr(e){this.no.push(e)}shutdown(){window.removeEventListener("online",this.Yr),window.removeEventListener("offline",this.Zr)}so(){window.addEventListener("online",this.Yr),window.addEventListener("offline",this.Zr)}Xr(){for(let e of(r7("ConnectivityMonitor","Network connectivity changed: AVAILABLE"),this.no))e(0)}eo(){for(let e of(r7("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE"),this.no))e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oT=null;function oI(){return null===oT?oT=268435456+Math.round(2147483648*Math.random()):oT++,"0x"+oT.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let o_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e){this.io=e.io,this.ro=e.ro}oo(e){this.uo=e}co(e){this.ao=e}onMessage(e){this.ho=e}close(){this.ro()}send(e){this.io(e)}lo(){this.uo()}fo(e){this.ao(e)}_o(e){this.ho(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oS="WebChannelConnection";class oN extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http";this.wo=t+"://"+e.host,this.mo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get yo(){return!1}po(e,t,r,n,i){let s=oI(),o=this.Io(e,t);r7("RestConnection",`Sending RPC '${e}' ${s}:`,o,r);let a={};return this.To(a,n,i),this.Eo(e,o,a,r).then(t=>(r7("RestConnection",`Received RPC '${e}' ${s}: `,t),t),t=>{throw ne("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",r),t})}Ao(e,t,r,n,i,s){return this.po(e,t,r,n,i)}To(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+r5,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,r)=>e[r]=t),r&&r.headers.forEach((t,r)=>e[r]=t)}Io(e,t){let r=o_[e];return`${this.wo}/v1/${t}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Eo(e,t,r,n){let i=oI();return new Promise((s,o)=>{let a=new r0;a.setWithCredentials(!0),a.listenOnce(rQ.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case rW.NO_ERROR:let t=a.getResponseJson();r7(oS,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case rW.TIMEOUT:r7(oS,`RPC '${e}' ${i} timed out`),o(new ni(nn.DEADLINE_EXCEEDED,"Request time out"));break;case rW.HTTP_ERROR:let r=a.getStatus();if(r7(oS,`RPC '${e}' ${i} failed with status:`,r,"response text:",a.getResponseText()),r>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);let t=null==e?void 0:e.error;if(t&&t.status&&t.message){let e=function(e){let t=e.toLowerCase().replace(/_/g,"-");return Object.values(nn).indexOf(t)>=0?t:nn.UNKNOWN}(t.status);o(new ni(e,t.message))}else o(new ni(nn.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new ni(nn.UNAVAILABLE,"Connection failed."));break;default:nr()}}finally{r7(oS,`RPC '${e}' ${i} completed.`)}});let l=JSON.stringify(n);r7(oS,`RPC '${e}' ${i} sending request:`,n),a.send(t,"POST",l,r,15)})}Ro(e,t,r){let n=oI(),i=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=rK(),o=rG(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new rY({})),this.To(a.initMessageHeaders,t,r),a.encodeInitMessageHeaders=!0;let u=i.join("");r7(oS,`Creating RPC '${e}' stream ${n}: ${u}`,a);let c=s.createWebChannel(u,a),h=!1,d=!1,f=new oC({io:t=>{d?r7(oS,`Not sending because RPC '${e}' stream ${n} is closed:`,t):(h||(r7(oS,`Opening RPC '${e}' stream ${n} transport.`),c.open(),h=!0),r7(oS,`RPC '${e}' stream ${n} sending:`,t),c.send(t))},ro:()=>c.close()}),g=(e,t,r)=>{e.listen(t,e=>{try{r(e)}catch(e){setTimeout(()=>{throw e},0)}})};return g(c,rZ.EventType.OPEN,()=>{d||r7(oS,`RPC '${e}' stream ${n} transport opened.`)}),g(c,rZ.EventType.CLOSE,()=>{d||(d=!0,r7(oS,`RPC '${e}' stream ${n} transport closed`),f.fo())}),g(c,rZ.EventType.ERROR,t=>{d||(d=!0,ne(oS,`RPC '${e}' stream ${n} transport errored:`,t),f.fo(new ni(nn.UNAVAILABLE,"The operation could not be completed")))}),g(c,rZ.EventType.MESSAGE,t=>{var r;if(!d){let i=t.data[0];i||nr();let s=i.error||(null===(r=i[0])||void 0===r?void 0:r.error);if(s){r7(oS,`RPC '${e}' stream ${n} received error:`,s);let t=s.status,r=function(e){let t=l[e];if(void 0!==t)return sw(t)}(t),i=s.message;void 0===r&&(r=nn.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),d=!0,f.fo(new ni(r,i)),c.close()}else r7(oS,`RPC '${e}' stream ${n} received:`,i),f._o(i)}}),g(o,rX.STAT_EVENT,t=>{t.stat===rJ.PROXY?r7(oS,`RPC '${e}' stream ${n} detected buffering proxy`):t.stat===rJ.NOPROXY&&r7(oS,`RPC '${e}' stream ${n} detected no buffering proxy`)}),setTimeout(()=>{f.lo()},0),f}}function oA(){return"undefined"!=typeof document?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(e){return new sV(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e,t,r=1e3,n=1.5,i=6e4){this.si=e,this.timerId=t,this.vo=r,this.Po=n,this.bo=i,this.Vo=0,this.So=null,this.Do=Date.now(),this.reset()}reset(){this.Vo=0}Co(){this.Vo=this.bo}xo(e){this.cancel();let t=Math.floor(this.Vo+this.No()),r=Math.max(0,Date.now()-this.Do),n=Math.max(0,t-r);n>0&&r7("ExponentialBackoff",`Backing off for ${n} ms (base delay: ${this.Vo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.So=this.si.enqueueAfterDelay(this.timerId,n,()=>(this.Do=Date.now(),e())),this.Vo*=this.Po,this.Vo<this.vo&&(this.Vo=this.vo),this.Vo>this.bo&&(this.Vo=this.bo)}ko(){null!==this.So&&(this.So.skipDelay(),this.So=null)}cancel(){null!==this.So&&(this.So.cancel(),this.So=null)}No(){return(Math.random()-.5)*this.Vo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e,t,r,n,i,s,o,a){this.si=e,this.Mo=r,this.Oo=n,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.$o=0,this.Fo=null,this.Bo=null,this.stream=null,this.Lo=new oD(e,t)}qo(){return 1===this.state||5===this.state||this.Uo()}Uo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Ko()}async stop(){this.qo()&&await this.close(0)}Go(){this.state=0,this.Lo.reset()}Qo(){this.Uo()&&null===this.Fo&&(this.Fo=this.si.enqueueAfterDelay(this.Mo,6e4,()=>this.jo()))}zo(e){this.Wo(),this.stream.send(e)}async jo(){if(this.Uo())return this.close(0)}Wo(){this.Fo&&(this.Fo.cancel(),this.Fo=null)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}async close(e,t){this.Wo(),this.Ho(),this.Lo.cancel(),this.$o++,4!==e?this.Lo.reset():t&&t.code===nn.RESOURCE_EXHAUSTED?(r8(t.toString()),r8("Using maximum backoff delay to prevent overloading the backend."),this.Lo.Co()):t&&t.code===nn.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Jo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.co(t)}Jo(){}auth(){this.state=1;let e=this.Yo(this.$o),t=this.$o;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,r])=>{this.$o===t&&this.Xo(e,r)},t=>{e(()=>{let e=new ni(nn.UNKNOWN,"Fetching auth token failed: "+t.message);return this.Zo(e)})})}Xo(e,t){let r=this.Yo(this.$o);this.stream=this.tu(e,t),this.stream.oo(()=>{r(()=>(this.state=2,this.Bo=this.si.enqueueAfterDelay(this.Oo,1e4,()=>(this.Uo()&&(this.state=3),Promise.resolve())),this.listener.oo()))}),this.stream.co(e=>{r(()=>this.Zo(e))}),this.stream.onMessage(e=>{r(()=>this.onMessage(e))})}Ko(){this.state=5,this.Lo.xo(async()=>{this.state=0,this.start()})}Zo(e){return r7("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Yo(e){return t=>{this.si.enqueueAndForget(()=>this.$o===e?t():(r7("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class oL extends oO{constructor(e,t,r,n,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,n,s),this.serializer=i}tu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.Lo.reset();let t=function(e,t){let r;if("targetChange"in t){var n,i;t.targetChange;let s="NO_CHANGE"===(n=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===n?1:"REMOVE"===n?2:"CURRENT"===n?3:"RESET"===n?4:nr(),o=t.targetChange.targetIds||[],a=(i=t.targetChange.resumeToken,e.useProto3Json?(void 0===i||"string"==typeof i||nr(),nB.fromBase64String(i||"")):(void 0===i||i instanceof Uint8Array||nr(),nB.fromUint8Array(i||new Uint8Array))),l=t.targetChange.cause,u=l&&function(e){let t=void 0===e.code?nn.UNKNOWN:sw(e.code);return new ni(t,e.message||"")}(l);r=new sD(s,o,a,u||null)}else if("documentChange"in t){t.documentChange;let n=t.documentChange;n.document,n.document.name,n.document.updateTime;let i=sW(e,n.document.name),s=sq(n.document.updateTime),o=n.document.createTime?sq(n.document.createTime):nb.min(),a=new ir({mapValue:{fields:n.document.fields}}),l=ii.newFoundDocument(i,s,o,a),u=n.targetIds||[],c=n.removedTargetIds||[];r=new sA(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;let n=t.documentDelete;n.document;let i=sW(e,n.document),s=n.readTime?sq(n.readTime):nb.min(),o=ii.newNoDocument(i,s),a=n.removedTargetIds||[];r=new sA([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;let n=t.documentRemove;n.document;let i=sW(e,n.document),s=n.removedTargetIds||[];r=new sA([],s,i,null)}else{if(!("filter"in t))return nr();{t.filter;let e=t.filter;e.targetId;let{count:n=0,unchangedNames:i}=e,s=new sv(n,i),o=e.targetId;r=new sR(o,s)}}return r}(this.serializer,e),r=function(e){if(!("targetChange"in e))return nb.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length?nb.min():t.readTime?sq(t.readTime):nb.min()}(e);return this.listener.eu(t,r)}nu(e){let t={};t.database=sX(this.serializer),t.addTarget=function(e,t){let r;let n=t.target;if((r=iC(n)?{documents:{documents:[sQ(e,n.path)]}}:{query:function(e,t){var r,n;let i={structuredQuery:{}},s=t.path;null!==t.collectionGroup?(i.parent=sQ(e,s),i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i.parent=sQ(e,s.popLast()),i.structuredQuery.from=[{collectionId:s.lastSegment()}]);let o=function(e){if(0!==e.length)return function e(t){return t instanceof ic?function(e){if("=="===e.op){if(n7(e.value))return{unaryFilter:{field:sZ(e.field),op:"IS_NAN"}};if(n3(e.value))return{unaryFilter:{field:sZ(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(n7(e.value))return{unaryFilter:{field:sZ(e.field),op:"IS_NOT_NAN"}};if(n3(e.value))return{unaryFilter:{field:sZ(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sZ(e.field),op:sF[e.op],value:e.value}}}(t):t instanceof ih?function(t){let r=t.getFilters().map(t=>e(t));return 1===r.length?r[0]:{compositeFilter:{op:sU[t.op],filters:r}}}(t):nr()}(ih.create(e,"and"))}(t.filters);o&&(i.structuredQuery.where=o);let a=function(e){if(0!==e.length)return e.map(e=>({field:sZ(e.field),direction:sj[e.dir]}))}(t.orderBy);a&&(i.structuredQuery.orderBy=a);let l=sB(e,t.limit);return null!==l&&(i.structuredQuery.limit=l),t.startAt&&(i.structuredQuery.startAt={before:(r=t.startAt).inclusive,values:r.position}),t.endAt&&(i.structuredQuery.endAt={before:!(n=t.endAt).inclusive,values:n.position}),i}(e,n)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){r.resumeToken=s$(e,t.resumeToken);let n=sB(e,t.expectedCount);null!==n&&(r.expectedCount=n)}else if(t.snapshotVersion.compareTo(nb.min())>0){r.readTime=sz(e,t.snapshotVersion.toTimestamp());let n=sB(e,t.expectedCount);null!==n&&(r.expectedCount=n)}return r}(this.serializer,e);let r=function(e,t){let r=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return nr()}}(t.purpose);return null==r?null:{"goog-listen-tags":r}}(this.serializer,e);r&&(t.labels=r),this.zo(t)}su(e){let t={};t.database=sX(this.serializer),t.removeTarget=e,this.zo(t)}}class oP extends oO{constructor(e,t,r,n,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,n,s),this.serializer=i,this.iu=!1}get ru(){return this.iu}start(){this.iu=!1,this.lastStreamToken=void 0,super.start()}Jo(){this.iu&&this.ou([])}tu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){var t,r;if(e.streamToken||nr(),this.lastStreamToken=e.streamToken,this.iu){this.Lo.reset();let n=(t=e.writeResults,r=e.commitTime,t&&t.length>0?(void 0!==r||nr(),t.map(e=>{let t;return(t=e.updateTime?sq(e.updateTime):sq(r)).isEqual(nb.min())&&(t=sq(r)),new sr(t,e.transformResults||[])})):[]),i=sq(e.commitTime);return this.listener.uu(i,n)}return e.writeResults&&0!==e.writeResults.length&&nr(),this.iu=!0,this.listener.cu()}au(){let e={};e.database=sX(this.serializer),this.zo(e)}ou(e){let t={streamToken:this.lastStreamToken,writes:e.map(e=>(function(e,t){var r;let n;if(t instanceof su)n={update:sY(e,t.key,t.value)};else if(t instanceof sg)n={delete:sG(e,t.key)};else if(t instanceof sc)n={update:sY(e,t.key,t.data),updateMask:function(e){let t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}(t.fieldMask)};else{if(!(t instanceof sp))return nr();n={verify:sG(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>(function(e,t){let r=t.transform;if(r instanceof i4)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(r instanceof i9)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:r.elements}};if(r instanceof i6)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:r.elements}};if(r instanceof i7)return{fieldPath:t.field.canonicalString(),increment:r.wt};throw nr()})(0,e))),t.precondition.isNone||(n.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:sz(e,r.updateTime.toTimestamp())}:void 0!==r.exists?{exists:r.exists}:nr()),n})(this.serializer,e))};this.zo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM extends class{}{constructor(e,t,r,n){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=n,this.hu=!1}lu(){if(this.hu)throw new ni(nn.FAILED_PRECONDITION,"The client has already been terminated.")}po(e,t,r){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([n,i])=>this.connection.po(e,t,r,n,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===nn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ni(nn.UNKNOWN,e.toString())})}Ao(e,t,r,n){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Ao(e,t,r,i,s,n)).catch(e=>{throw"FirebaseError"===e.name?(e.code===nn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ni(nn.UNKNOWN,e.toString())})}terminate(){this.hu=!0}}class oj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.du=0,this._u=null,this.wu=!0}mu(){0===this.du&&(this.gu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.yu("Backend didn't respond within 10 seconds."),this.gu("Offline"),Promise.resolve())))}pu(e){"Online"===this.state?this.gu("Unknown"):(this.du++,this.du>=1&&(this.Iu(),this.yu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.gu("Offline")))}set(e){this.Iu(),this.du=0,"Online"===e&&(this.wu=!1),this.gu(e)}gu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}yu(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.wu?(r8(t),this.wu=!1):r7("OnlineStateTracker",t)}Iu(){null!==this._u&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(e,t,r,n,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Tu=[],this.Eu=new Map,this.Au=new Set,this.Ru=[],this.vu=i,this.vu.Jr(e=>{r.enqueueAndForget(async()=>{oG(this)&&(r7("RemoteStore","Restarting streams for network reachability change."),await async function(e){e.Au.add(4),await oV(e),e.Pu.set("Unknown"),e.Au.delete(4),await oU(e)}(this))})}),this.Pu=new oj(r,n)}}async function oU(e){if(oG(e))for(let t of e.Ru)await t(!0)}async function oV(e){for(let t of e.Ru)await t(!1)}function oB(e,t){e.Eu.has(t.targetId)||(e.Eu.set(t.targetId,t),oK(e)?oH(e):o7(e).Uo()&&o$(e,t))}function oz(e,t){let r=o7(e);e.Eu.delete(t),r.Uo()&&oq(e,t),0===e.Eu.size&&(r.Uo()?r.Qo():oG(e)&&e.Pu.set("Unknown"))}function o$(e,t){if(e.bu.Lt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(nb.min())>0){let r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}o7(e).nu(t)}function oq(e,t){e.bu.Lt(t),o7(e).su(t)}function oH(e){e.bu=new sL({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),he:t=>e.Eu.get(t)||null,oe:()=>e.datastore.serializer.databaseId}),o7(e).start(),e.Pu.mu()}function oK(e){return oG(e)&&!o7(e).qo()&&e.Eu.size>0}function oG(e){return 0===e.Au.size}async function oW(e){e.Eu.forEach((t,r)=>{o$(e,t)})}async function oQ(e,t){e.bu=void 0,oK(e)?(e.Pu.pu(t),oH(e)):e.Pu.set("Unknown")}async function oX(e,t,r){if(e.Pu.set("Online"),t instanceof sD&&2===t.state&&t.cause)try{await async function(e,t){let r=t.cause;for(let n of t.targetIds)e.Eu.has(n)&&(await e.remoteSyncer.rejectListen(n,r),e.Eu.delete(n),e.bu.removeTarget(n))}(e,t)}catch(r){r7("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await oJ(e,r)}else if(t instanceof sA?e.bu.Wt(t):t instanceof sR?e.bu.ee(t):e.bu.Yt(t),!r.isEqual(nb.min()))try{let t=await oy(e.localStore);r.compareTo(t)>=0&&await function(e,t){let r=e.bu.ue(t);return r.targetChanges.forEach((r,n)=>{if(r.resumeToken.approximateByteSize()>0){let i=e.Eu.get(n);i&&e.Eu.set(n,i.withResumeToken(r.resumeToken,t))}}),r.targetMismatches.forEach((t,r)=>{let n=e.Eu.get(t);if(!n)return;e.Eu.set(t,n.withResumeToken(nB.EMPTY_BYTE_STRING,n.snapshotVersion)),oq(e,t);let i=new s2(n.target,t,r,n.sequenceNumber);o$(e,i)}),e.remoteSyncer.applyRemoteEvent(r)}(e,r)}catch(t){r7("RemoteStore","Failed to raise snapshot:",t),await oJ(e,t)}}async function oJ(e,t,r){if(!nS(t))throw t;e.Au.add(1),await oV(e),e.Pu.set("Offline"),r||(r=()=>oy(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{r7("RemoteStore","Retrying IndexedDB access"),await r(),e.Au.delete(1),await oU(e)})}function oY(e,t){return t().catch(r=>oJ(e,r,t))}async function oZ(e){let t=o8(e),r=e.Tu.length>0?e.Tu[e.Tu.length-1].batchId:-1;for(;oG(e)&&e.Tu.length<10;)try{let n=await function(e,t){return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}(e.localStore,r);if(null===n){0===e.Tu.length&&t.Qo();break}r=n.batchId,function(e,t){e.Tu.push(t);let r=o8(e);r.Uo()&&r.ru&&r.ou(t.mutations)}(e,n)}catch(t){await oJ(e,t)}o0(e)&&o1(e)}function o0(e){return oG(e)&&!o8(e).qo()&&e.Tu.length>0}function o1(e){o8(e).start()}async function o2(e){o8(e).au()}async function o4(e){let t=o8(e);for(let r of e.Tu)t.ou(r.mutations)}async function o9(e,t,r){let n=e.Tu.shift(),i=sy.from(n,t,r);await oY(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await oZ(e)}async function o5(e,t){t&&o8(e).ru&&await async function(e,t){var r;if(function(e){switch(e){default:return nr();case nn.CANCELLED:case nn.UNKNOWN:case nn.DEADLINE_EXCEEDED:case nn.RESOURCE_EXHAUSTED:case nn.INTERNAL:case nn.UNAVAILABLE:case nn.UNAUTHENTICATED:return!1;case nn.INVALID_ARGUMENT:case nn.NOT_FOUND:case nn.ALREADY_EXISTS:case nn.PERMISSION_DENIED:case nn.FAILED_PRECONDITION:case nn.ABORTED:case nn.OUT_OF_RANGE:case nn.UNIMPLEMENTED:case nn.DATA_LOSS:return!0}}(r=t.code)&&r!==nn.ABORTED){let r=e.Tu.shift();o8(e).Go(),await oY(e,()=>e.remoteSyncer.rejectFailedWrite(r.batchId,t)),await oZ(e)}}(e,t),o0(e)&&o1(e)}async function o6(e,t){e.asyncQueue.verifyOperationInProgress(),r7("RemoteStore","RemoteStore received new credentials");let r=oG(e);e.Au.add(3),await oV(e),r&&e.Pu.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Au.delete(3),await oU(e)}async function o3(e,t){t?(e.Au.delete(2),await oU(e)):t||(e.Au.add(2),await oV(e),e.Pu.set("Unknown"))}function o7(e){var t,r,n;return e.Vu||(e.Vu=(t=e.datastore,r=e.asyncQueue,n={oo:oW.bind(null,e),co:oQ.bind(null,e),eu:oX.bind(null,e)},t.lu(),new oL(r,t.connection,t.authCredentials,t.appCheckCredentials,t.serializer,n)),e.Ru.push(async t=>{t?(e.Vu.Go(),oK(e)?oH(e):e.Pu.set("Unknown")):(await e.Vu.stop(),e.bu=void 0)})),e.Vu}function o8(e){var t,r,n;return e.Su||(e.Su=(t=e.datastore,r=e.asyncQueue,n={oo:o2.bind(null,e),co:o5.bind(null,e),cu:o4.bind(null,e),uu:o9.bind(null,e)},t.lu(),new oP(r,t.connection,t.authCredentials,t.appCheckCredentials,t.serializer,n)),e.Ru.push(async t=>{t?(e.Su.Go(),await oZ(e)):(await e.Su.stop(),e.Tu.length>0&&(r7("RemoteStore",`Stopping write stream with ${e.Tu.length} pending writes`),e.Tu=[]))})),e.Su}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e,t,r,n,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=n,this.removalCallback=i,this.deferred=new ns,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,r,n,i){let s=Date.now()+r,o=new ae(e,t,s,n,i);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ni(nn.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function at(e,t){if(r8("AsyncQueue",`${t}: ${e}`),nS(e))return new ni(nn.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e){this.comparator=e?(t,r)=>e(t,r)||nE.comparator(t.key,r.key):(e,t)=>nE.comparator(e.key,t.key),this.keyedMap=iK(),this.sortedSet=new nL(this.comparator)}static emptySet(e){return new ar(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ar)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let e=t.getNext().key,n=r.getNext().key;if(!e.isEqual(n))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){let r=new ar;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(){this.Du=new nL(nE.comparator)}track(e){let t=e.doc.key,r=this.Du.get(t);r?0!==e.type&&3===r.type?this.Du=this.Du.insert(t,e):3===e.type&&1!==r.type?this.Du=this.Du.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Du=this.Du.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Du=this.Du.remove(t):1===e.type&&2===r.type?this.Du=this.Du.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):nr():this.Du=this.Du.insert(t,e)}Cu(){let e=[];return this.Du.inorderTraversal((t,r)=>{e.push(r)}),e}}class ai{constructor(e,t,r,n,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=n,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,n,i){let s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new ai(e,t,ar.emptySet(t),s,r,n,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&iF(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==r[e].type||!t[e].doc.isEqual(r[e].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(){this.xu=void 0,this.listeners=[]}}class ao{constructor(){this.queries=new i$(e=>iU(e),iF),this.onlineState="Unknown",this.Nu=new Set}}async function aa(e,t){let r=t.query,n=!1,i=e.queries.get(r);if(i||(n=!0,i=new as),n)try{i.xu=await e.onListen(r)}catch(r){let e=at(r,`Initialization of query '${iV(t.query)}' failed`);return void t.onError(e)}e.queries.set(r,i),i.listeners.push(t),t.ku(e.onlineState),i.xu&&t.Mu(i.xu)&&ah(e)}async function al(e,t){let r=t.query,n=!1,i=e.queries.get(r);if(i){let e=i.listeners.indexOf(t);e>=0&&(i.listeners.splice(e,1),n=0===i.listeners.length)}if(n)return e.queries.delete(r),e.onUnlisten(r)}function au(e,t){let r=!1;for(let n of t){let t=n.query,i=e.queries.get(t);if(i){for(let e of i.listeners)e.Mu(n)&&(r=!0);i.xu=n}}r&&ah(e)}function ac(e,t,r){let n=e.queries.get(t);if(n)for(let e of n.listeners)e.onError(r);e.queries.delete(t)}function ah(e){e.Nu.forEach(e=>{e.next()})}class ad{constructor(e,t,r){this.query=e,this.Ou=t,this.$u=!1,this.Fu=null,this.onlineState="Unknown",this.options=r||{}}Mu(e){if(!this.options.includeMetadataChanges){let t=[];for(let r of e.docChanges)3!==r.type&&t.push(r);e=new ai(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.$u?this.Bu(e)&&(this.Ou.next(e),t=!0):this.Lu(e,this.onlineState)&&(this.qu(e),t=!0),this.Fu=e,t}onError(e){this.Ou.error(e)}ku(e){this.onlineState=e;let t=!1;return this.Fu&&!this.$u&&this.Lu(this.Fu,e)&&(this.qu(this.Fu),t=!0),t}Lu(e,t){return!e.fromCache||(!this.options.Uu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Bu(e){if(e.docChanges.length>0)return!0;let t=this.Fu&&this.Fu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}qu(e){e=ai.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.$u=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e){this.key=e}}class ag{constructor(e){this.key=e}}class ap{constructor(e,t){this.query=e,this.Ju=t,this.Yu=null,this.hasCachedResults=!1,this.current=!1,this.Xu=iJ(),this.mutatedKeys=iJ(),this.Zu=iz(e),this.tc=new ar(this.Zu)}get ec(){return this.Ju}nc(e,t){let r=t?t.sc:new an,n=t?t.tc:this.tc,i=t?t.mutatedKeys:this.mutatedKeys,s=n,o=!1,a="F"===this.query.limitType&&n.size===this.query.limit?n.last():null,l="L"===this.query.limitType&&n.size===this.query.limit?n.first():null;if(e.inorderTraversal((e,t)=>{let u=n.get(e),c=iB(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations),f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(r.track({type:3,doc:c}),f=!0):this.ic(u,c)||(r.track({type:2,doc:c}),f=!0,(a&&this.Zu(c,a)>0||l&&0>this.Zu(c,l))&&(o=!0)):!u&&c?(r.track({type:0,doc:c}),f=!0):u&&!c&&(r.track({type:1,doc:u}),f=!0,(a||l)&&(o=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){let e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),r.track({type:1,doc:e})}return{tc:s,sc:r,ji:o,mutatedKeys:i}}ic(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){let n=this.tc;this.tc=e.tc,this.mutatedKeys=e.mutatedKeys;let i=e.sc.Cu();i.sort((e,t)=>(function(e,t){let r=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nr()}};return r(e)-r(t)})(e.type,t.type)||this.Zu(e.doc,t.doc)),this.rc(r);let s=t?this.oc():[],o=0===this.Xu.size&&this.current?1:0,a=o!==this.Yu;return(this.Yu=o,0!==i.length||a)?{snapshot:new ai(this.query,e.tc,n,i,e.mutatedKeys,0===o,a,!1,!!r&&r.resumeToken.approximateByteSize()>0),uc:s}:{uc:s}}ku(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tc:this.tc,sc:new an,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{uc:[]}}cc(e){return!this.Ju.has(e)&&!!this.tc.has(e)&&!this.tc.get(e).hasLocalMutations}rc(e){e&&(e.addedDocuments.forEach(e=>this.Ju=this.Ju.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ju=this.Ju.delete(e)),this.current=e.current)}oc(){if(!this.current)return[];let e=this.Xu;this.Xu=iJ(),this.tc.forEach(e=>{this.cc(e.key)&&(this.Xu=this.Xu.add(e.key))});let t=[];return e.forEach(e=>{this.Xu.has(e)||t.push(new ag(e))}),this.Xu.forEach(r=>{e.has(r)||t.push(new af(r))}),t}ac(e){this.Ju=e.sr,this.Xu=iJ();let t=this.nc(e.documents);return this.applyChanges(t,!0)}hc(){return ai.fromInitialDocuments(this.query,this.tc,this.mutatedKeys,0===this.Yu,this.hasCachedResults)}}class am{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class ay{constructor(e){this.key=e,this.lc=!1}}class ab{constructor(e,t,r,n,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=n,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.fc={},this.dc=new i$(e=>iU(e),iF),this._c=new Map,this.wc=new Set,this.mc=new nL(nE.comparator),this.gc=new Map,this.yc=new oi,this.Ic={},this.Tc=new Map,this.Ec=s7.kn(),this.onlineState="Unknown",this.Ac=void 0}get isPrimaryClient(){return!0===this.Ac}}async function av(e,t){let r,n;let i=function(e){let t=e;return t.remoteStore.remoteSyncer.applyRemoteEvent=aE.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=aM.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=aI.bind(null,t),t.fc.eu=au.bind(null,t.eventManager),t.fc.vc=ac.bind(null,t.eventManager),t}(e),s=i.dc.get(t);if(s)r=s.targetId,i.sharedClientState.addLocalQueryTarget(r),n=s.view.hc();else{let e=await function(e,t){let r=e;return r.persistence.runTransaction("Allocate target","readwrite",e=>{let n;return r.Fs.getTargetData(e,t).next(i=>i?(n=i,nC.resolve(n)):r.Fs.allocateTargetId(e).next(i=>(n=new s2(t,i,"TargetPurposeListen",e.currentSequenceNumber),r.Fs.addTargetData(e,n).next(()=>n))))}).then(e=>{let n=r.Hi.get(e.targetId);return(null===n||e.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(r.Hi=r.Hi.insert(e.targetId,e),r.Ji.set(t,e.targetId)),e})}(i.localStore,iP(t)),s=i.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,n=await aw(i,t,r,"current"===s,e.resumeToken),i.isPrimaryClient&&oB(i.remoteStore,e)}return n}async function aw(e,t,r,n,i){e.Rc=(t,r,n)=>(async function(e,t,r,n){let i=t.view.nc(r);i.ji&&(i=await ov(e.localStore,t.query,!1).then(({documents:e})=>t.view.nc(e,i)));let s=n&&n.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return aD(e,t.targetId,o.uc),o.snapshot})(e,t,r,n);let s=await ov(e.localStore,t,!0),o=new ap(t,s.sr),a=o.nc(s.documents),l=sN.createSynthesizedTargetChangeForCurrentChange(r,n&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,l);aD(e,r,u.uc);let c=new am(t,r,o);return e.dc.set(t,c),e._c.has(r)?e._c.get(r).push(t):e._c.set(r,[t]),u.snapshot}async function ax(e,t){let r=e.dc.get(t),n=e._c.get(r.targetId);if(n.length>1)return e._c.set(r.targetId,n.filter(e=>!iF(e,t))),void e.dc.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(r.targetId),e.sharedClientState.isActiveQueryTarget(r.targetId)||await ob(e.localStore,r.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(r.targetId),oz(e.remoteStore,r.targetId),aA(e,r.targetId)}).catch(n_)):(aA(e,r.targetId),await ob(e.localStore,r.targetId,!0))}async function ak(e,t,r){let n=function(e){let t=e;return t.remoteStore.remoteSyncer.applySuccessfulWrite=a_.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=aC.bind(null,t),t}(e);try{var i,s;let e;let o=await function(e,t){let r,n;let i=ny.now(),s=t.reduce((e,t)=>e.add(t.key),iJ());return e.persistence.runTransaction("Locally write mutations","readwrite",o=>{let a=iq,l=iJ();return e.Xi.getEntries(o,s).next(e=>{(a=e).forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>e.localDocuments.getOverlayedDocuments(o,a)).next(n=>{r=n;let s=[];for(let e of t){let t=function(e,t){let r=null;for(let n of e.fieldTransforms){let e=t.data.field(n.field),i=i2(n.transform,e||null);null!=i&&(null===r&&(r=ir.empty()),r.set(n.field,i))}return r||null}(e,r.get(e.key).overlayedDocument);null!=t&&s.push(new sc(e.key,t,function e(t){let r=[];return nD(t.fields,(t,n)=>{let i=new nk([t]);if(n8(n)){let t=e(n.mapValue).fields;if(0===t.length)r.push(i);else for(let e of t)r.push(i.child(e))}else r.push(i)}),new nU(r)}(t.value.mapValue),sn.exists(!0)))}return e.mutationQueue.addMutationBatch(o,i,s,t)}).next(t=>{n=t;let i=t.applyToLocalDocumentSet(r,l);return e.documentOverlayCache.saveOverlays(o,t.batchId,i)})}).then(()=>({batchId:n.batchId,changes:iG(r)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(o.batchId),i=n,s=o.batchId,(e=i.Ic[i.currentUser.toKey()])||(e=new nL(np)),e=e.insert(s,r),i.Ic[i.currentUser.toKey()]=e,await aL(n,o.changes),await oZ(n.remoteStore)}catch(t){let e=at(t,"Failed to persist write");r.reject(e)}}async function aE(e,t){try{let r=await function(e,t){let r=e,n=t.snapshotVersion,i=r.Hi;return r.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{var s;let o,a;let l=r.Xi.newChangeBuffer({trackRemovals:!0});i=r.Hi;let u=[];t.targetChanges.forEach((s,o)=>{var a;let l=i.get(o);if(!l)return;u.push(r.Fs.removeMatchingKeys(e,s.removedDocuments,o).next(()=>r.Fs.addMatchingKeys(e,s.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(nB.EMPTY_BYTE_STRING,nb.min()).withLastLimboFreeSnapshotVersion(nb.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,n)),i=i.insert(o,c),a=c,(0===l.resumeToken.approximateByteSize()||a.snapshotVersion.toMicroseconds()-l.snapshotVersion.toMicroseconds()>=3e8||s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size>0)&&u.push(r.Fs.updateTargetData(e,c))});let c=iq,h=iJ();if(t.documentUpdates.forEach(n=>{t.resolvedLimboDocuments.has(n)&&u.push(r.persistence.referenceDelegate.updateLimboDocument(e,n))}),u.push((s=t.documentUpdates,o=iJ(),a=iJ(),s.forEach(e=>o=o.add(e)),l.getEntries(e,o).next(e=>{let t=iq;return s.forEach((r,n)=>{let i=e.get(r);n.isFoundDocument()!==i.isFoundDocument()&&(a=a.add(r)),n.isNoDocument()&&n.version.isEqual(nb.min())?(l.removeEntry(r,n.readTime),t=t.insert(r,n)):!i.isValidDocument()||n.version.compareTo(i.version)>0||0===n.version.compareTo(i.version)&&i.hasPendingWrites?(l.addEntry(n),t=t.insert(r,n)):r7("LocalStore","Ignoring outdated watch update for ",r,". Current version:",i.version," Watch version:",n.version)}),{er:t,nr:a}})).next(e=>{c=e.er,h=e.nr})),!n.isEqual(nb.min())){let t=r.Fs.getLastRemoteSnapshotVersion(e).next(t=>r.Fs.setTargetsMetadata(e,e.currentSequenceNumber,n));u.push(t)}return nC.waitFor(u).next(()=>l.apply(e)).next(()=>r.localDocuments.getLocalViewOfDocuments(e,c,h)).next(()=>c)}).then(e=>(r.Hi=i,e))}(e.localStore,t);t.targetChanges.forEach((t,r)=>{let n=e.gc.get(r);n&&(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1||nr(),t.addedDocuments.size>0?n.lc=!0:t.modifiedDocuments.size>0?n.lc||nr():t.removedDocuments.size>0&&(n.lc||nr(),n.lc=!1))}),await aL(e,r,t)}catch(e){await n_(e)}}function aT(e,t,r){let n=e;if(n.isPrimaryClient&&0===r||!n.isPrimaryClient&&1===r){let e=[];n.dc.forEach((r,n)=>{let i=n.view.ku(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){let r=e;r.onlineState=t;let n=!1;r.queries.forEach((e,r)=>{for(let e of r.listeners)e.ku(t)&&(n=!0)}),n&&ah(r)}(n.eventManager,t),e.length&&n.fc.eu(e),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function aI(e,t,r){let n=e;n.sharedClientState.updateQueryState(t,"rejected",r);let i=n.gc.get(t),s=i&&i.key;if(s){let e=new nL(nE.comparator);e=e.insert(s,ii.newNoDocument(s,nb.min()));let r=iJ().add(s),i=new sS(nb.min(),new Map,new nL(np),e,r);await aE(n,i),n.mc=n.mc.remove(s),n.gc.delete(t),aO(n)}else await ob(n.localStore,t,!1).then(()=>aA(n,t,r)).catch(n_)}async function a_(e,t){var r;let n=t.batch.batchId;try{let i=await (r=e.localStore).persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{let n=t.batch.keys(),i=r.Xi.newChangeBuffer({trackRemovals:!0});return(function(e,t,r,n){let i=r.batch,s=i.keys(),o=nC.resolve();return s.forEach(e=>{o=o.next(()=>n.getEntry(t,e)).next(t=>{let s=r.docVersions.get(e);null!==s||nr(),0>t.version.compareTo(s)&&(i.applyToRemoteDocument(t,r),t.isValidDocument()&&(t.setReadTime(r.commitVersion),n.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))})(r,e,t,i).next(()=>i.apply(e)).next(()=>r.mutationQueue.performConsistencyCheck(e)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(e,n,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=iJ();for(let r=0;r<e.mutationResults.length;++r)e.mutationResults[r].transformResults.length>0&&(t=t.add(e.batch.mutations[r].key));return t}(t))).next(()=>r.localDocuments.getDocuments(e,n))});aN(e,n,null),aS(e,n),e.sharedClientState.updateMutationState(n,"acknowledged"),await aL(e,i)}catch(e){await n_(e)}}async function aC(e,t,r){var n;try{let i=await (n=e.localStore).persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(null!==t||nr(),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))});aN(e,t,r),aS(e,t),e.sharedClientState.updateMutationState(t,"rejected",r),await aL(e,i)}catch(e){await n_(e)}}function aS(e,t){(e.Tc.get(t)||[]).forEach(e=>{e.resolve()}),e.Tc.delete(t)}function aN(e,t,r){let n=e,i=n.Ic[n.currentUser.toKey()];if(i){let e=i.get(t);e&&(r?e.reject(r):e.resolve(),i=i.remove(t)),n.Ic[n.currentUser.toKey()]=i}}function aA(e,t,r=null){for(let n of(e.sharedClientState.removeLocalQueryTarget(t),e._c.get(t)))e.dc.delete(n),r&&e.fc.vc(n,r);e._c.delete(t),e.isPrimaryClient&&e.yc.ps(t).forEach(t=>{e.yc.containsKey(t)||aR(e,t)})}function aR(e,t){e.wc.delete(t.path.canonicalString());let r=e.mc.get(t);null!==r&&(oz(e.remoteStore,r),e.mc=e.mc.remove(t),e.gc.delete(r),aO(e))}function aD(e,t,r){for(let n of r)n instanceof af?(e.yc.addReference(n.key,t),function(e,t){let r=t.key,n=r.path.canonicalString();e.mc.get(r)||e.wc.has(n)||(r7("SyncEngine","New document in limbo: "+r),e.wc.add(n),aO(e))}(e,n)):n instanceof ag?(r7("SyncEngine","Document no longer in limbo: "+n.key),e.yc.removeReference(n.key,t),e.yc.containsKey(n.key)||aR(e,n.key)):nr()}function aO(e){for(;e.wc.size>0&&e.mc.size<e.maxConcurrentLimboResolutions;){let t=e.wc.values().next().value;e.wc.delete(t);let r=new nE(nw.fromString(t)),n=e.Ec.next();e.gc.set(n,new ay(r)),e.mc=e.mc.insert(r,n),oB(e.remoteStore,new s2(iP(iN(r.path)),n,"TargetPurposeLimboResolution",nN.ct))}}async function aL(e,t,r){let n=[],i=[],s=[];e.dc.isEmpty()||(e.dc.forEach((o,a)=>{s.push(e.Rc(a,t,r).then(t=>{if((t||r)&&e.isPrimaryClient&&e.sharedClientState.updateQueryState(a.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){n.push(t);let e=of.Bi(a.targetId,t);i.push(e)}}))}),await Promise.all(s),e.fc.eu(n),await async function(e,t){let r=e;try{await r.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>nC.forEach(t,t=>nC.forEach(t.$i,n=>r.persistence.referenceDelegate.addReference(e,t.targetId,n)).next(()=>nC.forEach(t.Fi,n=>r.persistence.referenceDelegate.removeReference(e,t.targetId,n)))))}catch(e){if(!nS(e))throw e;r7("LocalStore","Failed to update sequence numbers: "+e)}for(let e of t){let t=e.targetId;if(!e.fromCache){let e=r.Hi.get(t),n=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(n);r.Hi=r.Hi.insert(t,i)}}}(e.localStore,i))}async function aP(e,t){let r=e;if(!r.currentUser.isEqual(t)){r7("SyncEngine","User change. New user:",t.toKey());let e=await om(r.localStore,t);r.currentUser=t,r.Tc.forEach(e=>{e.forEach(e=>{e.reject(new ni(nn.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.Tc.clear(),r.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await aL(r,e.tr)}}function aM(e,t){let r=e.gc.get(t);if(r&&r.lc)return iJ().add(r.key);{let r=iJ(),n=e._c.get(t);if(!n)return r;for(let t of n){let n=e.dc.get(t);r=r.unionWith(n.view.ec)}return r}}class aj{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=oR(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){var t,r,n,i;return t=this.persistence,r=new og,n=e.initialUser,i=this.serializer,new op(t,r,n,i)}createPersistence(e){return new oc(od.js,this.serializer)}createSharedClientState(e){return new ox}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class aF{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>aT(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=aP.bind(null,this.syncEngine),await o3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new ao}createDatastore(e){var t,r,n;let i=oR(e.databaseInfo.databaseId),s=(t=e.databaseInfo,new oN(t));return r=e.authCredentials,n=e.appCheckCredentials,new oM(r,n,s,i)}createRemoteStore(e){var t,r,n,i,s;return t=this.localStore,r=this.datastore,n=e.asyncQueue,i=e=>aT(this.syncEngine,e,0),s=oE.D()?new oE:new ok,new oF(t,r,n,i,s)}createSyncEngine(e,t){return function(e,t,r,n,i,s,o){let a=new ab(e,t,r,n,i,s);return o&&(a.Ac=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){r7("RemoteStore","RemoteStore shutting down."),e.Au.add(5),await oV(e),e.vu.shutdown(),e.Pu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Vc(this.observer.next,e)}error(e){this.observer.error?this.Vc(this.observer.error,e):r8("Uncaught Error in snapshot listener:",e.toString())}Sc(){this.muted=!0}Vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e,t,r,n){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=n,this.user=r9.UNAUTHENTICATED,this.clientId=ng.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async e=>{r7("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(r,e=>(r7("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ni(nn.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ns;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){let t=at(r,"Failed to shutdown persistence");e.reject(t)}}),e.promise}}async function aB(e,t){e.asyncQueue.verifyOperationInProgress(),r7("FirestoreClient","Initializing OfflineComponentProvider");let r=await e.getConfiguration();await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async e=>{n.isEqual(e)||(await om(t.localStore,e),n=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function az(e,t){e.asyncQueue.verifyOperationInProgress();let r=await a$(e);r7("FirestoreClient","Initializing OnlineComponentProvider");let n=await e.getConfiguration();await t.initialize(r,n),e.setCredentialChangeListener(e=>o6(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,r)=>o6(t.remoteStore,r)),e._onlineComponents=t}async function a$(e){if(!e._offlineComponents){if(e._uninitializedComponentsProvider){r7("FirestoreClient","Using user provided OfflineComponentProvider");try{await aB(e,e._uninitializedComponentsProvider._offline)}catch(t){if(!("FirebaseError"===t.name?t.code===nn.FAILED_PRECONDITION||t.code===nn.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code))throw t;ne("Error using user provided cache. Falling back to memory cache: "+t),await aB(e,new aj)}}else r7("FirestoreClient","Using default OfflineComponentProvider"),await aB(e,new aj)}return e._offlineComponents}async function aq(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(r7("FirestoreClient","Using user provided OnlineComponentProvider"),await az(e,e._uninitializedComponentsProvider._online)):(r7("FirestoreClient","Using default OnlineComponentProvider"),await az(e,new aF))),e._onlineComponents}async function aH(e){let t=await aq(e),r=t.eventManager;return r.onListen=av.bind(null,t.syncEngine),r.onUnlisten=ax.bind(null,t.syncEngine),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aK=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aG(e,t,r){if(!r)throw new ni(nn.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function aW(e){if(!nE.isDocumentKey(e))throw new ni(nn.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function aQ(e){if(nE.isDocumentKey(e))throw new ni(nn.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function aX(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{var t;let r=(t=e).constructor?t.constructor.name:null;return r?`a custom ${r} object`:"an object"}}return"function"==typeof e?"a function":nr()}function aJ(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ni(nn.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let r=aX(e);throw new ni(nn.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aY{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ni(nn.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ni(nn.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,r,n){if(!0===t&&!0===n)throw new ni(nn.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!1:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aZ{constructor(e,t,r,n){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aY({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ni(nn.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ni(nn.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aY(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new na;switch(e.type){case"firstParty":return new nh(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ni(nn.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let t=aK.get(e);t&&(r7("ComponentProvider","Removing Datastore"),aK.delete(e),t.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new a2(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new a0(this.firestore,e,this._key)}}class a1{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new a1(this.firestore,e,this._query)}}class a2 extends a1{constructor(e,t,r){super(e,t,iN(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new a0(this.firestore,null,new nE(e))}withConverter(e){return new a2(this.firestore,e,this._path)}}function a4(e,t,...r){if(e=(0,g.m9)(e),aG("collection","path",t),e instanceof aZ){let n=nw.fromString(t,...r);return aQ(n),new a2(e,null,n)}{if(!(e instanceof a0||e instanceof a2))throw new ni(nn.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=e._path.child(nw.fromString(t,...r));return aQ(n),new a2(e.firestore,null,n)}}function a9(e,t,...r){if(e=(0,g.m9)(e),1==arguments.length&&(t=ng.A()),aG("doc","path",t),e instanceof aZ){let n=nw.fromString(t,...r);return aW(n),new a0(e,null,new nE(n))}{if(!(e instanceof a0||e instanceof a2))throw new ni(nn.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=e._path.child(nw.fromString(t,...r));return aW(n),new a0(e.firestore,e instanceof a2?e.converter:null,new nE(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(){this.Kc=Promise.resolve(),this.Gc=[],this.Qc=!1,this.jc=[],this.zc=null,this.Wc=!1,this.Hc=!1,this.Jc=[],this.Lo=new oD(this,"async_queue_retry"),this.Yc=()=>{let e=oA();e&&r7("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Lo.ko()};let e=oA();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Yc)}get isShuttingDown(){return this.Qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Xc(),this.Zc(e)}enterRestrictedMode(e){if(!this.Qc){this.Qc=!0,this.Hc=e||!1;let t=oA();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Yc)}}enqueue(e){if(this.Xc(),this.Qc)return new Promise(()=>{});let t=new ns;return this.Zc(()=>this.Qc&&this.Hc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Gc.push(e),this.ta()))}async ta(){if(0!==this.Gc.length){try{await this.Gc[0](),this.Gc.shift(),this.Lo.reset()}catch(e){if(!nS(e))throw e;r7("AsyncQueue","Operation failed with retryable error: "+e)}this.Gc.length>0&&this.Lo.xo(()=>this.ta())}}Zc(e){let t=this.Kc.then(()=>(this.Wc=!0,e().catch(e=>{let t;this.zc=e,this.Wc=!1;let r=(t=e.message||"",e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t);throw r8("INTERNAL UNHANDLED ERROR: ",r),e}).then(e=>(this.Wc=!1,e))));return this.Kc=t,t}enqueueAfterDelay(e,t,r){this.Xc(),this.Jc.indexOf(e)>-1&&(t=0);let n=ae.createAndSchedule(this,e,t,r,e=>this.ea(e));return this.jc.push(n),n}Xc(){this.zc&&nr()}verifyOperationInProgress(){}async na(){let e;do e=this.Kc,await e;while(e!==this.Kc)}sa(e){for(let t of this.jc)if(t.timerId===e)return!0;return!1}ia(e){return this.na().then(()=>{for(let t of(this.jc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs),this.jc))if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.na()})}ra(e){this.Jc.push(e)}ea(e){let t=this.jc.indexOf(e);this.jc.splice(t,1)}}function a6(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(let r of t)if(r in e&&"function"==typeof e[r])return!0;return!1}(e,["next","error","complete"])}class a3 extends aZ{constructor(e,t,r,n){super(e,t,r,n),this.type="firestore",this._queue=new a5,this._persistenceKey=(null==n?void 0:n.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||le(this),this._firestoreClient.terminate()}}function a7(e,t){let r="object"==typeof e?e:(0,h.Mq)(),n=(0,h.qX)(r,"firestore").getImmediate({identifier:"string"==typeof e?e:t||"(default)"});if(!n._initialized){let e=(0,g.P0)("firestore");e&&function(e,t,r,n={}){var i;let s=(e=aJ(e,aZ))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&ne("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${r}`,ssl:!1})),n.mockUserToken){let t,r;if("string"==typeof n.mockUserToken)t=n.mockUserToken,r=r9.MOCK_USER;else{t=(0,g.Sg)(n.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);let s=n.mockUserToken.sub||n.mockUserToken.user_id;if(!s)throw new ni(nn.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");r=new r9(s)}e._authCredentials=new nl(new no(t,r))}}(n,...e)}return n}function a8(e){return e._firestoreClient||le(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function le(e){var t,r,n,i,s,o;let a=e._freezeSettings(),l=(i=e._databaseId,s=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",o=e._persistenceKey,new nQ(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams));e._firestoreClient=new aV(e._authCredentials,e._appCheckCredentials,e._queue,l),(null===(r=a.cache)||void 0===r?void 0:r._offlineComponentProvider)&&(null===(n=a.cache)||void 0===n?void 0:n._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:a.cache.kind,_offline:a.cache._offlineComponentProvider,_online:a.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new lt(nB.fromBase64String(e))}catch(e){throw new ni(nn.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new lt(nB.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ni(nn.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nk(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ni(nn.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ni(nn.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return np(this._lat,e._lat)||np(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ls=/^__.*__$/;class lo{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new sc(e,this.data,this.fieldMask,t,this.fieldTransforms):new su(e,this.data,t,this.fieldTransforms)}}function la(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nr()}}class ll{constructor(e,t,r,n,i,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=n,void 0===i&&this.oa(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ua(){return this.settings.ua}ca(e){return new ll(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}aa(e){var t;let r=null===(t=this.path)||void 0===t?void 0:t.child(e),n=this.ca({path:r,ha:!1});return n.la(e),n}fa(e){var t;let r=null===(t=this.path)||void 0===t?void 0:t.child(e),n=this.ca({path:r,ha:!1});return n.oa(),n}da(e){return this.ca({path:void 0,ha:!0})}_a(e){return lv(e,this.settings.methodName,this.settings.wa||!1,this.path,this.settings.ma)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}oa(){if(this.path)for(let e=0;e<this.path.length;e++)this.la(this.path.get(e))}la(e){if(0===e.length)throw this._a("Document fields must not be empty");if(la(this.ua)&&ls.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class lu{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||oR(e)}ga(e,t,r,n=!1){return new ll({ua:e,methodName:t,ma:r,path:nk.emptyPath(),ha:!1,wa:n},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lc(e){let t=e._freezeSettings(),r=oR(e._databaseId);return new lu(e._databaseId,!!t.ignoreUndefinedProperties,r)}function lh(e,t,r,n,i,s={}){let o,a;let l=e.ga(s.merge||s.mergeFields?2:0,t,r,i);lm("Data must be an object, but it was:",l,n);let u=lg(n,l);if(s.merge)o=new nU(l.fieldMask),a=l.fieldTransforms;else if(s.mergeFields){let e=[];for(let n of s.mergeFields){let i=function(e,t,r){if((t=(0,g.m9)(t))instanceof lr)return t._internalPath;if("string"==typeof t)return lb(e,t);throw lv("Field path arguments must be of type string or ",e,!1,void 0,r)}(t,n,r);if(!l.contains(i))throw new ni(nn.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);(function(e,t){return e.some(e=>e.isEqual(t))})(e,i)||e.push(i)}o=new nU(e),a=l.fieldTransforms.filter(e=>o.covers(e.field))}else o=null,a=l.fieldTransforms;return new lo(new ir(u),o,a)}class ld extends ln{_toFieldTransform(e){return new st(e.path,new i4)}isEqual(e){return e instanceof ld}}function lf(e,t){if(lp(e=(0,g.m9)(e)))return lm("Unsupported field value:",t,e),lg(e,t);if(e instanceof ln)return function(e,t){if(!la(t.ua))throw t._a(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t._a(`${e._methodName}() is not currently supported inside arrays`);let r=e._toFieldTransform(t);r&&t.fieldTransforms.push(r)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ha&&4!==t.ua)throw t._a("Nested arrays are not supported");return function(e,t){let r=[],n=0;for(let i of e){let e=lf(i,t.da(n));null==e&&(e={nullValue:"NULL_VALUE"}),r.push(e),n++}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=(0,g.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e){var r,n,i;return r=t.serializer,"number"==typeof(i=n=e)&&Number.isInteger(i)&&!nA(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER?i0(n):iZ(r,n)}if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){let r=ny.fromDate(e);return{timestampValue:sz(t.serializer,r)}}if(e instanceof ny){let r=new ny(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:sz(t.serializer,r)}}if(e instanceof li)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof lt)return{bytesValue:s$(t.serializer,e._byteString)};if(e instanceof a0){let r=t.databaseId,n=e.firestore._databaseId;if(!n.isEqual(r))throw t._a(`Document reference is for database ${n.projectId}/${n.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:sH(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a(`Unsupported field value: ${aX(e)}`)}(e,t)}function lg(e,t){let r={};return nO(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):nD(e,(e,n)=>{let i=lf(n,t.aa(e));null!=i&&(r[e]=i)}),{mapValue:{fields:r}}}function lp(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ny||e instanceof li||e instanceof lt||e instanceof a0||e instanceof ln)}function lm(e,t,r){if(!lp(r)||!("object"==typeof r&&null!==r&&(Object.getPrototypeOf(r)===Object.prototype||null===Object.getPrototypeOf(r)))){let n=aX(r);throw"an object"===n?t._a(e+" a custom object"):t._a(e+" "+n)}}let ly=RegExp("[~\\*/\\[\\]]");function lb(e,t,r){if(t.search(ly)>=0)throw lv(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new lr(...t.split("."))._internalPath}catch(n){throw lv(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function lv(e,t,r,n,i){let s=n&&!n.isEmpty(),o=void 0!==i,a=`Function ${t}() called with invalid data`;r&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${n}`),o&&(l+=` in document ${i}`),l+=")"),new ni(nn.INVALID_ARGUMENT,a+e+l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,t,r,n,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=n,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new a0(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){let e=new lx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(lk("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class lx extends lw{data(){return super.data()}}function lk(e,t){return"string"==typeof t?lb(e,t):t instanceof lr?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ni(nn.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lT{}class lI extends lT{}function l_(e,t,...r){let n=[];for(let i of(t instanceof lT&&n.push(t),function(e){let t=e.filter(e=>e instanceof lN).length,r=e.filter(e=>e instanceof lC).length;if(t>1||t>0&&r>0)throw new ni(nn.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(r)),n))e=i._apply(e);return e}class lC extends lI{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new lC(e,t,r)}_apply(e){let t=this._parse(e);return lM(e._query,t),new a1(e.firestore,e.converter,iM(e._query,t))}_parse(e){let t=lc(e.firestore),r=function(e,t,r,n,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new ni(nn.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){lP(o,s);let t=[];for(let r of o)t.push(lL(n,e,r));a={arrayValue:{values:t}}}else a=lL(n,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||lP(o,s),a=function(e,t,r,n=!1){return lf(r,e.ga(n?4:3,t))}(r,t,o,"in"===s||"not-in"===s);return ic.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return r}}function lS(e,t,r){let n=lk("where",e);return lC._create(n,t,r)}class lN extends lT{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new lN(e,t)}_parse(e){let t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:ih.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let r=e,n=t.getFlattenedFilters();for(let e of n)lM(r,e),r=iM(r,e)}(e._query,t),new a1(e.firestore,e.converter,iM(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class lA extends lI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new lA(e,t)}_apply(e){let t=function(e,t,r){if(null!==e.startAt)throw new ni(nn.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ni(nn.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");let n=new il(t,r);return function(e,t){if(null===iR(e)){let r=iD(e);null!==r&&lj(e,r,t.field)}}(e,n),n}(e._query,this._field,this._direction);return new a1(e.firestore,e.converter,function(e,t){let r=e.explicitOrderBy.concat([t]);return new iS(e.path,e.collectionGroup,r,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function lR(e,t="asc"){let r=lk("orderBy",e);return lA._create(r,t)}class lD extends lI{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new lD(e,t,r)}_apply(e){return new a1(e.firestore,e.converter,ij(e._query,this._limit,this._limitType))}}function lO(e){return function(e,t){if(t<=0)throw new ni(nn.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}("limit",e),lD._create("limit",e,"F")}function lL(e,t,r){if("string"==typeof(r=(0,g.m9)(r))){if(""===r)throw new ni(nn.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iO(t)&&-1!==r.indexOf("/"))throw new ni(nn.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);let n=t.path.child(nw.fromString(r));if(!nE.isDocumentKey(n))throw new ni(nn.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return n9(e,new nE(n))}if(r instanceof a0)return n9(e,r._key);throw new ni(nn.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${aX(r)}.`)}function lP(e,t){if(!Array.isArray(e)||0===e.length)throw new ni(nn.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function lM(e,t){if(t.isInequality()){let r=iD(e),n=t.field;if(null!==r&&!r.isEqual(n))throw new ni(nn.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${n.toString()}'`);let i=iR(e);null!==i&&lj(e,n,i)}let r=function(e,t){for(let r of e)for(let e of r.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==r)throw r===t.op?new ni(nn.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ni(nn.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}function lj(e,t,r){if(!r.isEqual(t))throw new ni(nn.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}class lF{convertValue(e,t="none"){switch(nY(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nq(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(nH(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw nr()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return nD(e,(e,n)=>{r[e]=this.convertValue(n,t)}),r}convertGeoPoint(e){return new li(nq(e.latitude),nq(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=nG(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(nW(e));default:return null}}convertTimestamp(e){let t=n$(e);return new ny(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=nw.fromString(e);s1(r)||nr();let n=new nX(r.get(1),r.get(3)),i=new nE(r.popFirst(5));return n.isEqual(t)||r8(`Document ${i} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lU(e,t,r){return e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lB extends lw{constructor(e,t,r,n,i,s){super(e,t,r,n,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new lz(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(lk("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class lz extends lB{data(e={}){return super.data(e)}}class l${constructor(e,t,r,n){this._firestore=e,this._userDataWriter=t,this._snapshot=n,this.metadata=new lV(n.hasPendingWrites,n.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new lz(this._firestore,this._userDataWriter,r.key,r,new lV(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ni(nn.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(r=>{let n=new lz(e._firestore,e._userDataWriter,r.doc.key,r.doc,new lV(e._snapshot.mutatedKeys.has(r.doc.key),e._snapshot.fromCache),e.query.converter);return r.doc,{type:"added",doc:n,oldIndex:-1,newIndex:t++}})}{let r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{let n=new lz(e._firestore,e._userDataWriter,t.doc.key,t.doc,new lV(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,s=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(s=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:function(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nr()}}(t.type),doc:n,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lq(e){e=aJ(e,a0);let t=aJ(e.firestore,a3);return(function(e,t,r={}){let n=new ns;return e.asyncQueue.enqueueAndForget(async()=>(function(e,t,r,n,i){let s=new aU({next:s=>{t.enqueueAndForget(()=>al(e,o));let a=s.docs.has(r);!a&&s.fromCache?i.reject(new ni(nn.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&n&&"server"===n.source?i.reject(new ni(nn.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new ad(iN(r.path),s,{includeMetadataChanges:!0,Uu:!0});return aa(e,o)})(await aH(e),e.asyncQueue,t,r,n)),n.promise})(a8(t),e._key).then(r=>lJ(t,e,r))}class lH extends lF{constructor(e){super(),this.firestore=e}convertBytes(e){return new lt(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new a0(this.firestore,null,t)}}function lK(e){e=aJ(e,a1);let t=aJ(e.firestore,a3),r=a8(t),n=new lH(t);return lE(e._query),(function(e,t,r={}){let n=new ns;return e.asyncQueue.enqueueAndForget(async()=>(function(e,t,r,n,i){let s=new aU({next:r=>{t.enqueueAndForget(()=>al(e,o)),r.fromCache&&"server"===n.source?i.reject(new ni(nn.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(r)},error:e=>i.reject(e)}),o=new ad(r,s,{includeMetadataChanges:!0,Uu:!0});return aa(e,o)})(await aH(e),e.asyncQueue,t,r,n)),n.promise})(r,e._query).then(r=>new l$(t,n,e,r))}function lG(e,t,r){e=aJ(e,a0);let n=aJ(e.firestore,a3),i=lU(e.converter,t,r);return lX(n,[lh(lc(n),"setDoc",e._key,i,null!==e.converter,r).toMutation(e._key,sn.none())])}function lW(e,t){let r=aJ(e.firestore,a3),n=a9(e),i=lU(e.converter,t);return lX(r,[lh(lc(e.firestore),"addDoc",n._key,i,null!==e.converter,{}).toMutation(n._key,sn.exists(!1))]).then(()=>n)}function lQ(e,...t){var r,n,i;let s,o,a;e=(0,g.m9)(e);let l={includeMetadataChanges:!1},u=0;"object"!=typeof t[0]||a6(t[u])||(l=t[u],u++);let c={includeMetadataChanges:l.includeMetadataChanges};if(a6(t[u])){let e=t[u];t[u]=null===(r=e.next)||void 0===r?void 0:r.bind(e),t[u+1]=null===(n=e.error)||void 0===n?void 0:n.bind(e),t[u+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}if(e instanceof a0)o=aJ(e.firestore,a3),a=iN(e._key.path),s={next:r=>{t[u]&&t[u](lJ(o,e,r))},error:t[u+1],complete:t[u+2]};else{let r=aJ(e,a1);o=aJ(r.firestore,a3),a=r._query;let n=new lH(o);s={next:e=>{t[u]&&t[u](new l$(o,n,r,e))},error:t[u+1],complete:t[u+2]},lE(e._query)}return function(e,t,r,n){let i=new aU(n),s=new ad(t,i,r);return e.asyncQueue.enqueueAndForget(async()=>aa(await aH(e),s)),()=>{i.Sc(),e.asyncQueue.enqueueAndForget(async()=>al(await aH(e),s))}}(a8(o),a,c,s)}function lX(e,t){return function(e,t){let r=new ns;return e.asyncQueue.enqueueAndForget(async()=>ak(await aq(e).then(e=>e.syncEngine),t,r)),r.promise}(a8(e),t)}function lJ(e,t,r){let n=r.docs.get(t._key),i=new lH(e);return new lB(e,i,t._key,n,new lV(r.hasPendingWrites,r.fromCache),t.converter)}function lY(){return new ld("serverTimestamp")}!function(e,t=!0){r5=h.Jn,(0,h.Xd)(new d.wA("firestore",(e,{instanceIdentifier:r,options:n})=>{let i=e.getProvider("app").getImmediate(),s=new a3(new nu(e.getProvider("auth-internal")),new nf(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ni(nn.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nX(e.options.projectId,t)}(i,r),i);return n=Object.assign({useFetchStreams:t},n),s._setSettings(n),s},"PUBLIC").setMultipleInstances(!0)),(0,h.KN)(r4,"3.11.0",void 0),(0,h.KN)(r4,"3.11.0","esm2017")}()}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[774,179],function(){return t(1118),t(6885)}),_N_E=e.O()}]);